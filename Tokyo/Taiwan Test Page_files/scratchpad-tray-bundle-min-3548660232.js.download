(function(){window.Scratchpad=window.Scratchpad||{};if(window.Scratchpad.page){var b=window.Scratchpad.page;}if(window.Scratchpad.headerTray){var a=window.Scratchpad.headerTray;}window.Scratchpad={page:b||false,headerTray:a||{},endpoints:{historyCount:"/userHistory/count",viewership:"/Hotels/Offers?action=getHotelProductActivity&hotelIds=",regionViewership:"/api/urgency/regionActivity/",hotelPriceInfo:"/api/userhistory/pricing",sendMeNotes:"/sendmenotes",loginRedirect:"/user/login?ckoflag=0&hsuc=&fram=&uurl=qscr%3Dredr%26rurl%3D%2Fscratchpad%3FsendMeNotes%3Dtrue",scratchpadOptions:"/api/userhistory/options",addNotes:"/scratchpad/addnote",instaflights:"/api/userhistory/instaflights"},state:{isUsPos:false,isTVLY:false,isWotif:false,isLastMinute:false,isOrbitz:false,isCheapTickets:false,isEbookers:false,isHotwire:false,isAago:false,isMrJet:false,tuid:"",guid:"",expuserid:"",loggedInUser:false,guestUser:false,userIsNudgeEnrolled:false,legacyTemplates:false,blockSaveHeader:false,blockNotesHeader:false,requireHistory:true,browserVersion:null,supportedLOBs:-1,userPrompts:[],currentCount:-1,pricingRequestTimeout:window.pricingRequestTimeout||5000},init:function(){var r=this,k=this.signedInUserCheck(),g=this.getLOBs(),h=this.browserVersionCheck(),n=this.handlebarsCheck(),o=this.tvlyCheck(),f=this.wotifCheck(),j=this.lastMinuteCheck(),p=this.orbitzCheck(),i=this.cheapTicketsCheck(),e=this.ebookersCheck(),c=this.hotwireCheck(),d=this.mrJetCheck(),l=this.aagoCheck(),q=this.usPosCheck(),m=$.Deferred().done(function(s){r.state.pageId=s;if(s=="Emain"){if(typeof addScratchpadBadge==="function"){addScratchpadBadge(true);}return;}if(!r.state.blockNotesHeader){r.state.blockNotesHeader=!r.state.isUsPos;}r.headerTray.init(r.state);r.getHistoryCount();r.getUserFlags();r.trayTestAndLearns.init(r.state,s);if(window.AlertsMenu){AlertsMenu.tests.init();}});this.pageIdCheck(m);this.manageAlertMenu();this.buildRfrr();return{signedInUserCheck:k,supportedLOBs:g,handlebarsCheck:n,browserVersionCheck:h,usPosCheck:q,tvlyCheck:o,wotifCheck:f,lastMinuteCheck:j,orbitzCheck:p,cheapTicketsCheck:i,ebookersCheck:e,hotwireCheck:c,mrJetCheck:d,aagoCheck:l};},usPosCheck:function(){var c=$(".site-header-primary").hasClass("us-pos");this.state.isUsPos=c;return c;},tvlyCheck:function(){var c=/travelocity/.test(window.location.href);this.state.isTVLY=c;return c;},wotifCheck:function(){var c=/wotif/.test(window.location.href);this.state.isWotif=c;return c;},lastMinuteCheck:function(){var c=/lastminute/.test(window.location.href);this.state.isLastMinute=c;return c;},orbitzCheck:function(){var c=/orbitz/.test(window.location.href);this.state.isOrbitz=c;return c;},cheapTicketsCheck:function(){var c=/cheaptickets/.test(window.location.href);this.state.isCheapTickets=c;return c;},ebookersCheck:function(){var c=/ebookers/.test(window.location.href);this.state.isEbookers=c;return c;},mrJetCheck:function(){var c=/mrjet/.test(window.location.href);this.state.isMrJet=c;return c;},hotwireCheck:function(){var c=/hotwire/.test(window.location.href);this.state.isHotwire=c;return c;},aagoCheck:function(){var c=/airasiago/.test(window.location.href);this.state.isAago=c;return c;},pageIdCheck:function(e){if(/pub\/agent\.dll/i.test(window.location.href)){e.resolve("Emain");return;}var d=0;var c=setInterval(function(){var g=$("#pageId");if(g.attr("value")){clearInterval(c);var f=g.attr("value").split(".");if((f[1]==="Hotels"||f[1]==="Packages")||f[1]==="car"&&f[2]){f=f[1]+"-"+f[2];}else{if(/Flight-Search/i.test(f[1])){f="Flight-Search";}else{if(f[1]){f=f[1];}else{f=f[0];}}}e.resolve(f);}else{if(d>100){clearInterval(c);e.resolve("Page Id did not arrive in time");}}d+=5;},5);},getLOBs:function(){var c=$("#scratchpad-badge-lobs").attr("data-id");if(!c||c==="null"){this.state.supportedLOBs=-1;}else{c=c.split(",");this.state.supportedLOBs=c;}return this.state.supportedLOBs;},buildLOBsQueryParam:function(e){e=e||"&";var f=e,c=this.state.supportedLOBs.length||0,d=0;if(this.state.supportedLOBs===-1||c===0){f="";}else{for(d=0;d<c;d++){f=f+("&lobs="+this.state.supportedLOBs[d]);}if(f.charAt(0)=="&"){f=f.slice(1);}}return f;},updateCountEndpoint:function(){var f="tuid=",d=$("#scratchpad-badge-tuid").attr("data-id"),h=$("#scratchpad-badge-guid").attr("data-id"),e=$("#scratchpad-badge-expuserid").attr("data-id"),j=this.buildLOBsQueryParam("&"),c=($("#scratchpad-badge-site-id").attr("data-id")||1),k="",i=false,l=[],g="";this.state.guid=h;this.state.tuid=d;this.state.expuserid=e;if(parseInt(d,10)===-1||d===""){g=h;f="guid=";l.push("GUID");}else{g=d;l.push("TUID");}if(!g){l="Either userId is Invalid";}else{k="/userHistory/count/jsonp?"+f+g+"&expuserid="+e+"&siteid="+c+j+"&format=jsonp&callback=?";this.endpoints.historyCount=k;if(l.push){l.push(k);}i=true;}return{pass:i,result:l};},signedInUserCheck:function(){var h=$("#header-history"),d=$(".shop-nav").hasClass("signed-in"),c=[d],g=false,f,e;if(/hotwire/.test(window.location.href)){d=$(".account-menu").hasClass("signed-in");}if(h.attr("data-identifieduser")){e=(h.attr("data-identifieduser")=="true");c.push(e);}else{c="userStateFlag is missing or lacks required attributes";}if(h.attr("data-guestuser")){f=(h.attr("data-guestuser")=="true");if(c.push){c.push(f);}}else{c="guestUserFlag is missing or lacks required attributes";}this.state.loggedInUser=(d||e);this.state.guestUser=f;g=(typeof c!="string");return{pass:g,result:c};},handlebarsCheck:function(){var e=(this.state.browserVersion=="Firefox 41");var d=($("#scratchpad-badge-site-id").attr("data-id")||1);var c=(!!window.Handlebars&&!!window.uitk&&!e&&(d!=80004)&&uitk.version.split(".")[0]==="v2");this.state.legacyTemplates=!c;return{pass:true,result:c};},browserVersionCheck:function(){var d=navigator.userAgent,c,e=d.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];if(/trident/i.test(e[1])){c=/\brv[ :]+(\d+)/g.exec(d)||[];return"IE "+(c[1]||"");}if(e[1]==="Chrome"){c=d.match(/\b(OPR|Edge)\/(\d+)/);if(c!=null){return c.slice(1).join(" ").replace("OPR","Opera");}}e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"];if((c=d.match(/version\/(\d+)/i))!=null){e.splice(1,1,c[1]);}this.state.browserVersion=e.join(" ");return e.join(" ");},manageAlertMenu:function(){if(window.AlertsMenu){AlertsMenu.init();}return this;},buildRfrr:function(){var d=$("#header-history");var c=d.attr("href")+"?rfrr=SP.NoTray.SP";d.attr("href",c);return this;},determineAdditionalUserMessagingFromOptions:function(g){if(g&&g.status=="SUCCESS"&&g.scratchpadUserOptions){var c={},h=this.getLocalFlag("scratchpadDeclineNotesInTray"),d=this.getLocalFlag("scratchpadDeclineSaveInTray"),f=(!this.state.loggedInUser||this.state.guestUser)&&!d,k=(this.state.currentCount<1),i=this.state.isUsPos&&g.scratchpadUserOptions.anyNews&&!window.AlertsMenu,e=!h&&this.state.isUsPos&&!i&&!g.scratchpadUserOptions.sendNotes;if(e){c.promptType="notes";}else{if(f){c.promptType="save";}else{if(k){c.promptType="default";}}}if(c.promptType&&c.promptType!=="default"){if(window.AlertsMenu){var j={news:"spBasicNews",notes:"spNudgeEnroll",save:"spSignIn"}[c.promptType];AlertsMenu.addLateAlert({newsFeedType:"scratchpadLegacyAlert",msgid:j,params:[]});}else{this.state.userPrompts.push(c);}}else{if(c.promptType){this.state.userPrompts.push(c);}}}this.headerTray.showTooltips();return this;},enrollInNudge:function(){var c=this;this.state.blockNotesHeader=true;if(this.page){this.page.setNotesToggle(true);}return this.sendNotes(true);},declineNudge:function(c){this.state.blockNotesHeader=true;if(!c){this.sendeVar28("Scratchpad.NotesLater").setLocalFlag("scratchpadDeclineNotesInTray",true);}return this.sendNotes(false);},declineSignInToSave:function(){this.state.blockSaveHeader=true;this.sendeVar28("Scratchpad.SaveLater").setLocalFlag("scratchpadDeclineSaveInTray",true);return this;},updateBadgeCount:function(c){c=parseInt(c);if(!c||isNaN(c)){c=0;}c=Math.min(c,30);this.state.currentCount=c;this.headerTray.state.currentCount=c;this.trayTestAndLearns.state.currentCount=c;return this;
},createHistoryCountEndpoint:function(f){var k="?tuid=";var d=$("#scratchpad-badge-tuid").attr("data-id");var h=$("#scratchpad-badge-guid").attr("data-id");var e=$("#scratchpad-badge-expuserid").attr("data-id");var j=this.buildLOBsQueryParam("&");var c=($("#scratchpad-badge-site-id").attr("data-id")||1);var l="";var i=false;var m=[];var g="";this.state.guid=h;this.state.tuid=d;this.state.expuserid=e;if(parseInt(d,10)===-1||d===""){g=h;k="?guid=";m.push("GUID");}else{g=d;m.push("TUID");}if(!g){m="Either userId is Invalid";}else{l=f+k+g+"&expuserid="+e+"&siteid="+c+j;}return l;},getHistoryCount:function(){var d=this;var c="json";var f=this.endpoints.historyCount;if(!window.scratchpadBadgeDontShow){var e=(Scratchpad.state.pageId=="Hotel-Search")?20000:10000;this._request(this.createHistoryCountEndpoint(f),c,"GET",{},e).then(function(g){if((g.responsestatus&&g.responsestatus.status&&g.responsestatus.status=="SUCCESS")||(g.status&&g.status=="SUCCESS")){g.count=g.count||0;d.updateBadgeCount(g.count);d.headerTray.updateBadge(g.count);}});}return{pass:true,result:[]};},getUserFlags:function(){var c=this;return this._request(this.endpoints.scratchpadOptions).then(function(d){c.determineAdditionalUserMessagingFromOptions(d);});},getHotelPricing:function(e,f){var c=this,d={hotels:e.idArray,checkInDateString:e.startDate,checkOutDateString:e.endDate,roomOccupants:f};return $.ajax({url:this.endpoints.hotelPriceInfo,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(d),timeout:c.state.pricingRequestTimeout});},getInstaFlights:function(c){return $.ajax({url:this.endpoints.instaflights,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(c),timeout:5000});},sendNotes:function(c){return this._request(this.endpoints.sendMeNotes,"json","POST",{sendMeNotes:c}).done(function(d){if(c&&!d){window.location.href=Scratchpad.endpoints.loginRedirect;}});},logeVar34:function(c){return this;},sendeVar28:function(c){if(window.dctk&&window.dctk.onReady){dctk.onReady(function(){dctk.omtr.eVar28=c;dctk.omtr.events="event80";dctk.omtr.linkTrackVars="eVar28,events";dctk.omtr.linkTrackEvents="event80,event81";dctk.omtr.tl(true,"o","RFRR Action Link");});}return this;},sendeVar34WithoutChecks:function(c){dctk.omtr.eVar34=c;dctk.omtr.events="event80";dctk.omtr.linkTrackVars="eVar34,events";dctk.omtr.linkTrackEvents="event80,event81";dctk.omtr.tl(true,"o","RFRR Action Link");},sendeVar34:function(c){if(window.dctk&&window.dctk.onReady){dctk.onReady(function(){Scratchpad.sendeVar34WithoutChecks(c);});}return this;},sendeVar34WithDelay:function(c){if(window.dctk&&window.dctk.onReady){dctk.onReady(function(){setTimeout(function(){Scratchpad.sendeVar34WithoutChecks(c);},500);});}return this;},addHistoryItemNote:function(c,d){return this._request(this.endpoints.addNotes,"json","POST",{uid:d,note:c});},_request:function(g,c,d,f,e){if(!g){return;}return $.ajax({url:g,type:d||"GET",dataType:c||"json",data:f||{},timeout:e||10000});},_requestWithObj:function(c){return $.ajax(c);},publishEvent:function(c){if(!window.uitk||!window.uitk.publish){return false;}uitk.publish(c);return true;},setLocalFlag:function(c,d){try{if(window.localStorage){try{window.localStorage.setItem(c,d);}catch(f){return false;}}}catch(f){return false;}return true;},getLocalFlag:function(c){var f=false;try{if(window.localStorage){try{f=window.localStorage.getItem(c);}catch(d){return false;}}}catch(d){return false;}return f;},decodeHtmlEntity:function(c){return c.replace(/&#(\d+);/g,function(e,d){return String.fromCharCode(d).replace("(","").replace(")","").replace("[","").replace("]","").replace("{","").replace("}","").replace("<","").replace(">","").replace("=","");});},encodeHtmlEntity:function(d){var c=[],d=d.replace(/[<>]+/g,""),e=(d.length-1);for(e;e>=0;e--){c.unshift(["&#",d[e].charCodeAt(),";"].join(""));}return c.join("");},_modelsMatch:function(e,d){if(e.hasOwnProperty("product")&&d.hasOwnProperty("product")&&(e.product===d.product)&&(e.type===d.type)){var c={"AIR":"flight","HOTEL":((e.type==="DETAIL")?"hotel":"hotelSearch"),"PACKAGE":"packages","CAR":((e.type==="DETAIL")?"carDetail":"carSearch"),"CRUISE":"cruise-search","ACTIVITY":"activity"}[e.product];if(e[c]["id"]===d[c]["id"]){return true;}else{return false;}}else{return false;}}};if(window.define){define("scratchpad",["uitk","jquery"],function(){return Scratchpad;});}})();window.scratchpadInterventionAllowed=(function(){return false;})();window.scratchpadNewsUpdateNeeded=(function(){return false;})();window.logScratchpadIntervention=function(a){return"this method has been deprecated";};var Scratchpad=Scratchpad||{};(function(a){a.headerTray={$elements:{$history:null,$badge:null,$greeting:null,$viewAllItem:null},templates:{hotelTemplate:null,hotelSearchTemplate:null,flightTemplate:null,flightDetailTemplate:null,packageTemplate:null,carSearchTemplate:null,carDetailTemplate:null,cruiseSearchTemplate:null,activitySearchTemplate:null,activityDetailTemplate:null},state:{isTVLY:false,isWotif:false,isAago:false,greeting:false,blockSaveHeader:false,blockNotesHeader:false,userIsNudgeEnrolled:false,apiAttemptsRemaining:0,currentCount:-1,historyData:[],isOkToShowTray:false,trayIsTurnedOn:false,addSearchAsItem:false,userHasNews:false,alreadyShowedTT:false,loading:true},locStrings:{scratchpadName:"Scratchpad",seePrice:"See price",asOf:"as of ####",from:"from ####",oneWay:"One way",roundTrip:"Round trip",fromTo:"#### to ####",others:"#### others viewing now",other:"1 other viewing now",plus:"#### + ####",included:"#### and #### included",notesConfirmation:"We'll send Scratchpad updates to you by email. Watch your inbox!",defaultHeaderMessage:"Things you view while shopping are saved here. Pick up where you left off.",getUpdates:"Get Scratchpad updates by email.",thingsSavedHere:"Things you view while shopping are saved here.",viewScratchpad:"View Scratchpad",viewAllItems:"View all #### items",searchIsSaved:"This search has been added to your recently viewed items.",sendNotesTo:"We'll send updates to ####. Watch your inbox!",pageGetUpdates:"Get updates about things in your Scratchpad.",notAvailable:"Not available",findOutWhy:"Find out why",room:"1 room left at this price",rooms:"#### rooms left at this price",packages:"#### Packages",flight:"Flight",hotel:"hotel",car:"car",othersSearching:"#### others searching now",hotels:"#### Hotels",fromToHyphen:"#### - ####",hotelSearchAvgPerNight:"avg per night",perPerson:"per person",airlineLogoAltText:"logo",multipleAirlinesLogoAltText:"Multiple Airlines logo"},trayItems:[],productNameMap:{"FLIGHT":"Flight","HOTEL":"hotel","CAR":"car","CRUISE":"cruise","ACTIVITY":"activity"},init:function(c){for(var b in c){if(c.hasOwnProperty(b)){this.state[b]=c[b];}}this.locStrings=window.scratchpadLocStrings||this.locStrings;this.productNameMap={"FLIGHT":this.locStrings.flight,"HOTEL":this.locStrings.hotel,"CAR":this.locStrings.car};this.captureElements();this.themeCheck();this.captureTemplates();this.bindHeaderButtons();this.nuxScratchpadPopup();if(this.state.isUsPos){window.scratchpadPrivateDealsEnabled=window.scratchpadPrivateDealsEnabled||false;}},nuxScratchpadPopup:function(){if(uitk&&uitk.version.split(".")[0]==="v2"){if(this.nuxsessionStorage=="undefined"||this.nuxsessionStorage==null){this.nuxsessionStorage=uitk.createBrowserStorage("local");}if(this.nuxsessionStorage.readItem("nuxScratchpadShow")==null){this.nuxsessionStorage.saveItem("nuxScratchpadShow","false");this.$elements.$history.trigger("scratchpad.turnedOn");}}},captureElements:function(){var c=true,b="success";this.$elements.$history=$("#header-history.nav-tab");this.$elements.$badge=$("#scratchpad-badge");this.$elements.$greeting=$(".scratchpad-greeting");this.$elements.$viewAllItem=$(".view-all-history");if(!this.$elements.$history||!this.$elements.$badge||!this.$elements.$greeting||!this.$elements.$viewAllItem){c=false;b="not all elements were captured";}return{pass:c,result:[b]};},themeCheck:function(){var b=parseInt(window.scrachpadWhiteTrayTheme,10);
this.state.themeBucket=b;return b;},updateUI:function(){if(!window.AlertsMenu){this.updateTrayHeader();}if(!window.scratchpadBadgeDontShow){this.updateBadge();}this.updateTrayFooter();this.updateNavAction();},updateBadge:function(c){c=c||this.state.currentCount;var b=c>0;this.$elements.$badge.text(c).toggleClass("badge-urgent",b).toggleClass("visuallyhidden",!b);if(!b){$("#accessibleTrayBadge").attr("aria-hidden","true");}else{$("#accessibleTrayBadge").attr("aria-hidden","false").html((c==1)?accessibleTrayBadgeOne:accessibleTrayBadgePlural.replace("####",c));}return{pass:true,result:[c,b]};},updateNavAction:function(){if(this.state.isOkToShowTray&&!this.state.trayIsTurnedOn){var b=this;this.state.trayIsTurnedOn=true;if(this.state.isTVLY){this.$elements.$history.parent().addClass("isTVLY");}if(this.state.isWotif){this.$elements.$history.parent().addClass("isWotif");}if(this.state.isLastMinute){this.$elements.$history.parent().addClass("isLastMinute");}if(this.state.isOrbitz){this.$elements.$history.parent().addClass("isOrbitz");}if(this.state.isCheapTickets){this.$elements.$history.parent().addClass("isCheapTickets");}if(this.state.isEbookers){this.$elements.$history.parent().addClass("isEbookers");}if(this.state.isAago){this.$elements.$history.parent().addClass("isAago");}if(this.state.isMrJet){this.$elements.$history.parent().addClass("isMrJet");}if(this.state.isHotwire){this.$elements.$history.addClass("menu-control").parent().addClass("isHotwire");}if(!this.state.isHotwire){$("<span>").addClass("icon icon-toggle180").attr("aria-hidden","true").appendTo(this.$elements.$history);}this.$elements.$history.attr("data-control","menu").attr("href","#").trigger("scratchpad.turnedOn").click(function(){$(".user-history-tab").uitk_tooltip("hide");b.state.alreadyShowedTT=true;});}return{pass:true,result:[this.state.trayIsTurnedOn]};},becomeTwoColumn:function(){$(".user-history-tab .menu").addClass("two-column");return this;},showTooltips:function(){if(this.state.alreadyShowedTT){return;}this.filterTooltipsBecauseUITKIsNotWorking(Scratchpad.state.pageId,Scratchpad.state.isTVLY);if(!Scratchpad.trayTestAndLearns.state.isMobileHeader){if(Scratchpad.state.pageId==="Hotels-Infosite"){this.updateScratchpadLink();this.showHotelInfositeTooltip();}else{if(Scratchpad.state.pageId==="Flight-Search"&&!window.scratchpadBlockFSRTooltip){this.updateScratchpadLink();Scratchpad.trayTestAndLearns.searchTooltipTL();}else{if(Scratchpad.state.pageId==="car-search"){this.updateScratchpadLink();Scratchpad.trayTestAndLearns.searchTooltipTL();}else{if(Scratchpad.state.pageId==="Flight"&&$(".user-history-tab").hasClass("udpTT")){this.updateScratchpadLink();Scratchpad.trayTestAndLearns.flightTooltipTL();}}}}}return this;},filterTooltipsBecauseUITKIsNotWorking:function(c,f){var b=$(".user-history-tab").attr("data-content");if(this.state.alreadyFilteredTTString){return;}var g=b.split("</div>");var e=Scratchpad.state.userIsNudgeEnrolled;var d="";if(f){if(c==="Hotels-Infosite"){d=g[0]+"</div>";}else{if(c==="Flight-Search"||c==="car-search"){d=g[1]+"</div>";}else{if(c==="Flight"){d=g[2]+"</div>";}}}}else{if(c==="Hotels-Infosite"){if(e){d=g[0]+"</div>";}else{d=g[3]+"</div>";}}else{if(c==="Flight-Search"||c==="car-search"){if(e){d=g[1]+"</div>";}else{d=g[4]+"</div>";}}else{if(c==="Flight"){if(e){d=g[2]+"</div>";}else{d=g[5]+"</div>";}}}}}$(".user-history-tab").attr("data-content",d);this.state.alreadyFilteredTTString=true;if(!f){$(".user-history-tab").attr("nudge-data",g[g.length-2]+"</div>");}},updateScratchpadLink:function(){var b=$(".user-history-tab").attr("data-content");var d=$.parseHTML(b);var c=$(d).find("span:first").text();$("#header-history").append('<span class="visuallyhidden">'+c+" </span>");},showHotelInfositeTooltip:function(c){var b=this;require(["infosite"],function(h){if(!window.uitk||h.isDateless||b.state.alreadyShowedTT){return false;}b.state.alreadyShowedTT=true;var f=$(".user-history-tab"),i=Scratchpad.state.userIsNudgeEnrolled,d=(!i&&f.attr("data-tt-color")==="blue"),e=f.attr("data-content");f.attr("data-content","");f.uitk_tooltip("show");$(".theme-urgency .tooltip-inner").html(e);$(".hotel-saved-cta").after($(".user-history-tab").attr("nudge-data"));var g=$(".theme-urgency").addClass((d)?"isBlue":"").addClass((b.state.isTVLY)?"isTVLY":"").addClass((b.state.isWotif)?"isWotif":"").addClass((b.state.isLastMinute)?"isLastMinute":"").addClass((b.state.isOrbitz)?"isOrbitz":"").addClass((b.state.isCheapTickets)?"isCheapTickets":"").addClass((b.state.isHotwire)?"isHotwire":"").addClass((b.state.isAago)?"isAago":"").addClass((b.state.isEbookers)?"isEbookers":"").addClass((b.state.isMrJet)?"isMrJet":"");if(g.hasClass("top")){g.css({"top":"150px"}).removeClass("top").addClass("bottom");}if(i){g.find(".hotel-saved-default").show();}else{g.find(".hotel-saved-cta").show();}if(Scratchpad.state.isTVLY){g.find(".hotel-saved-default").show();g.find(".search-saved-default").hide();g.find(".flight-saved-default").hide();}return setTimeout(function(){$(".user-history-tab").uitk_tooltip("hide");},5000);});},bindHeaderButtons:function(){var b=this;$(".optional-save-buttons .btn-action").click(function(c){c.stopPropagation();window.location="/user/login?&ckoflag=0&amp;amp;hsuc=&amp;amp;fram=&uurl=qscr%3Dredr%26rurl%3D%2Fscratchpad";});$(".optional-save-buttons .sub-action").click(function(c){c.stopPropagation();Scratchpad.declineSignInToSave();b.updateUI();});$(".optional-notes-buttons .btn-action").click(function(c){c.stopPropagation();b.showNotesEnrollmentHeader();Scratchpad.sendeVar28("SP.Tray.CS.OptIn").enrollInNudge();});$(".optional-notes-buttons .sub-action").click(function(c){c.stopPropagation();Scratchpad.declineNudge();b.updateUI();});$(".optional-deals-buttons .btn-action").click(function(c){c.stopPropagation();b.showDealsEnrollmentHeader(true);Scratchpad.sendeVar28("PD.Tray.CS.OptIn").enrollInNudge();});$(".optional-news-buttons .btn-action").click(function(c){c.stopPropagation();Scratchpad.sendeVar28("SP.Tray.CS.News");if(!Scratchpad.page){window.location.href="/scratchpad";}});},updateTrayHeader:function(){var b=Scratchpad.state.userPrompts,c="default";this.state.greeting=false;this.hideGreeting();return this;},showGreeting:function(){if(this.state.currentCount!==0){this.becomeTwoColumn();}this.$elements.$greeting.show();$(".scratchpad-item.first").removeClass("first");return this;},hideGreeting:function(){$(".user-history-tab .menu").removeClass("two-column");if(this.state.currentCount>0){this.$elements.$greeting.hide();$(".scratchpad-item").first().addClass("first");}else{this.showEmptyListState();}return this;},resetGreeting:function(){$(".scratchpad-greeting .greeting-message").hide();$(".scratchpad-greeting .greeting-submessage").hide();$(".optional-notes-buttons").hide().removeClass("active");$(".optional-save-buttons").hide().removeClass("active");$(".optional-news-buttons").hide().removeClass("active");$(".optional-deals-buttons").hide().removeClass("active");$(".greeting-icon").hide();return this;},showSaveHeader:function(){var b=this,c=this.locStrings.defaultHeaderMessage;$(".optional-save-buttons").show().addClass("active");$(".scratchpad-greeting .greeting-message").text(c).show();return{pass:true,result:[c]};},showNotesHeader:function(){var c=this,b=Scratchpad.trayTestAndLearns.getNudgeEnrollmentHeaderStrings(),d=b.title,e=b.subtitle,f=b.buttonText;$(".optional-notes-buttons").show().addClass("active");$(".scratchpad-greeting .greeting-message").html(d).show();$(".scratchpad-greeting .greeting-submessage").text(e).show();$(".optional-notes-buttons .btn-action").text(f);return{pass:true,result:[d]};},showNewsHeader:function(){if(window.AlertsMenu){AlertsMenu.tests.liveNudgeAlertTest.run();}else{this._showLegacyNewsHeader();}},_showLegacyNewsHeader:function(){var c=this,b=Scratchpad.trayTestAndLearns.getNewsHeaderStrings(),d=b.title,e=b.subtitle,f=b.buttonText;$(".greeting-icon").show();$(".scratchpad-greeting .greeting-message").text(d).show();$(".scratchpad-greeting .greeting-submessage").text(e).show();
$(".optional-news-buttons .btn-action").text(f);$(".optional-news-buttons").show().addClass("active");},showDealsHeader:function(){var c=this,b=Scratchpad.trayTestAndLearns.getPrivateDealsHeaderStrings();$(".optional-deals-buttons").show().addClass("active");$(".optional-deals-buttons .sub-action").hide();$(".scratchpad-greeting .greeting-message").html(b.title).show();$(".scratchpad-greeting .greeting-submessage").text(b.subtitle).show();$(".optional-deals-buttons .btn-action").text(b.buttonText);return{pass:true,result:[b]};},showDefaultHeader:function(){var b=this.locStrings.thingsSavedHere;$(".scratchpad-greeting .greeting-message").text(b).show();return{pass:true,result:[b]};},showNotesEnrollmentHeader:function(){if(!this.state.greeting){this.showGreeting();}this.resetGreeting();$(".scratchpad-greeting .greeting-message").text(this.locStrings.notesConfirmation).show();},showDealsEnrollmentHeader:function(){$(".optional-deals-buttons").hide().removeClass("active");$(".scratchpad-greeting .greeting-message").text(Scratchpad.trayTestAndLearns.getPrivateDealsHeaderStrings().postActionState);if(Scratchpad.page){Scratchpad.page.setNotesToggle(true);}return{pass:true,result:[this.state.greeting]};},showEmptyListState:function(){var b=this,c=function(){$(".scratchpad-menu-wrapper .default-message").fadeIn();};this.hideLoadingState(c);return this;},showListState:function(){var b=this,c=function(){$(".scratchpad-menu-wrapper .item-list").fadeIn();};this.hideLoadingState(c);return this;},hideLoadingState:function(b){this.state.loading=false;$(".scratchpad-menu-wrapper .loading-wrapper").fadeOut("fast");$(".scratchpad-menu-wrapper .loader").removeClass("loading");$(".scratchpad-menu-wrapper .loading-message").fadeOut("fast",b);return this;},captureTemplates:function(){var c=this,d=true,b="success";if(!Scratchpad.state.legacyTemplates){Handlebars.registerHelper("viewership",function(e){var f=parseInt(e,10);if(f>1){return c.locStrings.others.replace("####",e);}else{if(f===1){return c.locStrings.other;}else{return"";}}});Handlebars.registerHelper("productDescription",function(e){var f=c.locStrings.included;if(e.length===2){f=f.replace("####",c.productNameMap[e[0]]).replace("####",c.productNameMap[e[1]]);}else{f="";}return f;});Handlebars.registerHelper("localizer",function(){var e="",f=[].splice.call(arguments,0,arguments.length-1),h=c.locStrings[f[0]],g=f.slice(1,f.length);if(h){e=c.localizer(h,g);}return e;});this.templates.hotelTemplate=Handlebars.templates["hotel-tray-item-template"];this.templates.hotelSearchTemplate=Handlebars.templates["hotel-search-tray-item-template"];this.templates.flightTemplate=Handlebars.templates["flight-tray-item-template"];this.templates.flightDetailTemplate=Handlebars.templates["flight-detail-tray-item-template"];this.templates.packageTemplate=Handlebars.templates["package-tray-item-template"];this.templates.carSearchTemplate=Handlebars.templates["car-search-tray-item-template"];this.templates.carDetailTemplate=Handlebars.templates["car-detail-tray-item-template"];this.templates.cruiseSearchTemplate=Handlebars.templates["cruise-search-tray-item-template"];this.templates.activitySearchTemplate=Handlebars.templates["activity-search-tray-item-template"];this.templates.activityDetailTemplate=Handlebars.templates["activity-detail-tray-item-template"];}else{this.templates.hotelTemplate=this.legacyHotelTemplate;this.templates.hotelSearchTemplate=this.legacyHotelSearchTemplate;this.templates.flightTemplate=this.legacyFlightTemplate;this.templates.flightDetailTemplate=this.legacyFlightDetailTemplate;this.templates.packageTemplate=this.legacyPackageTemplate;this.templates.carSearchTemplate=this.legacyCarSearchTemplate;this.templates.carDetailTemplate=this.legacyCarDetailTemplate;this.templates.cruiseSearchTemplate=this.legacyCruiseSearchTemplate;this.templates.activitySearchTemplate=this.legacyActivitySearchTemplate;this.templates.activityDetailTemplate=this.legacyActivityDetailTemplate;}if(!this.templates.hotelTemplate||!this.templates.flightTemplate||!this.templates.hotelSearchTemplate||!this.templates.packageTemplate||!this.templates.carSearchTemplate||!this.templates.carDetailTemplate||!this.templates.cruiseSearchTemplate||!this.templates.activitySearchTemplate||!this.templates.activityDetailTemplate){d=false;b="not all templates assigned";}return{pass:d,result:[b]};},handleUserHistoryCheck:function(b,j){var d=Math.min(5,b.userHistory.length),c=(Scratchpad.trayTestAndLearns.state.requestLateHistory&&b.userHistory.length===1),g=b.userHistory[0],h,f;if(c){g.trayIndex=1;this.prependTrayItem(g);}else{for(var e=0;e<d;e++){h=b.userHistory[e];h.trayIndex=e+1;this.appendTrayItem(h);}}this.updateUI();},handleRegionViewershipResponse:function(e){var d;for(var c=0;c<e.hotelProductActivityAtRegionLevelList.length;c++){d=e.hotelProductActivityAtRegionLevelList[c];for(var b=0;b<this.trayItems.length;b++){if(this.trayItems[b].get("searchRegionId")===d.regionId){this.trayItems[b].set("viewCount",d.viewCount,true);}else{continue;}}}},handleHotelViewershipResponse:function(e){var b=[],f;for(var d=0;d<e.HotelProductActivityList.length;d++){f=e.HotelProductActivityList[d];for(var c=0;c<this.trayItems.length;c++){if(parseInt(this.trayItems[c].get("hotelId"),10)===f.HotelId){f.ViewCount=this.numberWithCommas(f.ViewCount);if(this.trayItems[c].get("hotelId")==f.HotelId){this.trayItems[c].set("viewCount",f.ViewCount,true);b.push(f);}}else{continue;}}}return{pass:true,result:b};},prependTrayItem:function(d){var b=this.removeMatchingTrayItem(d);if(!b){this.state.currentCount++;if(this.trayItems.length>=5){this.trayItems.pop().removeFromTray();}}var c=new Scratchpad.TrayItem(d);this.trayItems.unshift(c);c.insertBefore($(".user-history-tab .scratchpad-item").first());},appendTrayItem:function(c){this.removeMatchingTrayItem(c);var b=new Scratchpad.TrayItem(c);this.trayItems.push(b);$(".item-list").append(b.$el);},removeMatchingTrayItem:function(d){var e=0,c=this.trayItems.length,f={},b={"AIR":((d.type==="DETAIL")?"flightDetail":"flight"),"HOTEL":((d.type==="DETAIL")?"hotel":"hotelSearch"),"PACKAGE":"packages","CAR":((d.type==="DETAIL")?"carDetail":"carSearch")}[d.product];if(c>=1){for(e;e<c;e++){f=this.trayItems[e];if(f.type===b&&(f.get("id")===d[b]["id"])){this.trayItems.splice(e,1);f.removeFromTray();return true;}}}return false;},chooseBrandingViewLinkText:function(){var c=window.scratchpadBrandingTest;var b="";switch(c){case 1:b=this.locStrings.viewScratchpad_1;break;case 2:b=this.locStrings.viewScratchpad_2;break;case 3:b=this.locStrings.viewScratchpad_3;break;default:b=this.locStrings.viewScratchpad;break;}if(!b){b=this.locStrings.viewScratchpad;}return b;},updateTrayFooter:function(){var c=[this.locStrings.viewAllItems.replace("####",this.state.currentCount),this.chooseBrandingViewLinkText()],b=(4-this.state.currentCount);$parent=this.$elements.$viewAllItem.parent().removeClass("pad-1 pad-2 pad-3 extra-padding");this.$elements.$viewAllItem.text(c[this.state.currentCount>5?0:1]);if(this.state.greeting&&b>0&&this.state.currentCount!==0){$parent.addClass("pad-"+b);}else{if(this.state.currentCount===0){this.$elements.$viewAllItem.parent().addClass("extra-padding");}}return{pass:true,result:[]};},legacyHotelTemplate:function(e){var b=Scratchpad.headerTray,d=parseInt(e.viewCount,10),f="";if(e.viewCount&&d===1){e.viewCount=b.locStrings.other;}else{if(e.viewCount&&d>1){e.viewCount=b.locStrings.others.replace("####",e.viewCount);}else{e.viewCount="";}}var c='<li class="scratchpad-item">'+'<a href="'+e.deepLinkUrl+'" class="item-link" data-onclick="">'+'<div class="item-data">'+'<span class="item-img-icon">'+'<img src="//images.trvl-media.com'+e.thumbnailUrl+'" alt="'+e.hotelName+'" class="image" aspectRatio="1-1">'+"</span>"+'<h4 class="item-title">'+e.hotelName+"</h4>"+'<p class="item-date">'+e.checkInDate+" - "+e.checkOutDate+"</p>"+'<p class="item-watches item-nested">'+e.viewCount+"</p>"+'<div class="item-price-urgency"><strong class="price">'+e.price+"</strong>"+'<p class="item-nested">'+e.lastSeenDate+"</p></div>"+"</div>"+"</a>"+"</li>";
return c;},legacyHotelSearchTemplate:function(d){var b=Scratchpad.headerTray,f="",e="";if(d.viewCount){f=b.localizer(b.locStrings.othersSearching,[d.viewCount]);}if(d.amount){e='<div class="item-price-urgency"><strong class="price">'+d.price+"</strong>"+'<p class="item-package-message">'+b.localizer(b.locStrings.hotelSearchAvgPerNight)+"</p>"+'<p class="item-nested">'+b.localizer(b.locStrings.asOfDate,[d.lastSeenDate])+"</p></div>";}var c='<li class="scratchpad-item">'+'<a href="'+d.deepLinkUrl+'" class="item-link" data-onclick="">'+'<div class="item-data">'+'<span class="item-img-icon"><span class="icon icon-hotelsalt"></span></span>'+'<h4 class="item-title">'+b.localizer(b.locStrings.hotels,[d.destination])+"</h4>"+'<p class="item-date">'+b.localizer(b.locStrings.fromToHyphen,[d.checkInDate,d.checkOutDate])+"</p>"+e+'<p class="item-watches item-nested">'+f+"&nbsp;</p>"+"</div>"+"</a>"+"</li>";return c;},legacyFlightTemplate:function(c){var b='<li class="scratchpad-item">'+'<a href="'+c.deepLinkUrl+'" class="item-link" data-onclick="">'+'<div class="item-data">'+'<span class="item-img-icon">'+'<span class="icon icon-flightsalt"></span>'+"</span>"+'<h4 class="item-title">'+c.airportToAirport+"</h4>"+'<p class="item-date">'+c.departureDate+c.returnDate+"</p>"+'<p class="item-info item-nested">'+c.routeType+"</p>"+'<div class="item-price-urgency"><strong class="price">'+c.price+"</strong>"+'<p class="item-nested">'+c.lastSeen+"</p></div>"+"</div>"+"</a>"+"</li>";return b;},legacyActivitySearchTemplate:function(c){var b='<li class="scratchpad-item">'+'<a href="'+c.deepLinkUrl+'" class="item-link" data-onclick="">'+'<div class="item-data">'+'<span class="item-img-icon">'+'<span class="icon icon-activitiesalt"></span>'+"</span>"+'<h4 class="item-title">'+c.destination+"</h4>"+'<p class="item-date">'+c.startDate+" - "+c.endDate+"</p>"+'<div class="item-price-urgency"><strong class="price">'+c.price+"</strong>"+'<p class="item-nested">'+c.lastSeen+"</p></div>"+"</div>"+"</a>"+"</li>";return b;},legacyActivityDetailTemplate:function(c){var b='<li class="scratchpad-item">'+'<a href="'+c.deepLinkUrl+'" class="item-link" data-onclick="">'+'<div class="item-data">'+'<span class="item-img-icon">'+'<img src="'+c.thumbnailUrl+'" alt="'+c.title+'" class="image" aspectRatio="1-1">'+"</span>"+'<h4 class="item-title">'+c.title+"</h4>"+'<p class="item-date">'+c.startDate+"-"+c.endDate+"</p>"+'<div class="item-price-urgency"><strong class="price">'+c.price+"</strong>"+'<p class="item-nested">'+c.lastSeen+"</p></div>"+"</div>"+"</a>"+"</li>";return b;},legacyCruiseSearchTemplate:function(h){var c=Scratchpad.headerTray;var b=c.localizer(c.locStrings.asOfDate,[h.lastSeenDate]);var f=c.locStrings.cruises;var e='<li class="scratchpad-item">'+'<a href="'+h.deepLink+'" class="item-link" data-onclick="">'+'<div class="item-data">'+'<span class="item-img-icon">'+'<span class="icon icon-cruisealt"></span>'+"</span>"+'<h4 class="item-title">'+f+"</h4>";var d='<p class="item-date">'+h.pickupDate+" - "+h.dropOffDate+"</p>"+'<p class="item-dummy item-nested"></p>'+'<div class="item-price-urgency"><strong class="price">'+h.price+"</strong><div>"+c.locStrings.daily+"</div>"+'<p class="item-nested">'+b+"</p></div>"+"</div>"+"</a>"+"</li>";var g=e+d;return g;},legacyCarSearchTemplate:function(h){var e=Scratchpad.headerTray;var d=e.localizer(e.locStrings.asOfDate,[h.lastSeenDate]);var f="";if(h.pickupRegionType=="AIRPORT"){f=e.localizer(e.locStrings.carsAt,[h.pickupLocation]);}else{f=e.localizer(e.locStrings.carsNear,[h.pickupLocation]);}var c='<li class="scratchpad-item">'+'<a href="'+h.deepLink+'" class="item-link" data-onclick="">'+'<div class="item-data">'+'<span class="item-img-icon">'+'<span class="icon icon-carsalt"></span>'+"</span>"+'<h4 class="item-title">'+f+"</h4>";var b='<p class="item-date">'+h.pickupDate+" - "+h.dropOffDate+"</p>"+'<p class="item-dummy item-nested"></p>'+'<div class="item-price-urgency"><strong class="price">'+h.price+"</strong><div>"+e.locStrings.daily+"</div>"+'<p class="item-nested">'+d+"</p></div>"+"</div>"+"</a>"+"</li>";var g=c+b;return g;},legacyCarDetailTemplate:function(h){var f=Scratchpad.headerTray;var e=f.localizer(f.locStrings.asOfDate,[h.lastSeenDate]);var c="";if(h.pricePeriod==="daily"){c=f.locStrings.daily;}else{if(h.pricePeriod==="weekly"){c=f.locStrings.weekly;}else{if(h.pricePeriod==="total"){c=f.locStrings.total;}}}var d='<li class="scratchpad-item">'+'<a href="'+h.deepLink+'" class="item-link" data-onclick="">'+'<div class="item-data">'+'<span class="item-img-icon">'+'<img src="//images.trvl-media.com/cars'+h.thumbnailUrl+'" alt="'+h.carName+'" class="image" aspectRatio="1-1">'+"</span>"+'<h4 class="item-title">'+h.carName+"</h4>";var b='<p class="item-date">'+h.pickupDate+" - "+h.dropOffDate+"</p>"+'<p class="item-dummy item-nested">'+h.pickupLocation+"</p>"+'<div class="item-price-urgency"><strong class="price">'+h.price+"</strong><div>"+c+"</div>"+'<p class="item-nested">'+e+"</p></div>"+"</div>"+"</a>"+"</li>";var g=d+b;return g;},legacyFlightDetailTemplate:function(g){var o=Scratchpad.headerTray,j="",p="",f=g.legs.length,h;for(h=0;h<f;h++){var n=g.legs[h],e="",m="//images.trvl-media.com/media/content/expus/graphics/static_content/fusion/v0.1b/images/airlines/s/",c="multiple_airlines_logo",k=o.locStrings.multipleAirlinesLogoAltText,b=o.locStrings.fromTo.replace("####",n.departureAirportCode).replace("####",n.arrivalAirportCode),l=o.locStrings.fromToHyphen.replace("####",n.departureTime).replace("####",n.arrivalTime),d="";if(h>0){d=" item-group-gap";}if(n.numberOfDays){e=' <span class="number-of-days">+'+n.numberOfDays+"</span>";}if(n.airlineImageFileName){c=n.airlineImageFileName;k=n.airlineName+o.locStrings.airlineLogoAltText;}m=m+c+"_sq.jpg";p=p+'<span class="item-img-icon'+d+'">'+'<img src="'+m+'" alt="'+k+'" class="image" aspectRatio="1-1">'+"</span>"+'<h4 class="item-title'+d+'">'+b+"</h4>"+'<p class="item-date">'+'<span class="departure-date">'+n.departureDate+"</span><!--"+'--><span class="time-range">'+l+"</span>"+e+"</p>";}j='<li class="scratchpad-item flight-detail">'+'<a href="'+g.deepLinkUrl+'" class="item-link" data-onclick="">'+'<div class="item-data">'+p+'<div class="item-price-urgency"><strong class="price">'+g.formattedPricePerPerson+"</strong>"+'<p class="item-nested">'+g.lastSeen+"</p></div>"+"</div>"+"</a>"+"</li>";return j;},legacyPackageTemplate:function(f){var c=Scratchpad.headerTray,b=c.locStrings.included,d=c.locStrings.packages.replace("####",f.packageDestination);if(f.products.length===2){b=b.replace("####",c.productNameMap[f.products[0]]).replace("####",c.productNameMap[f.products[1]]);}else{b="";}var e='<li class="scratchpad-item">'+'<a href="'+f.deepLinkUrl+'" class="item-link" data-onclick="">'+'<div class="item-data">'+'<span class="item-img-icon">'+'<span class="icon icon-packagesalt"></span>'+"</span>"+'<h4 class="item-title">'+d+"</h4>"+'<p class="item-date item-nested">'+f.departureDate+f.returnDate+"</p>"+'<p class="item-info item-nested">'+b+"</p>"+'<div class="item-price-urgency"><strong class="price">'+f.price+"</strong>"+'<p class="item-package-message">'+c.locStrings.perPerson+f.lastSeen+"</p></div>"+'<span class="item-img-icon">'+"</span>"+"</div>"+"</a>"+"</li>";return e;},numberWithCommas:function(b){var c=b.toString().split(".");c[0]=c[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");return c.join(".");},localizer:function(e,b){var c=e||"";if(b){for(var d=0;d<b.length;d++){c=c.replace("####",b[d]);}}return c;}};})(Scratchpad);var Scratchpad=Scratchpad||{};(function(a){a.trayTestAndLearns={state:{currentCount:0,isMobileHeader:false,requestLateHistory:false,doublewideTrayBucket:0,inCSMVPTest:false},buckets:{4077:-1,4939:-1,6051:-1},init:function(d,c){var b=this;this.buckets[4077]=parseInt(window.scratchpadBadgeFlareTLFlag,10);this.buckets[4939]=parseInt(window.scratchpad2ColTrayTestBucket,10);this.buckets[6051]=parseInt(window.scratchpadUseLiveAlertsAsNews,10);this.state.isMobileHeader=($(window).width()<960);
this.state.inCSMVPTest=(this.buckets[4939]>0);if(this.buckets[4077]===1){setTimeout(function(){b.badgeFlareTL();},2000);}},badgeFlareTL:function(){if(!this.state.currentCount>0||$("#scratchpad-badge").hasClass("visuallyhidden")){return;}var e=8,d=8,c=-4,b=-4;if(this.state.currentCount>9){e+=4;c=c+3;}$(".scratchpad-flare").css({"opacity":"1","margin-left":e+"px","margin-top":"8px"}).animate({"width":"30px","height":"30px","margin-left":(c-3)+"px","margin-top":"-7px","opacity":"0"},1000).delay(1).animate({"width":"0","height":"0","margin-left":e+"px","margin-top":"8px"}).delay(1).animate({"opacity":"1"});return{pass:true,result:[]};},searchTooltipTL:function(c){if(window.uitk){var l=Scratchpad.state.userIsNudgeEnrolled,m=$(".user-history-tab"),b=(!l&&m.attr("data-tt-color")==="blue")?"isBlue":"",n=(Scratchpad.state.isTVLY)?"isTVLY":"",g=(Scratchpad.state.isWotif)?"isWotif":"",i=(Scratchpad.state.isLastMinute)?"isLastMinute":"",o=(Scratchpad.state.isOrbitz)?"isOrbitz":"",h=(Scratchpad.state.isCheapTickets)?"isCheapTickets":"",f=(Scratchpad.state.isEbookers)?"isEbookers":"",d=(Scratchpad.state.isHotwire)?"isHotwire":"",k=(Scratchpad.state.isAago)?"isAago":"",e=(Scratchpad.state.isMrJet)?"isMrJet":"",j=(l)?".search-saved-default":".search-saved-cta";if(Scratchpad.state.isTVLY){j=".search-saved";}setTimeout(function(){if(Scratchpad.headerTray.state.alreadyShowedTT){return;}Scratchpad.headerTray.state.alreadyShowedTT=true;var p=$(".user-history-tab").attr("data-content");$(".user-history-tab").attr("data-content","");$(".user-history-tab").uitk_tooltip("show");var q=$(".theme-urgency");q.find(".tooltip-inner").html(p);$(".search-saved-cta").after($(".user-history-tab").attr("nudge-data"));var q=$(".theme-urgency");if(Scratchpad.state.isTVLY){q.find($(".hotel-saved").hide());q.find($(".flight-saved").hide());}if(Scratchpad.state.pageId==="car-search"){Scratchpad.sendeVar28("CARS.ScratchpadTooltip.Shown");}q.css({"opacity":0}).find(j).show().closest(".theme-urgency").addClass(n+" "+b+" "+g+" "+i+" "+h+" "+o+" "+f+" "+k+" "+e).animate({"opacity":"1"},200).delay(4500).animate({"opacity":"0"},200,function(){$(this).hide();});},2500);}return{pass:true,result:[]};},flightTooltipTL:function(c){if(window.uitk){var k=Scratchpad.state.userIsNudgeEnrolled,l=$(".user-history-tab"),b=(!k&&l.attr("data-tt-color")==="blue")?"isBlue":"",m=(Scratchpad.state.isTVLY)?"isTVLY":"",f=(Scratchpad.state.isWotif)?"isWotif":"",h=(Scratchpad.state.isLastMinute)?"isLastMinute":"",n=(Scratchpad.state.isOrbitz)?"isOrbitz":"",g=(Scratchpad.state.isCheapTickets)?"isCheapTickets":"",e=(Scratchpad.state.isEbookers)?"isEbookers":"",j=(Scratchpad.state.isAago)?"isAago":"",d=(Scratchpad.state.isMrJet)?"isMrJet":"",i=(k)?".flight-saved-default":".flight-saved-cta";if(Scratchpad.state.isTVLY){i=".flight-saved";}setTimeout(function(){if(Scratchpad.headerTray.state.alreadyShowedTT){return;}Scratchpad.headerTray.state.alreadyShowedTT=true;var o=$(".user-history-tab").attr("data-content");$(".user-history-tab").attr("data-content","");$(".user-history-tab").uitk_tooltip("show");var p=$(".theme-urgency");p.find(".tooltip-inner").html(o);if(Scratchpad.state.isTVLY){p.find($(".hotel-saved").hide());p.find($(".search-saved").hide());}p.css({"opacity":0}).find(i).show().closest(".theme-urgency").addClass(m+" "+b+" "+f+" "+h+" "+g+" "+n+" "+e+" "+d).animate({"opacity":"1"},200).delay(4500).animate({"opacity":"0"},200,function(){$(this).hide();});},2500);}return{pass:true,result:[]};},getNudgeEnrollmentHeaderStrings:function(){return{title:"Get price and availability changes for hotels you view.",subtitle:"Your Scratchpad can watch for updates 24/7.",buttonText:"Track Changes"};},getNewsHeaderStrings:function(){return{title:"Something's changed!",subtitle:"Your Scratchpad found an update for at least one hotel you viewed.",buttonText:"See What's Changed"};},getPrivateDealsHeaderStrings:function(){return{title:["Get price and availability changes for hotels you view.","Unlock private deals on hotels you view.","Never miss another deal!"][this.buckets[4939]],subtitle:["Your Scratchpad can watch for updates 24/7.","Your Scratchpad can watch for exclusive savings 24/7.","Track hotels you view for deals, price and availability updates."][this.buckets[4939]],buttonText:["Track Changes","Unlock Private Deals","Keep Me Updated"][this.buckets[4939]],postActionState:"Nice! Watch your inbox for deal alerts from your Scratchpad."};}};})(Scratchpad);
/*!  generated on 2018-05-14 06:44:52.640 PDT(-0700) in 8 ms  */

/*!  served in 2 ms  */
