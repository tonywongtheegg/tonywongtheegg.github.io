!function(c){if(typeof window.uitkTypeahead!=="undefined"){console.log("Typeahead is now included in the UITK so you no longer need to load it manually");return;}var b="uitk_tooltip";var d=function(e,k,f){this.$element=c(e);this.$label=this.$element.closest("label");this.ariaOwns=this.$element.attr("aria-owns")||"backwards";var g="uitk_ta_content",h='<div id="'+g+'" role="presentation"></div>',l=c("#"+g).length;if(l===0){c("body").append(h);}this.firstItemFlag=true;if(!f.rawHtml){if(uitk){this.template=uitk.getCompiledTemplate(k);}else{k=c(k).html();this.template=Handlebars.compile(k);}}else{this.template=Handlebars.compile(k);}this.opts=c.extend(true,{},d.defaultOptions,f);this.searchType=null;this.cache={};this.ignoreNext=false;this.isClickOn=false;this.bodyClick=false;this.$element.autocomplete="off";this.$element.on("focus",c.proxy(this.focus,this)).on("keydown",c.proxy(this.keyDown,this)).on("keyup",c.proxy(this.keyUp,this)).on("keypress",c.proxy(this.keyPress,this)).on("blur",c.proxy(this.blur,this));this.$ta=c('<div class="typeahead" role="presentation">');if(this.opts.tooltip){this.$element[b]({content:this.$ta,template:'<div class="uitk-tooltip" role="presentation"><div class="tooltip-inner" role="presentation"></div><span class="tooltip-arrow-border" role="presenation"></span><span class="tooltip-arrow" role="presentation"></span></div>'});}else{this.$ta.appendTo(document.body);if(!uitk.isTouchDevice){this.$ta.on("mousedown",c.proxy(this.clickOn,this)).on("mouseup",c.proxy(this.clickOff,this)).on("click",c.proxy(this.click,this)).on("mouseenter","a",c.proxy(this.mouseEnter,this));}else{this.$ta.on("click",function(m){m.preventDefault();});}}this.$element.data("typeahead",this);this.request("zzzzzz",true);};d.prototype={constructor:d,shouldBeOpen:false,startRequest:function(){var e=this.$element.val();if(e.length>=this.opts.minchar){if(!this.cache[e]){this.request(e);}else{this.render(e,this.cache[e]);}}else{this.close();}},request:function(h,g){if(typeof Adapter!=="undefined"){var f=[this.opts.serviceUrl,"/api/v4/typeahead/",encodeURIComponent(h),"?client=ResponsivePublishingWizard&callback=?"].join("");}else{var f=[this.opts.serviceUrl,"/hint/es/",this.opts.version,"/ac/",this.opts.locale,"/",encodeURIComponent(h),"?callback=?"].join("");}var e;if(g){e=c.noop;}else{e=c.proxy(this.callback,this);}if(typeof Adapter!=="undefined"){c.getJSON(f,{regiontype:this.opts.mask,ab:this.opts.abtest,lob:this.opts.lob,format:"jsonp",dest:this.opts.dest,rid:this.opts.regionid},e);}else{c.getJSON(f,{type:this.opts.mask,ab:this.opts.abtest,lob:this.opts.lob,format:"json",dest:this.opts.dest,maxresults:this.opts.maxresults,rid:this.opts.regionid},e);}},callback:function(f){if(typeof Adapter!=="undefined"){f=Adapter.adapt(f);}var e=f.sr?f.sr:f.r;var g=f.q;if(e&&this.shouldBeOpen){this.cache[g]=e;this.render(g,e);}else{this.cache[g]=[];this.close();}},render:function(p,h){if(h.length>0&&this.$element.val()==p){h.sort(function(r,q){return r.i-q.i;});var e=this.opts;var f={};c.each(h,function(r,q){var s=d.CATEGORIES[q.t];var t=s?s.name:"Other";if(typeof f[t]==="undefined"){f[t]=true;}});var n={};if(this.opts.lob=="HOTELS"){if(f["Region/City"]){n["Region/City"]=[];}if(f["Attractions"]){n["Attractions"]=[];}if(f["Airports"]){n["Airports"]=[];}if(f["Hotels"]){n["Hotels"]=[];}}else{if(this.opts.lob=="CARS"){if(f["Airports"]){n["Airports"]=[];}if(f["Region/City"]){n["Region/City"]=[];}if(f["Attractions"]){n["Attractions"]=[];}}}c.each(h,function(r,q){var s=d.CATEGORIES[q.t];var t=s?s.name:"Other";if(typeof n[t]==="undefined"){n[t]=[];}n[t].push(q);if(e.forceicon){q.icon=e.forceicon;}else{q.icon=s.icon;}if(typeof q.l!="undefined"){q.l=q.l.replace(/'/g,"&#39;");}else{q.l=q.f.replace(/'/g,"&#39;");}q.data=JSON.stringify(q);});var k={continueText:this.opts.continuetext,closeText:this.opts.closetext,results:h,resultsByCategory:n,ariaOwns:this.ariaOwns};var m=this.template(k);var l=this;this.$ta.html(m);if(this.$ta.is(":hidden")){this.$ta.show();}this.$label.addClass("focused");if(this.opts.tooltip){this.$element[b]("show");this.$element[b]("checkPos",true,true);this.$ta.on("mousedown",c.proxy(this.clickOn,this)).on("mouseup",c.proxy(this.clickOff,this)).on(uitk.clickEvent,c.proxy(this.click,this)).on("mouseenter","a",c.proxy(this.mouseEnter,this));if(window.navigator.msPointerEnabled&&!window.PointerEvent){c("body").on(uitk.clickEvent+" focusin."+b,function(q){if(q.type==="focusin"&&!uitk.utils.isFocusableElement(c(q.target))){return;}if(q.target===l.$element[0]){return;}l.close();});}}else{var o=parseInt(this.$element.css("height"),10);var g=this.$element.offset();this.$ta.css({top:g.top+o+"px",left:g.left+"px"});this.$ta.show();}uitk.utils.liveAnnounce(h.length+" results displayed for your search. Use the arrow keys to browse them.","assertive");}else{this.close();}},close:function(){this.$label.removeClass("focused");if(this.opts.tooltip){this.$element[b]("hide");}else{this.$ta.hide();this.$ta.html("");}if(this.bodyClick){this.$ta.unbind("mousedown",c.proxy(this.cancelEvent,this));c(document.body).unbind("mousedown",c.proxy(this.close,this));this.bodyClick=false;}},prev:function(){var e=this.$ta.find("a"),k=this.$ta.find(".highlight").removeClass("highlight"),f=e.index(k),g=e[f-1],h=c(g).attr("id");c(k).attr("aria-selected","false");if(g){c(g).addClass("highlight");c(g).attr("aria-selected","true");this.$element.attr("aria-activedescendant",h);}else{this.$element.removeAttr("aria-activedescendant");c('[aria-selected="true"]').attr("aria-selected","false");uitk.utils.liveAnnounce(this.$element.val(),"polite");}},next:function(){var e=this.$ta.find("a"),l=this.$ta.find(".highlight").removeClass("highlight"),g=e.index(l),h=e[g+1],f=c(h).attr("id"),k,m="";c(l).attr("aria-selected","false");if(c(e[g+1]).hasClass("close")){uitk.utils.liveAnnounce("close","assertive");}if(!c("html").hasClass("safari")){if(this.firstItemFlag===true){this.firstItemFlag=false;}else{if(typeof e[g]==="undefined"){k=c(".active-tooltip").find("a")[0];m=c(k).attr("data-value");uitk.utils.liveAnnounce(m,"polite");}}}if(h){c(h).addClass("highlight");c(h).attr("aria-selected","true");this.$element.attr("aria-activedescendant",f);}else{uitk.utils.liveAnnounce(this.$element.val(),"polite");}},removeHighlights:function(){this.$ta.find(".highlight").removeClass("highlight");},selectHighlighted:function(m,l){var k=this.$ta.find(".highlight"),n=k.text(),h,g,f=c("html");h=n.replace(/(^\s+|\s+$)/g,"");if(m&&k.length===0){k=c(m.target).closest(".results-item").find("a")||c(m.target).closest(".results-item-ally").find("a");}this.updateTextField(k);k.removeClass("highlight");if(l===true){g=k.text().replace(/(^\s+|\s+$)/g,"");if(this.$element.attr("locale")==="en_US"||f.attr("data-language")==="en_US"){uitk.utils.liveAnnounce("Close button is selected and the menu has closed","assertive");}else{uitk.utils.liveAnnounce(g,"assertive");}}else{if(f.hasClass("safari")){if(this.$element.attr("locale")==="en_US"||f.attr("data-language")==="en_US"){uitk.utils.liveAnnounce("You selected "+h+" and the menu has closed","assertive");}else{uitk.utils.liveAnnounce(h,"assertive");}}}},updateTextField:function(e){if(e){var f=e.attr("data-value");if(f){f=f.replace(/&#39;/g,"'");this.$element.val(f);if(this.opts.selectioncallback){if(typeof this.opts.selectioncallback=="function"){this.opts.selectioncallback(e);}else{if(typeof this.opts.selectioncallback=="string"){window[this.opts.selectioncallback](e);}}}}this.close();this.$element.focus();}},focus:function(e){},keyDown:function(e){var f;if(!e){e=window.event;}f=e.keyCode;switch(f){case 27:this.close();e.stopPropagation();break;case 9:case 13:if(this.$ta.find(".highlight").length){e.stopPropagation();if(f===13){e.preventDefault();}this.selectHighlighted(e,this.$ta.find(".highlight").hasClass("close"));}break;case 32:if(this.$ta.find(".highlight").hasClass("close")){e.stopPropagation();e.preventDefault();}break;case 39:if(this.$ta.find(".highlight").length){this.ignoreNext=true;e.stopPropagation();
this.selectHighlighted();}break;case 38:e.preventDefault();e.stopPropagation();this.prev();break;case 40:e.stopPropagation();e.preventDefault();this.next();break;}},keyPress:function(e){if(!e){e=window.event;}if(e.keyCode==13){this.close();}},keyUp:function(e){if(this.ignoreNext){this.ignoreNext=false;return;}if(!e){e=window.event;}switch(e.keyCode){case 27:break;case 37:this.removeHighlights();break;case 38:e.preventDefault();e.stopPropagation();break;case 40:e.stopPropagation();e.preventDefault();break;case 16:case 17:case 18:break;case 13:this.shouldBeOpen=false;break;case 32:if(this.$ta.find(".highlight").hasClass("close")){e.stopPropagation();e.preventDefault();this.selectHighlighted(e,this.$ta.find(".highlight").hasClass("close"));}break;default:this.shouldBeOpen=true;this.startRequest();break;}},blur:function(){if(window.navigator.msPointerEnabled&&!window.PointerEvent){return;}if(!this.isClickOn){this.close();}else{this.$ta.bind("mousedown",c.proxy(this.cancelEvent,this));c(document.body).bind("mousedown",c.proxy(this.close,this));this.bodyClick=true;}},clickOn:function(){this.isClickOn=true;},clickOff:function(){this.isClickOn=false;},click:function(f){f.stopPropagation();f.preventDefault();this.selectHighlighted(f);},mouseEnter:function(f){this.removeHighlights();c(f.currentTarget).addClass("highlight");},cancelEvent:function(e){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}if(e.preventDefault){e.preventDefault();}e.cancel=true;e.returnValue=false;},remove:function(){this.$element.autocomplete="on";this.$element.closest("form").attr("autocomplete","on");this.$element.off("focus",c.proxy(this.focus,this)).off("keydown",c.proxy(this.keyDown,this)).off("keyup",c.proxy(this.keyUp,this)).off("keypress",c.proxy(this.keyPress,this)).off("blur",c.proxy(this.blur,this));this.$ta.off("mousedown",c.proxy(this.mouseDown,this)).off("mouseup",c.proxy(this.mouseUp,this)).off("click",c.proxy(this.click,this)).off("mouseenter","a",c.proxy(this.mouseEnter,this)).remove();}};d.AIRPORT=1;d.CITY=2;d.MULTICITY=4;d.NEIGHBORHOOD=8;d.POI=16;d.ADDRESS=32;d.METROCODE=64;d.HOTEL=128;d.REGIONTYPE={"ALL":31,"AIRPORT":1,"CITIES":2};d.LOB={"HOTELS":"HOTELS","PACKAGES":"PACKAGES","FLIGHTS":"FLIGHTS"};d.CATEGORIES={"CITY":{"id":0,name:"Region/City",icon:"location"},"ATTRACTION":{"id":1,name:"Attractions",icon:"location"},"AIRPORT":{"id":2,name:"Airports",icon:"flights"},"HOTEL":{"id":3,name:"Hotels",icon:"hotels"},"ADDRESS":{"id":4,name:"Address",icon:"location"},"TRAINSTATION":{"id":5,name:"Train Station",icon:"train"},"METROSTATION":{"id":6,name:"Metro Station",icon:"train"}};Handlebars.registerHelper("each_with_key",function(l,f){var h,e="",g,k=f.hash.key;for(g in l){if(l.hasOwnProperty(g)){h=l[g];if(k){h[k]=g;}e+=f.fn(h);}}return e;});d.defaultOptions={minchar:3,maxitems:10,version:"v2",locale:"en_US",abtest:"",mask:(d.AIRPORT|d.CITY|d.MULTICITY|d.NEIGHBORHOOD|d.POI),lob:d.LOB.FLIGHTS,dest:false,closetext:"Close",continuetext:"Continue typing to refine search",selectioncallback:null,tooltip:true,forceicon:false,serviceUrl:"//suggest.expedia.com"};function a(e){if(e.data("typeahead")){return;}var f=e.data("template");if(f==undefined){return;}if(f.indexOf("/")>=0){c.ajax({url:f,success:function(h){var g=e.data();g.rawHtml=true;new d(e,h,g);},dataType:"text"});}else{new d(e,f,e.data());}}c(function(){c("body").on("focus.typeahead",'[data-provide="typeahead"]',function(){var e=c(this);a(e);});});window.uitkTypeahead=d;}(window.jQuery);if("undefined"==typeof(exp)){var exp={};}if("undefined"==typeof(exp.core)){exp.core={};}if("undefined"==typeof(exp.core.date)){exp.core.date={};}exp.core.date.Calendar=function(a){var b={config:a,rM:[31,28,31,30,31,30,31,31,30,31,30,31],getDayOfWeekFormat:function(){return"#ddd#, #MMM# #d#";},getDayOfWeekFormatRegex:function(){return/^(\S{3}), (\S{3}) (\d{1,2})$/;},getSingleMonths:function(){if(uitk.locale&&uitk.locale=="es_MX"){return["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"];}return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];},getDayNames:function(){if(uitk.locale&&uitk.locale=="es_MX"){return["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"];}else{if(uitk.locale&&uitk.locale=="fr_CA"){return["dim","lun","mar","mer","jeu","ven","sam"];}else{return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];}}},getMonthInDayOfWeek:function(c){var f=NaN;if(c instanceof Array&&c.length==4){var d=c[2];var e=this.getSingleMonths();if($.inArray(d,e)>=0){f=$.inArray(d,e);}}return f;},getDateInDayOfWeek:function(c){var d=NaN;if(c instanceof Array&&c.length==4){d=parseInt(c[3]);}return d;},getDateFormat:function(){return this.config.getDateFormat();},getDateSeparator:function(){return this.config.getDateSeparator();},getStartOfWeek:function(){return this.config.getStartOfWeek();},getShowDayOfWeek:function(){return this.config.getShowDayOfWeek();},getDateFromDayOfWeek:function(g){if(!this.getDayOfWeekFormatRegex().test(g)){return null;}var c=this.getDayOfWeekFormatRegex().exec(g);var k=this.getMonthInDayOfWeek(c);var d=this.getDateInDayOfWeek(c);var h=new Date().getFullYear();var e;for(var f=0;f<3;f++){e=new Date(h+f,k,d);if(!isNaN(e.getYear())&&this.toStringWithDayOfWeek(e)==g){return e;}}return null;},getDateFromString:function(o,c){if(!o||!o.length){return null;}o=$.trim(o);if(this.getShowDayOfWeek()){if(o.match(this.getDayOfWeekFormatRegex())){return this.getDateFromDayOfWeek(o);}}o=o.replace(/\s+/g,"");if(o.match(/[^-|\d|\.|\/]/)){return null;}var n=o.split(/-|\.|\//);for(var g=0;g<n.length;g++){n[g]=parseInt(n[g],10);}if(!n[1]){return null;}var f,k,l;var e=this.getDateFormat();if(e=="yymmdd"){if(!n[2]){return null;}f=n[1];k=n[2];l=n[0];}else{if(e=="mmddyy"){f=n[0];k=n[1];}else{f=n[1];k=n[0];}if(n[2]){l=n[2];}else{l=this.DefYr(f-1,k);}}var h=new Date().getFullYear();f-=1;if(l.toString().length<=2){l+=2000;}if(l<h&&!c){l=h;}if(l<1601||l>4500||f<0||f>11||k<1||k>this.getMonthCount(f,l)){return null;}return new Date(l,f,k,12);},toStringWithDayOfWeek:function(f){if(f&&!isNaN(f.getFullYear())){var c=this.getSingleMonths();var l=this.getDayNames();var h=f.getDate();var e=f.getDay();var g=f.getMonth();var k=this.getDayOfWeekFormat();k=k.replace("#ddd#",l[e]);k=k.replace("#MMM#",c[g]);k=k.replace("#d#",h);return k;}else{return"";}},toStringWithDayFromComp:function(e,c,f){return this.toStringWithDayFromDate(new Date(f,c-1,e));},toStringFromComp:function(k,c,l){if(this.getShowDayOfWeek()){return this.toStringWithDayFromComp(k,c,l);}function h(d){return d<10?"0"+d:d;}var f="";var g=this.getDateSeparator();var e=this.getDateFormat();k=h(k);c=h(c);if(e=="mmddyy"){f=c+g+k+g+l;}else{if(e=="ddmmyy"){f=k+g+c+g+l;}else{f=l+g+c+g+k;}}return f;},toStringWithDayFromDate:function(d){var c="";if(d==null){return c;}return this.toStringWithDayOfWeek(d);},toStringFromDate:function(f){var e="";var g=this.getDateSeparator();var d=this.getDateFormat();var h=f.getMonth()+1;var c=f.getDate();var k=f.getFullYear();if(d=="mmddyy"){e=h+g+c+g+k;}else{if(d=="ddmmyy"){e=c+g+h+g+k;}else{e=k+g+h+g+c;}}return e;},IsLY:function(c){if(0==c%4&&((c%100!=0)||(c%400==0))){return true;}else{return false;}},DefYr:function(c,g){var e=new Date();var f=(e.getYear()<1000)?1900+e.getYear():e.getYear();if(c<e.getMonth()||(c==e.getMonth()&&g<e.getDate())){f++;}return f;},getMonthCount:function(d,f){var e=this.rM[d];if((1==d)&&this.IsLY(f)){e++;}return e;},IsLastDayOfMonth:function(c){return this.getMonthCount(c.getMonth(),c.getFullYear())==c.getDate();},incrementMonth:function(c){if(c.getMonth()==11){c.setMonth(0);c.setFullYear(c.getFullYear()+1);}else{c.setMonth(c.getMonth()+1);}return c;},decrementMonth:function(c){if(c.getMonth()==0){c.setMonth(11);c.setFullYear(c.getFullYear()-1);}else{c.setMonth(c.getMonth()-1);}return c;}};return b;};exp.core.date.DateUpdater=function(d,b){var a;var c={config:b,calendar:d,register:function(g,w,u,h,x,l,f){u=u||0;var o=$(g);var r=this.calendar.getDateFromString(o[0].value,f);var m=$(w);var q=this.calendar.getDateFromString(m[0].value,f);
var n=this.calendar.getDateSeparator();var e=this.calendar.getDateFormat();var s=e.substring(0,2)+n+e.substring(2,4)+n+e.substring(4,6);var v=new Date();v.setHours(0,0,0,0);if(r&&r.valueOf()<v.valueOf()){o[0].value=s;}if(q&&q.valueOf()<v.valueOf()){m[0].value=s;}a=this;var k=function(){a.update("#"+g.id,"#"+w.id,u,h,l,f);};var t=function(){a.updateByNights(o[0],m[0],u,f);a.update(o[0],m[0],u,h,null,f);};$("body").on("blur","#"+g.id,k);$("body").on("focus","#"+g.id,k);$("body").on("blur","#"+w.id,k);$("body").on("focus","#"+w.id,k);var p=$("#"+g.id+"-stay-nights");if(p.length!=0){p.change(t);p.keypress(t);}},days_between:function(k,h){var l=1000*60*60*24;var g=k.getTime();var f=h.getTime();var e=Math.abs(g-f);return Math.round(e/l);},updateNumberOfNights:function(k,h){var g=document.getElementById("hot-sear-date-num-nights");if(this.config!=undefined&&g!=null){var e=this.config.getNightTextConfig();var f=this.days_between(h,k);if(f>1){g.innerHTML=f+" "+e[1];}else{g.innerHTML=e[0];}g.style.display="inline";}},updateDayName:function(l,f){var k=$("#"+l.id+"-day");if(this.config!=undefined&&k.length!=0){try{var e=f.getDay();if(e==undefined){k.html("");return;}var h=this.config.getDayNames();k.html(h[e]);}catch(g){k.html("");}}},updateByNights:function(f,g,l,k){var e=this.calendar.getDateFromString($(f).val(),k);var h=$("#"+f.id+"-stay-nights");if(e){e.setDate(e.getDate()+parseInt(h.get(0).value));$(g).val(this.calendar.toStringFromComp(e.getDate(),e.getMonth()+1,e.getFullYear()));}},update:function(h,p,m,n,s,f){var q=$(h);var o=$(p);var g=this.calendar.getDateFromString(q.val(),f);var e=this.calendar.getDateFromString(o.val(),f);var k=$("#"+h.id+"-stay-nights");m=q.attr("data-min-range-length")||0;if(!s||isNaN(parseInt(s))||e){s=0;}this.updateDayName(h,g);this.updateDayName(p,e);if(g&&e){this.updateNumberOfNights(g,e);}if(g){if(e&&k.length!=0){var t=Math.round((e-g)/1000/60/60/24);if(t<1){t=k.get(0).value;}k.get(0).value=t;}var r=Math.max(m,s);g=new Date(g.valueOf()+1000*3600*24*r);var l=this.calendar.toStringFromComp(g.getDate(),g.getMonth()+1,g.getFullYear());if(e&&e<=g){e=null;}if(null==e&&(o.attr("data-optional")!="true"||o.val()!="")){e=this.calendar.getDateFromString(q.val(),f);this.updateNumberOfNights(e,g);if(k.length!=0&&k.get(0).value!=1){g.setDate(g.getDate()+parseInt(k.get(0).value)-1);var l=this.calendar.toStringFromComp(g.getDate(),g.getMonth()+1,g.getFullYear());}if(l!=o.val()){if(this.calendar.getShowDayOfWeek()){l=this.calendar.toStringWithDayFromDate(g);}o.val(l);o.blur();}if(exp.core.date.datePicker){exp.core.date.datePicker.entries[o.attr("id")].currentValue=g;}this.updateDayName(p,g);}}if(q.is(".fieldDefaultText")){q.removeClass("fieldDefaultText");}if(o.is(".fieldDefaultText")){o.removeClass("fieldDefaultText");}uitk.updatePlaceholderClass(q);uitk.updatePlaceholderClass(o);}};return c;};exp.core.date.CalendarControl=function(){var a=function(){var p="mmddyy";var b="/";var k=0;var g=["January","February","March","April","May","June","July","August","September","October","November","December"];var u=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];var v="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic".split("._");var t=(function(){if(uitk.locale&&uitk.locale=="es_MX"){return["Domingo","Lunes","Martes","Mi\xE9rcoles","Jueves","Viernes","S\xE1bado"];}else{if(uitk.locale&&uitk.locale=="fr_CA"){return["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"];}else{return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];}}})();var l="dom._lun._mar._mi\xE9._jue._vie._s\xE1b".split("._");var f=["S","M","T","W","T","F","S"];var m="Close";var r="";var e=["night","nights"];var d=false;var h=function(z){d=z;};var y=function(z){e=z;};var x=function(z,A){p=z;b=A;};var o=function(A,z,C,B){k=A;g=z;f=C;if(B!=undefined){t=B;}};var c=function(z){t=z;};var s=function(A,z,B){k=A;u=z;f=B;};var q=function(z){u=z;};var w=function(z){m=z;};var n=function(z){r=z;};return{setFormatConfig:x,setUnitConfig:o,setDayNames:c,setSingleUnitConfig:s,setSingleMonth:q,setTextConfig:w,setLocaleConfig:n,setShowDayOfWeek:h,setNightTextConfig:y,getDateFormat:function(){return p;},getDateSeparator:function(){return b;},getStartOfWeek:function(){return k;},getMonths:function(){return g;},getSingleMonths:function(){return u;},getDayAbbrs:function(){return f;},getDayNames:function(){return t;},getCloseText:function(){return m;},getLocaleConfig:function(){return r;},getNightTextConfig:function(){return e;},getShowDayOfWeek:function(){return d;},getDayNamesEs:function(){return l;},getSingleMonthsEs:function(){return v;}};};return{Config:new a("ddmmyy",".",2)};}();uitk.publish("sf.date.ready");var corewizard=window["corewizard"]||{};corewizard.search=corewizard.search||{};corewizard.search.activitySearchUrl=function(c){var b;var d=c.startDatePrefilled||c.endDatePrefilled;b=new corewizard.search.SearchUrl("/things-to-do/search");b.beginQuery();var a=encodeURIComponent(c.destination);if(c.hotelId){a=encodeURIComponent(c.city);}b.addParameter("location",a,true);if(!d&&c.startDate&&c.endDate){b.addParameter("startDate",c.startDate,true);b.addParameter("endDate",c.endDate,true);}if(c.regionId&&c.regionId!=="0"){b.addParameter("rid",c.regionId);}if(c.TADestSearchType){b.addParameter("regionType",c.TADestSearchType);}if(c.latLong){b.addParameter("latLong",c.latLong);}else{if(c.geoLocationSelectedAndAvailable===true){console.log("Not successful to set Geolocation latLong to model");}}if(c.nextUrl&&c.nextUrl.categories){b.addParameter("categories",c.nextUrl.categories);}return b.toString();};var corewizard=window["corewizard"]||{};corewizard.search=corewizard.search||{};corewizard.search.carSearchUrl=function(b){var a=new corewizard.search.SearchUrl("/carsearch");function d(e){if(window.dctk&&dctk.onReady&&corewizard.masterconfig.abacus[""+e]!==undefined){dctk.onReady(function(){dctk.omtr.linkTrackVars="";dctk.addExperiments(e+"."+corewizard.masterconfig.abacus[""+e]);dctk.trackEvent({name:"Log Experiment",isUserBased:false});});dctk.logExperiment({"id":e});}}if(!$("html").hasClass("lt-ie9")){if(corewizard.masterconfig.abacus["9326"]==="1"||corewizard.masterconfig.abacus["10825"]==="1"){a=new corewizard.search.SearchUrl("/carsearch/app");}d(9326);d(10825);}a.beginQuery();a.addParameter("dagv",1,true);a.addParameter("subm",1,true);a.addParameter("fdrp",0,true);a.addParameter("styp",b.carSearchType,true,4);if(b.hotelId){a.addParameter("locn",encodeURIComponent(b.city),true);}else{var c=b.pickup?b.pickup:(b.car&&b.car.pickup?b.car.pickup:undefined);a.addParameter("locn",encodeURIComponent(c),true);}if(b.rfrr){a.addParameter("rfrr",b.rfrr);}if((corewizard.masterconfig.abacus["13696"]==="1"&&b.cartriptype=="oneway")||(corewizard.masterconfig.abacus["13696"]==="0")){a.addParameter("loc2",b.dropoff?encodeURIComponent(b.dropoff):"");}else{if(b.car&&b.car.dropoff){a.addParameter("loc2",encodeURIComponent(b.car.dropoff));}}a.addParameter("date1",b.startDate,true);a.addParameter("date2",b.endDate,true);a.addParameter("vend",b.carVendor,true);a.addParameter("kind",b.carType,true);a.addParameter("time1",b.startTime,true);a.addParameter("time2",b.endTime,true);if(b.carVendor){a.addParameter("rtcd",b.carRateCode);a.addParameter("cpcd",b.carCouponCode);a.addParameter("odcd",b.carOtherCode);a.addParameter("cdnu",b.carCorpCode);}a.addParameter("ttyp",2,true);a.addParameter("acop",2,true);a.addParameter("rdus",10,true);a.addParameter("rdct",1,true);a.addParameter("dpln",b.originRegionId);if((corewizard.masterconfig.abacus["13696"]==="1"&&b.cartriptype=="oneway")||(corewizard.masterconfig.abacus["13696"]==="0")){a.addParameter("drid1",b.destinationRegionId);}a.addParameter("olat",b.originLatitude);a.addParameter("olon",b.originLongitude);a.addParameter("dlat",b.destinationLatitude);a.addParameter("dlon",b.destinationLongitude);if(b.driversAge){a.addParameter("age",b.driversAge);}if(b.tab==="car"&&b.isCarDriverAgeWithinLimit===false&&corewizard.masterconfig.switches.enableSADriverAgeCars===true){a.addParameter("age",b.driverAge);
}a.addParameter("aarpcr",b.aarpCarRate);return a.toString();};var corewizard=window["corewizard"]||{};corewizard.search=corewizard.search||{};corewizard.search.cruiseSearchUrl=function(g){function h(n){var k="";if(n!="Invalid Date"){var l=n.getUTCDate(),o=n.getUTCMonth()+1,m=n.getUTCFullYear();k=m+"-"+o+"-"+l;}return k;}function e(n){var k="";if(n){var l=n.getDate(),o=n.getUTCMonth()+1,m=n.getUTCFullYear();k=m+"-"+o+"-"+l;}return k;}if(corewizard.masterconfig.abacus["13985"]==="1"||corewizard.masterconfig.abacus["13986"]==="1"){var f=new corewizard.search.SearchUrl("/Cruise-Search");f.beginQuery();f.addParameter("destination",g.destination);f.addParameter("departure-port",g.cruisePort);f.addParameter("cruise-line",g.cruiseLine);f.addParameter("adultCount",g.adults);f.addParameter("childCount",g.children);if(g.children>0){f.addParameter("childAges",g.ages);}if(corewizard.masterconfig.abacus["10120"]==="1"){f.addParameter("earliest-departure-date",h(new Date(g.startDate)));f.addParameter("latest-departure-date",h(new Date(g.endDate)));}else{if(g.cruiseMonth){f.addParameter("earliest-departure-date",h(new Date(g.cruiseMonth)));var c=new Date(g.cruiseMonth);var d=new Date(c.getUTCFullYear(),c.getUTCMonth()+1,0);f.addParameter("latest-departure-date",e(d));}}if(g.cruiseLength){if(g.cruiseLength.indexOf("|")>0){var b=g.cruiseLength.split("|");f.addParameter("min-length",b[0]);f.addParameter("max-length",b[1]);}else{f.addParameter("min-length",g.cruiseLength);}}}else{if(corewizard.masterconfig.abacus["9016"]==="1"){var f=new corewizard.search.SearchUrl("/Cruise-Search");f.beginQuery();f.addParameter("destination",g.destination);f.addParameter("departure-port",g.cruisePort);f.addParameter("cruise-line",g.cruiseLine);f.addParameter("adultCount",g.adults);f.addParameter("childCount",g.children);if(g.children>0){f.addParameter("childAges",g.ages);}if(corewizard.masterconfig.abacus["10120"]==="1"){f.addParameter("earliest-departure-date",h(new Date(g.startDate)));f.addParameter("latest-departure-date",h(new Date(g.endDate)));}else{if(g.cruiseMonth){f.addParameter("earliest-departure-date",g.cruiseMonth);var c=new Date(g.cruiseMonth);var d=new Date(c.getUTCFullYear(),c.getUTCMonth()+1,0);f.addParameter("latest-departure-date",e(d));}}if(g.cruiseLength){if(g.cruiseLength.indexOf("|")>0){var b=g.cruiseLength.split("|");f.addParameter("min-length",b[0]);f.addParameter("max-length",b[1]);}else{f.addParameter("min-length",g.cruiseLength);}}var a=corewizard.cruise.changedOption;if(a&&a.paraValue){f.addParameter(a.paraName,a.paraValue);}}else{var f=new corewizard.search.SearchUrl("/go");f.beginQuery();f.addParameter("ds",g.destination);if(g.cruiseMonth!="1/1/4501"){f.addParameter("fromdate",g.cruiseMonth);}f.addParameter("type","Cruise-Search");}}return f.toString();};var corewizard=window["corewizard"]||{};corewizard.search=corewizard.search||{};corewizard.search.eapAspSearchUrl=function(k,l){var b=new corewizard.search.SearchUrl("/legacyGOTO"),h,e,g,o;b.beginQuery();if(k.isPackage){b.addParameter("GOTO","PACKAGEWIZ");if(k.packageType==="FHC"){b.addParameter("PackageType","1");}else{if(k.packageType==="FH"||(k.packageType==="TH")){b.addParameter("PackageType","2");}else{if(k.packageType==="HC"){b.addParameter("PackageType","3");if(k.tab=="car"){b.addParameter("FromTime",convertUrlTime(k.startTime));b.addParameter("ToTime",convertUrlTime(k.endTime));}else{b.addParameter("FromTime","630");b.addParameter("ToTime","630");}}else{if(k.packageType==="FC"){b.addParameter("PackageType","5");}}}}}if(l==="flight"){b.addParameter("GOTO","EXPFLTWIZ");switch(k.flighttype){case"multi":b.addParameter("TripType","Multicity");b.addParameter("FrAirport1",encodeURIComponent(k.origin));b.addParameter("ToAirport1",encodeURIComponent(k.destination));b.addParameter("Date1",k.startDate);b.addParameter("Time1",k.startTime);for(var h=0;h<k.multidest.length;h++){b.addParameter("FrAirport"+(h+2),encodeURIComponent(k.multidest[h].origin));b.addParameter("ToAirport"+(h+2),encodeURIComponent(k.multidest[h].destination));b.addParameter("Date"+(h+2),k.multidest[h].departing);b.addParameter("Time"+(h+2),k.multidest[h]["time"+(h+2)]);}break;case"roundtrip":case"oneway":(k.flighttype==="roundtrip")?b.addParameter("TripType","roundtrip"):b.addParameter("TripType","oneway");b.addParameter("ToAirport",k.destinationTLA);b.addParameter("FromDate",k.startDate);b.addParameter("ToDate",k.endDate);b.addParameter("FrAirport",k.originTLA);break;}b.addParameter("NumAdult",k.adults);b.addParameter("NumSenior",k.numSeniors);b.addParameter("NumChild",k.children);b.addParameter("InfantInSeat",k.lapSeat==="lap"?0:1);b.addParameter("NoChangePen",k.noPenalty?1:0);b.addParameter("Direct",k.nonStop?1:0);b.addParameter("Airline",k.carrier);b.addParameter("Class",k.cabinClassLegacy);for(var h=0;h<k.ages.length;h++){b.addParameter("Age"+(h+1),k.ages[h]);}return b.toString();}if(l==="hotel"){b.addParameter("GOTO","HOTSEARCH");b.addParameter("CityName",encodeURIComponent(k.destination));b.addParameter("InDate",k.startDate);b.addParameter("OutDate",k.endDate);b.addParameter("Class",k.star);b.addParameter("ChainName",encodeURIComponent(k.hotelName));b.addParameter("LodgingType",k.lodging);b.addParameter("NumRoom",k.rooms.length);var m=[];var d=[];for(var h=0;h<k.rooms.length;h++){var a=k.rooms[h];b.addParameter("NumAdult"+(h+1===1?"":(h+1)),a.adults);m[h]=(a&&a.adults?a.adults:2);var f=(a&&a.children?a.children.length:0);for(var g=0;g<f;g++){b.addParameter((h+1===1?"":"Rm"+(h+1))+"Child"+(g+1)+"Age",""+a.children[g]);}}return b.toString();}if(l==="car"){return corewizard.search.carSearchUrl(k);}if(!(k.isPackage&&k.hotelId)){b.addParameter("DestName",encodeURIComponent(k.destination),true,"");}if(k.hotelId){b.addParameter("DestID",k.multiCityRegion+":"+k.destinationTLA);}else{b.addParameter("DestID",k.destID);}if(k.packageType=="HC"){if(k.isPartialStay){b.addParameter("FromDate",k.checkin);b.addParameter("ToDate",k.checkout);}else{b.addParameter("FromDate",k.startDate);b.addParameter("ToDate",k.endDate);}}else{if(k.originTLA){b.addParameter("FrAirport",k.originTLA,true,"");}else{b.addParameter("FrAirport",encodeURIComponent(k.origin),true,"");}b.addParameter("FromDate",k.startDate);if(k.packageType==="TH"){b.addParameter("FromTime",k.train.departTime);}b.addParameter("ToDate",k.endDate);if(k.packageType==="TH"){b.addParameter("ToTime",k.train.returnTime);}if(k.isPartialStay){b.addParameter("FlexFromDate",k.checkin);b.addParameter("FlexToDate",k.checkout);}}if(k.rooms){b.addParameter("NumRoom",k.roomCount);for(h=0;h<k.rooms.length;h++){e=h+1;var m=(k.rooms[h]&&k.rooms[h].adults&&(k.rooms[h].adults>=0))?k.rooms[h].adults:2;var d=(k.rooms[h]&&k.rooms[h].childCount?k.rooms[h].childCount:"0");b.addParameter("NumAdult"+e,m,true,"2");b.addParameter("NumChild"+e,d,true,"0");for(g=0;g<d;g++){o=g+1;b.addParameter("Rm"+e+"Child"+o+"Age",k.rooms[h].children[g],true,"0");}}}b.addParameter("NumSenior",k.numSeniors);b.addParameter("InfantInSeat",k.isChildInLap?"0":"1");if(k.packageType==="TH"){b.addParameter("TransportationSearchType","TRAIN");}b.addParameter("needUTF8Decode","true");var n=k.cabinClass;if(k.packageType==="FH"&&l==="flightHotel"){if(n){if(n.length>1){var c={first:"F",business:"B",premium:"P"};n=c[n]||"E";}b.addParameter("cabinClass",n);}if(k.carrier){b.addParameter("carrier",k.carrier);}}b.addParameter("Direct",k.isDirectFlight?"1":"0");if($.inArray(l,["flightHotelCar","flightCar","hotelCar"])>-1&&corewizard.masterconfig.switches.enablePKGDriverAgeCars===true&&k.isCarDriverAgeWithinLimit===false){b.addParameter("DriverAge",k.driverAge);}return b.toString();};function convertUrlTime(f){var b,e,a;var d=f;if(d.length==3||d.length==5){d="0"+d;}switch(d.length){case 4:b=parseInt(d.substring(0,2),10);e=parseInt(d.substring(2,4),10);break;case 6:b=parseInt(d.substring(0,2),10);e=parseInt(d.substring(2,4),10);a=d.substring(4,6).toUpperCase();if(a!="AM"&&a!="PM"){return"630";}break;default:return"630";}if(b===NaN||e===NaN){return"630";}if(b==12&&a=="AM"){b=0;
}if(b!=12&&a=="PM"){b+=12;}if(b<0||b>23||e<0||e>59){return"630";}var c=new Date(0);c.setHours(b);c.setMinutes(e);return(c.getHours()*60)+c.getMinutes();}var corewizard=window["corewizard"]||{};corewizard.search=corewizard.search||{};corewizard.search.flightSearchUrl=function(e){function c(n){var m=new corewizard.search.SearchUrl("",",",":");m.addParameter("from",encodeURIComponent(n.origin),true);m.addParameter("to",encodeURIComponent(n.destination),true);m.addParameter("departure",n.start+"TANYT",true);return m.toString();}function b(m){var n=new corewizard.search.SearchUrl("",",",":");n.addParameter("children",g(m.ages),true,0);n.addParameter("adults",m.adults,true,0);n.addParameter("seniors","0",true,0);n.addParameter("infantinlap",(m.isChildInLap?"Y":"N"),true,"Y");return n.toString();}function g(n){if(n&&n.length){var o="";o+=n.length+"[";for(var m=0;m<n.length;m++){if(corewizard.masterconfig.abacus["5939"]=="1"){o+=(n[m]&&n[m].age)||n[m].toString()||"9";}else{o+=n[m].age||n[m];}if(m!==n.length-1){o+=";";}}o+="]";return o;}}var a=new corewizard.search.SearchUrl("/Flights-Search");a.beginQuery();a.addParameter("trip",e.flighttype,true,"roundtrip");a.addParameter("leg1",c({origin:e.originTLA||e.origin,destination:e.destinationTLA||e.destination,start:e.startDate}),true);if(e.isRoundtrip){a.addParameter("leg2",c({origin:e.destinationTLA||e.destination,destination:e.originTLA||e.origin,start:e.endDate}),true);}else{if(e.isMultiDest){if(!window.isMobileFlag){for(var d=0;d<4;d++){var k;var h=corewizard.core.model.get("multiDestDefault");var l=Object.keys(h.destination);if(!e.multiDestDefault.destination[l[d]]){break;}k={origin:e.multiDestDefault.origin[l[d]],destination:e.multiDestDefault.destination[l[d]],start:e.multiDestDefault.startDate[l[d]]};a.addParameter("leg"+(d+2),c(k),true);}}else{for(var d=0;d<4;d++){var k;if(!e.multiDest.destination[d]){break;}k={origin:e.multiDest.origin[d],destination:e.multiDest.destination[d],start:e.multiDest.startDate[d]};a.addParameter("leg"+(d+2),c(k),true);}}}}a.addParameter("passengers",b(e),true,0);f(e,a);if(e.isFlexibleDate&&(e.isRoundtrip||e.isOneWay)){a.addParameter("dates","flex");}a.addParameter("mode","search");return a.toString();function f(n,m){var o=new corewizard.search.SearchUrl("",",",":");o.addParameter("cabinclass",n.cabinClass,false);if(n.nonStop){o.addParameter("maxhops","0",true);}if(n.noPenalty){o.addParameter("nopenalty","Y",true);}o.addParameter("carrier",n.carrier,false);m.addParameter("options",encodeURIComponent(o.toString()),false);}};var corewizard=window["corewizard"]||{};corewizard.search=corewizard.search||{};corewizard.search.hotelInfoSiteUrl=function(e){var d=new corewizard.search.SearchUrl("/h"+e.hotelId+".Hotel-Information");d.beginQuery();if(!e.isDateless){d.addParameter("chkin",e.startDate,true);d.addParameter("chkout",e.endDate,true);}for(var f=0;f<e.rooms.length;f++){var h=e.rooms[f];var a=[];a.push("a"+(h&&h.adults?h.adults:2));var b=(h&&h.children?h.children.length:0);for(var c=0;c<b;c++){a.push("c"+h.children[c]);}var g=f+1;d.addParameter("rm"+g,a.join(":"));}return d.toString();};var corewizard=window["corewizard"]||{};corewizard.search=corewizard.search||{};corewizard.masterconfig=corewizard.masterconfig||{};corewizard.masterconfig.abacus=corewizard.masterconfig.abacus||{};window.Typeahead=window.Typeahead||{};corewizard.search.hotelSearchUrl=function(m){function e(y){function u(C){C=C.toLowerCase();for(var B=0;B<C.length;B++){var A=C.charCodeAt(B);if(A<97||A>122){return C.charAt(B);}}return null;}try{var s=corewizard.core.model.config.get("dateFormat")||"";s=s.toLowerCase();var q=s.indexOf("y");var z=u(s);var r=new Date();var x=parseInt(r.getFullYear()/1000);var v;if(q===0&&y.charAt(2)===z){v=parseInt(y.substring(0,2));if(!isNaN(v)){var t=(x*1000)+v;y=t.toString()+y.substring(2);}}else{if(q>0&&y.charAt(y.length-3)===z){v=parseInt(y.substring(y.length-2));if(!isNaN(v)){var t=(x*1000)+v;y=y.substring(0,y.length-2)+t.toString();}}}}catch(w){console.log("Error trying to fix date: "+y);}return y;}if(corewizard.searchExperiments&&typeof corewizard.searchExperiments.getVariant==="function"&&corewizard.searchExperiments.getVariant("HIGH_LEVEL_REGION")===2&&m.regionId&&m.TASearchType=="MULTIREGION"){var p="/d"+m.regionId+".Travel-Guide-Hotels";var a=new corewizard.search.SearchUrl(p);return a.toString();}if(m.isHotelOnly&&m.isNinePlusRoomRequest){var n=m.ninePlusRoomUrl||"https://www.hotelplanner.com/Common/Services/Expedia/?";var g=corewizard.masterconfig.taapCoreWizardConfig&&typeof corewizard.masterconfig.taapCoreWizardConfig.isTaapHomePage==="function"&&corewizard.masterconfig.taapCoreWizardConfig.isTaapHomePage();if(g){if(window.site_id==68||window.site_id==71){n="https://taap.hotelplanner.com/GroupForm.cfm?";}if(window.site_id==75){n="http://zh.taap.hotelplanner.com/GroupForm.cfm?";}n+="Brand=TAAP&kw=taap_rooms_option";}else{n+="ESite="+(window.siteId||1);}n+="&Loc="+(window.locale||"en_US");n+="&City="+encodeURIComponent(m.destination);var l="M/dd/yyyy";if(m.startDate&&uitk.utils.createLocalizedDate){var c=uitk.utils.createLocalizedDate(m.startDate,window.locale);if(c.date=="Invalid Date"){c=uitk.utils.createLocalizedDate(e(m.startDate),window.locale);}if(c&&c.settings&&c.settings.date&&c.settings.date.format&&(c.date!="Invalid Date")){var d=c.settings.date.format["short"];c.settings.date.format["short"]=l;n+="&InDate="+c.shortDate();c.settings.date.format["short"]=d;}}if(m.endDate&&uitk.utils.createLocalizedDate){var f=uitk.utils.createLocalizedDate(m.endDate,window.locale);if(f.date=="Invalid Date"){f=uitk.utils.createLocalizedDate(e(m.startDate),window.locale);}if(f&&f.settings&&f.settings.date&&f.settings.date.format&&(f.date!="Invalid Date")){d=f.settings.date.format["short"];f.settings.date.format["short"]=l;n+="&OutDate="+f.shortDate();f.settings.date.format["short"]=d;}}return n;}var b=new corewizard.search.SearchUrl("/Hotel-Search"),k=m.sort,o=m.hotelAmenityId||"",h=m.destinationRelInfo==="hotelfilter"&&o.indexOf("AM")>=0;o=o.replace("AM","");b.beginQuery();if(m.latLong&&m.latLong.indexOf("undefined")<0&&m.trainOrMetroStationDestination){b.addParameter("destination",m.trainOrMetroStationDestination,true);}else{if(m.hotelId){b.addParameter("destination",encodeURIComponent(m.city),true);}else{b.addParameter("destination",m.destination?encodeURIComponent(m.destination):"");}}if(!m.isDateless){b.addParameter("startDate",m.startDate,true);b.addParameter("endDate",m.endDate,true);}b.addParameter("group",m.group);if(!m.excludeGaiaId){b.addParameter("regionId",m.regionId&&m.regionId!=="0"?m.regionId:"",true);}if(m.latLong){b.addParameter("latLong",m.latLong,true);}if(m.TASearchType=="GEOLOCATION"){b.addParameter("sort","distance");}corewizard.search.hotelSearchUrl.addAdultsAndChildrenParams(m,b);if(m.hotelId){b.addParameter("selected",m.hotelId);}if(m.membersOnly){b.addParameter("mctc",m.membersOnly);}if(m.packageRates){b.addParameter("packageRates",m.packageRates);}handleMERSignup(m,b);if(h){b.addParameter("amenities",o);}if(m.destinationSourceInfo&&m.destinationSourceInfo.sourceName==="TREX"){b.addParameter("HEDS","true");}return b.toString();};corewizard.search.hotelSearchUrl.addAdultsAndChildrenParams=function(e,d){var c=[];var g=[];for(var f=0;f<e.rooms.length;f++){var h=e.rooms[f];c[f]=(h&&h.adults?h.adults:2);var a=(h&&h.children?h.children.length:0);for(var b=0;b<a;b++){g.push((f+1)+"_"+h.children[b]);}}d.addParameter("adults",c.join(","));d.addParameter("children",g.join(","));};function handlePOIIdsAndGaiaIds(b,a){if(b.excludeGaiaId&&b.latLong){a.addParameter("latLong",b.latLong,true);}else{handleGaiaIds(b,a);}}function handleGaiaIds(b,a){var c=parseInt(b.regionId);if(c<=4294967295){a.addParameter("regionId",b.regionId,true);}else{if(b.latLong){a.addParameter("latLong",b.latLong,true);}}}function handleMERSignup(b,a){if(!b.membersOnly&&b.merSignupSuccess){a.addParameter("mctc",2);a.addParameter("rfrr","Home.SrchWzd.MER.SignUp");}}var corewizard=window["corewizard"]||{};
corewizard.search=corewizard.search||{};corewizard.search.packageInfoSiteUrl=function(d){var c=new corewizard.search.SearchUrl("/h"+d.hotelId+".Hotel-Information");c.beginQuery();c.addParameter("packageType",2);c.addParameter("origin",encodeURIComponent(d.origin),true);c.addParameter("destination",d.destinationTLA,true);c.addParameter("fromDate",encodeURIComponent(d.startDate),true);c.addParameter("toDate",encodeURIComponent(d.endDate),true);var g=d.rooms.length;c.addParameter("numberOfRooms",g>3?3:g,true);for(var e=1;e<=g&&e<=3;e++){var f=d.rooms[e-1];c.addParameter("adultsPerRoom["+e+"]",(f&&f.adults?f.adults:2));var a=(f&&f.children?f.children.length:0);c.addParameter("childrenPerRoom["+e+"]",a);for(var b=1;b<=a;b++){c.addParameter("childAges["+e+"]["+b+"]",f.children[b-1]);}}return c.toString();};var packageSearchUrl=function(k,m){var c=k.get("checkout")||k.get("returning");var l=function(r,u,t){var s=corewizard.date.addDaysToDate(r,t);var q=corewizard.date.compareWithoutTime(s,u);return q===null||q!==1;};if(c&&corewizard.date.isValidDate(c)&&!l(k.get("departing"),c,1)){c=corewizard.date.toString(corewizard.date.addDaysToDate(c,1));}if(k.get("hotelId")){return packageInfoSiteUrl(k);}var n,b;var o=k.get("regionName")||encodeURIComponent(k.get("destination"));var d=1;var p=1;b=new corewizard.search.SearchUrl("/packagesearch");b.beginQuery();b.addParameter("subm",1,true);b.addParameter("dsct","",true);b.addParameter("dlvl","",true);b.addParameter("rtmn","",true);b.addParameter("rtmx","",true);b.addParameter("dnam",o,true);b.addParameter("dcty",k.get("originTLA")||encodeURIComponent(k.get("origin")),true);b.addParameter("ddpt1",k.get("departing")||k.get("checkin"),true);b.addParameter("drtn1",k.get("returning")||k.get("checkout"),true);b.addParameter("tdpt1",p,true);b.addParameter("trtn1",d,true);if(k.get("isPartialStay")){b.addParameter("flxd1",1);b.addParameter("idte1",k.get("checkin")||k.get("departing"));b.addParameter("odte1",c);}b.addParameter("ffst","0",true);var e=k.get("rooms").length;b.addParameter("crom",e>3?3:e,1);for(var h=0;h<e&&h<3;h++){var a=k.get("rooms")[h];b.addParameter("cadu"+(h+1),(a&&a.adults?a.adults:2),true);b.addParameter("cSei"+(h+1),"0",true);var g=(a&&a.children?a.children.length:0);b.addParameter("ckdr"+(h+1),g);for(var f=0;f<g;f++){b.addParameter("age"+(h+1)+(f+1),a.children[f],true,"0");}}if(k.get("lapSeat")=="seat"){b.addParameter("infs",1);}b.addParameter("cmbt",2,true);b.addParameter("qryt",8,true);b.addParameter("rdct",1,true);b.addParameter("tair1",k.get("destinationTLA"));b.addParameter("drid1",k.get("regionId"));b.addParameter("hids",k.get("hotelId"));return b.toString();};var corewizard=window["corewizard"]||{};corewizard.search=corewizard.search||{};corewizard.search.SearchUrl=function(b,c,a){this.baseURL=b||"";this.div=c||"&";this.equ=a||"=";};corewizard.search.SearchUrl.prototype=[];corewizard.search.SearchUrl.prototype.addParameter=function(b,d,e,c){if(d){this.push(b+this.equ+d);}else{if(e){var a="";if(c||c===0){a=c;}this.push(b+this.equ+a);}}};corewizard.search.SearchUrl.prototype.toString=function(){var a=this.baseURL+this.join(this.div);return a.replace("?"+this.div,"?").replace(this.div+"#"+this.div,"#");};corewizard.search.SearchUrl.prototype.beginQuery=function(){this.push("?");};corewizard.search.SearchUrl.prototype.beginHash=function(){this.push("#");};var corewizard=window["corewizard"]||{};corewizard.search=corewizard.search||{};corewizard.search.getSearchUrl=function(b,c,a){c=c||corewizard.core.getLob();if(b.isMobileDevice&&!b.isMultiDest&&!b.isHashlessURLneeded){return corewizard.search.eapAspSearchUrl(b,c);}else{return corewizard.search[a||corewizard.core.config.get("searchUrlGenerator")](b,c);}};var urlHandler=function(){var p="#inpFlightRouteType",h="inpDepartureLocations0",k="inpArrivalLocations0",v="inpDepartureLocations",z="inpArrivalLocations",A="inpDepartureLocationCodes",u="inpArrivalLocationCodes",c="#inpDepartDate",l="#inpDepartureTimes",o="inpDepartDate",g="inpDepartureTimes",w="#inpReturnDate",q="#inpArrivalTime0",m="#inpAdult",a="#inpSenior",n="#inpChildren1",y="inpChildAgesDetail",s="#radInfantOnLap",r="#radInfantOnSeat",f="#inpRefundableFlightsOnly",e="#inpFlightAirlinePreference",t="#inpFlightClass",b="#inpIsNonstopOnly",d="";var x=[{"id":"1","value":"T00:00"},{"id":"60","value":"T01:00"},{"id":"120","value":"T02:00"},{"id":"180","value":"T03:00"},{"id":"240","value":"T04:00"},{"id":"300","value":"T05:00"},{"id":"360","value":"T06:00"},{"id":"420","value":"T07:00"},{"id":"480","value":"T08:00"},{"id":"540","value":"T09:00"},{"id":"600","value":"T10:00"},{"id":"660","value":"T11:00"},{"id":"720","value":"T12:00"},{"id":"780","value":"T13:00"},{"id":"840","value":"T14:00"},{"id":"900","value":"T15:00"},{"id":"960","value":"T16:00"},{"id":"1020","value":"T17:00"},{"id":"1080","value":"T18:00"},{"id":"1140","value":"T19:00"},{"id":"1200","value":"T20:00"},{"id":"1260","value":"T21:00"},{"id":"1320","value":"T22:00"},{"id":"1380","value":"T23:00"},{"id":"362","value":"TANYT"},{"id":"361","value":"TMORN"},{"id":"721","value":"TNOON"},{"id":"1081","value":"TEVEN"},{"id":"12AM","value":"T00:00"},{"id":"1AM","value":"T01:00"},{"id":"2AM","value":"T02:00"},{"id":"3AM","value":"T03:00"},{"id":"4AM","value":"T04:00"},{"id":"5AM","value":"T05:00"},{"id":"6AM","value":"T06:00"},{"id":"7AM","value":"T07:00"},{"id":"8AM","value":"T08:00"},{"id":"9AM","value":"T09:00"},{"id":"10AM","value":"T10:00"},{"id":"11AM","value":"T11:00"},{"id":"12PM","value":"T12:00"},{"id":"1PM","value":"T13:00"},{"id":"2PM","value":"T14:00"},{"id":"3PM","value":"T15:00"},{"id":"4PM","value":"T16:00"},{"id":"5PM","value":"T17:00"},{"id":"6PM","value":"T18:00"},{"id":"7PM","value":"T19:00"},{"id":"8PM","value":"T20:00"},{"id":"9PM","value":"T21:00"},{"id":"10PM","value":"T22:00"},{"id":"11PM","value":"T23:00"}];return{setInputFileldNames:function(B){p=B.inpFlightRouteTypeId;h=B.inpFirstDepartureLocationId;k=B.inpFirstArrivalLocationId;v=B.inpDepartureLocationId;z=B.inpArrivalLocationId;A=B.inpDepartureLocationCode;u=B.inpArrivalLocationCode;c=B.inpFirstFlightDepartureDateId;l=B.inpFirstFlightDepartureTimeId;o=B.inpDepartureDateId;g=B.inpDepartureTimeId;w=B.inpReturnDateId;q=B.inpArrivalTimeId;m=B.inpAdultId;a=B.inpSeniorId;n=B.inpChildrenId;y=B.inpAgesId;s=B.radInfantOnLapId;r=B.radInfantOnSeatId;f=B.inpRefoundableId;e=B.inpFlightAirlinePreferenceId;t=B.inpFlightClassId;b=B.inpIsNonstopOnlyId;d=B.inpRouteType;},getTLAIndex:function(F){var E="";if((typeof F)=="undefined"){return 0;}var B=((typeof F)!="undefined")?F.indexOf("("):"";if((F!=="")&&(F.length>3)&&(B>0)){E=F.substr(B+1,3);var C=true;for(var D=0;D<3;D++){if(!((E.charAt(D)>="a"&&E.charAt(D)<="z")||(E.charAt(D)>="A"&&E.charAt(D)<="Z"))){C=false;break;}}if(!C){B=urlHandler.getTLAIndex(F.replace("(","C"));}}return B;},parseAirportCode:function(D,C){var B=this.getTLAIndex(D);if(B>0){D=D.substr(B+1,3);}else{if(C&&C==true){return"";}}return D;},bindFlightRouteType:function(){var B=jQuery(p).attr("value");inputCreator.addNewInput("addedFlightRouteType","inpFlightRouteType",B);},bindLocationsAndDates:function(){var D=0,G,F=0,B=0,C=0,E=this.getValidLocationNumber();jQuery("#"+h+", input[id^='"+v+"']:visible").each(function(){if((D<E)){G="";if(jQuery("input[name^='"+A+"']")[D]!=undefined){G=jQuery("input[name^='"+A+"']")[D].value;inputCreator.addNewInput("addedDepartureLocationCode"+D,"inpDepartureLocationCodes",G);}if(G==undefined||G==""){G=urlHandler.parseAirportCode(jQuery(this).attr("value"),false);}inputCreator.addNewInput("addedDepartureLocation"+D,"inpDepartureLocations",G);}D++;});jQuery("#"+k+", input[id^='"+z+"']:visible").each(function(){if((F<E)){G="";if(jQuery("input[name^='"+u+"']")[F]!=undefined){G=jQuery("input[name^='"+u+"']")[F].value;inputCreator.addNewInput("addedArrivalLocationCode"+F,"inpArrivalLocationCodes",G);}if(G==undefined||G==""){G=urlHandler.parseAirportCode(jQuery(this).attr("value"),false);}inputCreator.addNewInput("addedArrivalLocation"+F,"inpArrivalLocations",G);
}F++;});jQuery(c+", input[id^='"+o+"']").each(function(){if(B<E){inputCreator.addNewInput("addedDepartureDate"+B,"inpDepartureDates",jQuery(this).attr("value"));}B++;});jQuery(l+", select[id^='"+g+"']").each(function(){if(C<E){inputCreator.addNewInput("addedDepartureTime"+C,"inpDepartureTimes",jQuery(this).attr("value"));}C++;});if(jQuery(p).attr("value")=="2"||d==="roundtrip"){inputCreator.addNewInput("addedReturnDate","inpArrivalDates",jQuery(w).attr("value"));if(jQuery(q).attr("value")!=undefined){inputCreator.addNewInput("addedArrivalTime","inpArrivalTimes",jQuery(q).attr("value"));}}},bindTravelers:function(D){inputCreator.addNewInput("addedAdultCounts","inpAdultCounts",jQuery(m).attr("value"));inputCreator.addNewInput("addedSeniorCounts","inpSeniorCounts",jQuery(a).attr("value"));inputCreator.addNewInput("adddedChildrenCounts","inpChildCounts",jQuery(n).attr("value"));var B=jQuery(n).attr("value");var C=0;jQuery("select[id^='"+y+"']").each(function(){if(C<B){inputCreator.addNewInput("addedChildAges"+C,"inpChildAges",jQuery(this).attr("value"));}C++;});if(D&&D==true){if(jQuery("[id="+r+"][value=1]").is(":checked")){inputCreator.addNewInput("addedRadInfantOnSeat","inpInfants","1");}else{if(jQuery("[id="+s+"][value=2]").is(":checked")){inputCreator.addNewInput("addedRadInfantOnLap","inpInfants","2");}}}else{if(jQuery(s).is(":checked")){inputCreator.addNewInput("addedRadInfantOnLap","inpInfants","2");}else{if(jQuery(r).is(":checked")){inputCreator.addNewInput("addedRadInfantOnSeat","inpInfants","1");}}}},bindAdditions:function(){inputCreator.addNewInput("addedFlightAirlinePreference","inpFlightAirlinePreference",jQuery(e).attr("value"));inputCreator.addNewInput("addedFlightClass","inpFlightClass",jQuery(t).attr("value"));if(jQuery(b).is(":checked")){inputCreator.addNewInput("addedIsNonstopOnly","inpIsNonstopOnly",jQuery(b).attr("value"));}if(jQuery(f).is(":checked")){inputCreator.addNewInput("addedRefundableFlightsOnly","inpRefundableFlightsOnly",jQuery(f).attr("value"));}if(jQuery("#omnitureReferralId").length>0){var B=jQuery("#omnitureReferralId").attr("value").replace(/\|/g,",");inputCreator.addNewInput("addedOmnitureReferralId","inpOmnitureReferralId",B);}inputCreator.addNewInput("addedAction","action",this.getAction());},getValidLocationNumber:function(){var C,B;C=jQuery("#"+h+", input[id^='"+v+"']:visible");arrLocations=jQuery("#"+k+", input[id^='"+z+"']:visible");var E=C.length;for(var D=E-1;D>=0;D--){if(C[D].value!=""||arrLocations[D].value!=""){return D+1;}}return 0;},getAction:function(){if(jQuery(p).attr("value")==="3"||d==="multi"){jQuery("#flightSearchForm").attr("action","/Flight-SearchResults");return"FlightSearchResults@searchFlights";}else{jQuery("#flightSearchForm").attr("action","/Flight-Search-All");return"FlightSearchAll@searchFlights";}},reduceLocationLength:function(){var M="",J="",P="",Y="",D=new Array(),S=new Array(),W=new Array(),O=new Array();jQuery("#flightSearchForm input").each(function(){M=M+jQuery(this).attr("name")+"="+jQuery(this).attr("value")+"&";});jQuery("#flightSearchForm input[name^='inpDepartureLocations']").each(function(){J=J+jQuery(this).attr("name")+"="+jQuery(this).attr("value")+"&";D.push(jQuery(this).attr("name")+"="+jQuery(this).attr("value")+"&");W.push(jQuery(this).attr("id"));});jQuery("#flightSearchForm input[name^='inpArrivalLocations']").each(function(){P=P+jQuery(this).attr("name")+"="+jQuery(this).attr("value")+"&";S.push(jQuery(this).attr("name")+"="+jQuery(this).attr("value")+"&");O.push(jQuery(this).attr("id"));});var Q=escape(M),X=J+P;if(Q.length>1900){var U=this.getValidLocationNumber();var aa=U*2;var V=(M.length-X.length);var B=(1900-V)/aa;var G=new Array(),R="",C,I;for(i=0;i<U;i++){C=D[i];I=S[i];C=escape(C);I=escape(I);if(C.length>B){G.push(W[i]);}if(I.length>B){G.push(O[i]);}}var K=G.length;var Z=(Q.length-(1900-V))/K;var E,N,H,F,L;for(var T=0;T<=K;T++){E=G[T];L=jQuery("#"+E).attr("value");H=escape(L);H=H.substring(0,(H.length-Z));H=H.substr(0,H.lastIndexOf("%"));L=unescape(H);jQuery("#"+E).attr("value",L);}}},convertTimeStr:function(C){var B="TANYT";jQuery.each(x,function(D,E){if(E["id"]==C){B=E["value"];}});return B;},buildLegInfo:function(D,E,G,B,H,C){var F="from:"+D+",frCode:"+E+",to:"+G+",toCode:"+B+",departure:"+H+this.convertTimeStr(C);return F;},buildPassengerInfo:function(){var B=jQuery(n).attr("value");var D="children:"+B;if(parseInt(B)>0){D=D+"[";for(var E=0;E<parseInt(B);E++){if(E>0){D=D+";";}var C=jQuery("#addedChildAges"+E).attr("value");D=D+C;}D=D+"]";}var F="Y";if((jQuery("#addedRadInfantOnSeat").attr("value")==="1")){F="N";}D=D+",adults:"+jQuery(m).attr("value")+",seniors:"+jQuery(a).attr("value")+",infantinlap:"+F;return D;},buildAdditionInfo:function(){var C="economy";switch(jQuery(".flightOnly "+t).val()){case"1":C="first";break;case"2":C="business";break;case"5":C="premium";break;case"3":C="economy";break;default:C="economy";break;}var B="cabinclass:"+C;if(jQuery(b).is(":checked")){B=B+",maxhops:0";}var D="N";if(jQuery(f).is(":checked")){var D="Y";}B=B+",nopenalty:"+D+",sortby:price";var E=jQuery(e).val();if(E!=""){B=B+",carrier:"+E;}return B;},getLegs:function(){var B=new Array();var H=this.getValidLocationNumber();var D,G,C,F,I,E=0;for(D=0;D<H;D++){C=jQuery("#addedDepartureLocation"+D).attr("value");F=jQuery("#addedArrivalLocation"+D).attr("value");frAirportCode=jQuery("#addedDepartureLocationCode"+D).attr("value");toAirportCode=jQuery("#addedArrivalLocationCode"+D).attr("value");G=this.buildLegInfo(C,frAirportCode,F,toAirportCode,jQuery("#addedDepartureDate"+D).attr("value"),jQuery("#addedDepartureTime"+D).attr("value"));B.push(G);}if(d==="roundtrip"){G=this.buildLegInfo(F,toAirportCode,C,frAirportCode,jQuery("#addedReturnDate").attr("value"),jQuery("#addedArrivalTime").attr("value"));B.push(G);}return B;},createDeeplinkFormatURL:function(C,B,F,E){jQuery("#flightSearchForm").empty();inputCreator.addNewInput("routeType","trip",C);for(var G=0;G<B.length;G++){var D=G+1;inputCreator.addNewInput("leg"+D,"leg"+D,B[G]);}inputCreator.addNewInput("passengers","passengers",F);inputCreator.addNewInput("options","options",E);inputCreator.addNewInput("mode","mode","search");},handleFlightSearchForm:function(B){this.deepLink(B);},setInputIds:function(){if(this.isFrontPage()){f="#uw_fc_refund_flights_input";a="#inpSenior1";m="#inpAdult1";}else{f="#inpRefundableFlightsOnly";a="#inpSenior";m="#inpAdult";}},isFrontPage:function(){if(jQuery("#pageId").attr("value")==="page.secondary-flights"){return true;}return false;},deepLink:function(E){this.bindFlightRouteType();this.bindLocationsAndDates();this.bindTravelers(E);this.bindAdditions();this.reduceLocationLength();if(E&&E==true){var B=this.getLegs();var D=this.buildPassengerInfo();var C=this.buildAdditionInfo();this.createDeeplinkFormatURL(d,B,D,C);}},handleFlightSearchFormInternalSearch:function(B){this.setInputIds();this.deepLink(B);}};}();var inputCreator=function(){return{addNewInput:function(b,c,a){var d="#"+b;if(jQuery(d).attr("id")===undefined){jQuery("#flightSearchForm").append('<input type="hidden" id="'+b+'" value="'+a+'" name="'+c+'">');}else{jQuery(d).attr({"value":a,"name":c});}}};}();var tlaSelector=function(){return{getTLA:function(a,c){if(c){var b=c&&c.selectedItem;if(b){return c.selectedItem.tla;}}else{return jQuery("#"+a).attr("value");}},selectedTypeAhead:function(a,c,b){jQuery("#"+c).attr("value",this.getTLA(a,b));}};}();if(!window["g_publishingWizardJSLoaded"]){g_publishingWizardJSLoaded=true;var expNamespace=function(){var c=arguments,a=null,b;for(i=0;i<c.length;i=i+1){b=c[i].split(".");a=window;for(j=0;j<b.length;j=j+1){a[b[j]]=a[b[j]]||{};a=a[b[j]];}}return a;};expNamespace("publishing.util");expNamespace("publishing.wizard");expNamespace("publishing.wizard.lobforms");expNamespace("publishing.wizard.common.flight");publishing.wizard.setUpAddRoomLinks=function(a){var c=(typeof a.field("numRooms")!="undefined")?a.field("numRooms"):a.field("numRoom");function b(){var f=c[0];var e=a.find(".addRoomLink");var d=a.find(".removeRoomLink");
if(typeof f!="undefined"){if(f.selectedIndex==f.length-1){e.hide();d.show();}else{if(f.selectedIndex===0){d.hide();e.show();}else{e.show();d.show();}}}}a.find(".addRoomLink").click(function(){var d=c[0];if(typeof d!="undefined"&&d.selectedIndex!=d.length-1){d.selectedIndex++;c.change();b();}});a.find(".removeRoomLink").click(function(){var d=c[0];if(typeof d!="undefined"&&d.selectedIndex!==0){d.selectedIndex--;c.change();b();}});b();$("#widgetcatalogWizard").bind("formSwitched",b);};publishing.wizard.setupPackageRadioButtons=function(a){if(typeof g_selectedPackage!=="undefined"){g_radioButonsSetUp=true;a.find("input:radio[name=packageLob]").click(function(b){a.find("input:radio[value="+g_selectedPackage+"]").is(":checked");g_selectedPackage=$(this).val();publishSwitchForm(g_selectedPackage,true);});}};publishing.wizard.disableTabletKeyboard=function(){if(typeof Modernizr!=="undefined"){var b=Modernizr.touch,a=Modernizr.win8touch;if(b||a){$('[data-control="datepicker"]').attr("readonly","readonly");}}};publishing.wizard.setUpPackageCheckboxes=function(a,c,b){if(a){a.click(function(){publishing.wizard.addPackageToHotel(b,a,this);});}if(c){c.click(function(){publishing.wizard.addPackageToFlight(b,c,this);});}if(b){b.click(function(){if($(".current-lob a").attr("data-lob")=="flightOnly"){publishing.wizard.addPackageToFlight(b,c,this);}else{if($(".current-lob a").attr("data-lob")=="hotelOnly"){publishing.wizard.addPackageToHotel(b,a,this);}}});}};publishing.wizard.addPackageToHotel=function(c,a,b){if(c&&c.is(":checked")&&a&&a.is(":checked")){publishSwitchForm("flightHotelAndCar",true);b.checked=!b.checked;}else{if(a&&a.is(":checked")){publishSwitchForm("flightAndHotel",true);b.checked=!b.checked;}else{if(c&&c.is(":checked")){publishSwitchForm("hotelAndCar",true);b.checked=!b.checked;}else{publishSwitchForm("hotelOnly",true);b.checked=!b.checked;}}}};publishing.wizard.addPackageToFlight=function(b,c,a){if(b&&b.is(":checked")&&c&&c.is(":checked")){publishSwitchForm("flightHotelAndCar",true);a.checked=!a.checked;}else{if(c&&c.is(":checked")){publishSwitchForm("flightAndHotel",true);a.checked=!a.checked;}else{if(b&&b.is(":checked")){publishSwitchForm("flightAndCar",true);a.checked=!a.checked;}else{publishSwitchForm("flightOnly",true);a.checked=!a.checked;}}}};publishing.wizard.formatDateForGroupForm9PlusRoomsService=function(b){var a=publishing.util.parseDate(b);if(a===null){return"";}return publishing.util.formattedDate("MM/DD/YYYY",0,a);};publishing.wizard.currentlySelectedField=null;publishing.wizard.SelectAll=function(a){if(publishing.wizard.currentlySelectedField!=a){document.getElementById(a).focus();document.getElementById(a).select();publishing.wizard.currentlySelectedField=a;$("#"+a).blur(function(){if(publishing.wizard.currentlySelectedField==a){publishing.wizard.currentlySelectedField=null;}});}};publishing.wizard.packageLobData={};publishing.wizard.addPackageLobFields=function(f,e){var b=e.find("[dataField='destination']").val();var a=publishing.wizard.LSDATA;var c=publishing.wizard.packageLobData;if(a&&(a.destination==b||a.regionName==b)){if(!c.MultiCity){c.MultiCity=a.regionID;}if(!c.TLA){var d=a.destination.match(/\(([A-Z][A-Z][A-Z])\s?\-?/);if(d&&d.length>1){c.TLA=d[1];}}}if(!$("input[name='DestID']").length&&(f=="flightAndHotel"||f=="hotelAndCar"||f=="flightHotelAndCar")&&c.TLA&&c.MultiCity){e.append($('<input type="hidden" />').attr("name","DestID").attr("value",c.MultiCity+":"+c.TLA));}if(!$("input[name='HotelIDs']").length&&(f=="hotelOnly"||f=="flightAndHotel"||f=="hotelAndCar"||f=="flightHotelAndCar")&&c.HotelId){e.append($('<input type="hidden" />').attr("name","HotelIDs").attr("value",c.HotelId));}if(!$("input[name='CityId']").length&&(f=="hotelOnly"||f=="flightAndHotel")&&c.regionId){e.append($('<input type="hidden" />').attr("name","CityId").attr("value",c.regionId));}};publishing.wizard.turnOnInterstitial=function(b,a){b.width(b.outerWidth());b.parent().parent().addClass("interstitial");b.html(a.searchingText+'<img src="/static/fusion/v2.3/images/ajax-loader.gif" style="vertical-align:-4px;margin-left:6px;" height="16" width="16">');b.attr("disabled","disabled");};publishing.wizard.turnOffInterstitial=function(b,a){b.width("auto");b.parent().parent().removeClass("interstitial");b.html(a.normalButtonText);b.removeAttr("disabled");};publishing.WIZARD_CONTAINER_ID="#widgetcatalogWizard";publishing.DATE_SEPERATOR_REGEX=/[\- \/.]/;publishing.UNDEFINED_CHILD_AGE="-1";publishing.wizard.canonicFields={};publishing.wizard.canonicFieldValues={};publishing.wizard.setSearchButtonToInterstitial=function(d,c){var b=$(d.target).find("button");var e=$(d.target).find(".xp-b-leftSubmit2");var a=$(d.target).find(".xp-b-rightSubmit2");b.css("background-position","left -145px");e.css("background-position","left -87px");a.css("background-position","left -116px");b.html('<span style="color:#4c3900">'+c.searchingText+'<img src="/static/fusion/v2.3/images/ajax-loader.gif" style="vertical-align:-4px;margin-left:6px;" height="16" width="16"></span>');};publishing.wizard.hasBrowserVersionBeenChecked=false;publishing.wizard.isChrome23OrAbove=false;publishing.wizard.checkForChrome23OrAbove=function(){if(!this.hasBrowserVersionBeenChecked){publishing.wizard.isChrome23OrAbove=false;publishing.wizard.hasBrowserVersionBeenChecked=true;if(/Chrom(e|ium|eframe)\/([0-9]+)\./i.test(navigator.userAgent)){var a=new Number(RegExp.$2);if(a>=23){publishing.wizard.isChrome23OrAbove=true;}}}return publishing.wizard.isChrome23OrAbove;};publishing.wizard.handleMouseDown=function(h){if(typeof(PopUnder)!="undefined"){var g=$(h).attr("class");var d=g_calendar.getDateFromString($(h).find('[name="InDate"]').val());var a=g_calendar.getDateFromString($(h).find('[name="OutDate"]').val());var b="";var e="";if((typeof(d)!="undefined")&&(typeof(a)!="undefined")&&null!=d&&null!=a){var f=d.getMonth();b=d.getFullYear()+((f<9)?("-0"+(f+1)):("-"+(f+1)));var m=d.getDate();b+=(m<10)?("-0"+m):("-"+m);var k=a.getMonth();e=a.getFullYear()+((k<9)?("-0"+(k+1)):("-"+(k+1)));var c=a.getDate();e+=(c<10)?("-0"+c):("-"+c);}var l="";if(typeof($(h).find('[name="CityId"]'))!="undefined"){l=$(h).find('[name="CityId"]').val();}PopUnder.handleMouseDownForChrome23(g,this.siteId,l,$(h).find('[name="PlaceName"]').val(),b,e);}};publishing.wizard.initPopUnderIfLoaded=function(b){if(typeof(PopUnder)!="undefined"){var g=$(b.target).attr("class");var c=g_calendar.getDateFromString(b.target.InDate.value);var f=g_calendar.getDateFromString(b.target.OutDate.value);var e="";var d="";if((typeof(c)!="undefined")&&(typeof(f)!="undefined")&&null!=c&&null!=f){if(c.getMonth()<9){e=c.getFullYear()+"-0"+(c.getMonth()+1);}else{e=c.getFullYear()+"-"+(c.getMonth()+1);}if(c.getDate()<10){e=e+"-0"+c.getDate();}else{e=e+"-"+c.getDate();}if(f.getMonth()<9){d=f.getFullYear()+"-0"+(f.getMonth()+1);}else{d=f.getFullYear()+"-"+(f.getMonth()+1);}if(f.getDate()<10){d=d+"-0"+f.getDate();}else{d=d+"-"+f.getDate();}}var a="";if(typeof(b.target.CityId)!="undefined"){a=b.target.CityId.value;}PopUnder.initialize(g,this.siteId,a,b.target.PlaceName.value,e,d);}};publishing.util.formatDateForSearchQuery=function(b,a){var e=(a.indexOf("-")!=-1)?"-":((a.indexOf("/")!=-1)?"/":""),d=a=="yyyy-mm-dd",f=a=="dd/mm/yyyy";if(b==="0000-00-00"){return b;}else{if(publishing.DATE_PATTERN.match(/d\/M\/yyyy/)!=null){var c=b.split("/");if(d){b=c[2]+e+c[1]+e+c[0];}else{if(f){b=c[0]+e+c[1]+e+c[2];}}}else{if(publishing.DATE_PATTERN.match(/dd\/MM\/yyyy/)!=null){var c=b.split("/");if(d){b=c[2]+e+c[1]+e+c[0];}else{if(f){b=c[0]+e+c[1]+e+c[2];}}}else{if(publishing.DATE_PATTERN.match(/MM\/dd\/yyyy/)!=null||publishing.DATE_PATTERN.match(/M\/d\/yyyy/)!=null){var c=b.split("/");if(d){b=c[2]+e+c[0]+e+c[1];}else{if(f){b=c[1]+e+c[0]+e+c[2];}}}else{if(publishing.DATE_PATTERN.match(/yyyy\/MM\/dd/)!=null||publishing.DATE_PATTERN.match(/yyyy\/M\/d/)!=null){var c=b.split("/");if(d){b=c[0]+e+c[1]+e+c[2];}else{if(f){b=c[2]+e+c[1]+e+c[0];}}}else{if(publishing.DATE_PATTERN.match(/d\.M\.yyyy/)!=null){var c=b.split(".");
if(d){b=c[2]+e+c[1]+e+c[0];}else{if(f){b=c[0]+e+c[1]+e+c[2];}}}else{if(publishing.DATE_PATTERN.match(/dd\.MM\.yyyy/)!=null||publishing.DATE_PATTERN.match(/d\.M\.yyyy/)!=null){var c=b.split(".");if(d){b=c[2]+e+c[1]+e+c[0];}else{if(f){b=c[0]+e+c[1]+e+c[2];}}}else{if(publishing.DATE_PATTERN.match(/MM\.dd\.yyyy/)!=null||publishing.DATE_PATTERN.match(/M\.d\.yyyy/)!=null){var c=b.split(".");if(d){b=c[2]+e+c[0]+e+c[1];}else{if(f){b=c[1]+e+c[0]+e+c[2];}}}else{if(publishing.DATE_PATTERN.match(/yyyy\.MM\.dd/)!=null||publishing.DATE_PATTERN.match(/yyyy\.M\.d/)!=null){var c=b.split(".");if(d){b=c[0]+e+c[1]+e+c[2];}else{if(f){b=c[2]+e+c[1]+e+c[0];}}}else{if(publishing.DATE_PATTERN.match(/d\-M\-yyyy/)!=null){var c=b.split("-");if(d){b=c[2]+e+c[1]+e+c[0];}else{if(f){b=c[0]+e+c[1]+e+c[2];}}}else{if(publishing.DATE_PATTERN.match(/dd\-MM\-yyyy/)!=null||publishing.DATE_PATTERN.match(/d\-M\-yyyy/)!=null){var c=b.split("-");if(d){b=c[2]+e+c[1]+e+c[0];}else{if(f){b=c[0]+e+c[1]+e+c[2];}}}else{if(publishing.DATE_PATTERN.match(/MM\-dd\-yyyy/)!=null||publishing.DATE_PATTERN.match(/M\-d\-yyyy/)!=null){var c=b.split(e);if(d){b=c[2]+e+c[0]+e+c[1];}else{if(f){b=c[1]+e+c[0]+e+c[2];}}}else{if(publishing.DATE_PATTERN.match(/yyyy\-MM\-dd/)!=null||publishing.DATE_PATTERN.match(/yyyy\-M\-d/)!=null){if(d){b=b;}else{if(f){b=c[2]+e+c[1]+e+c[0];}}}}}}}}}}}}}}}return b;};publishing.util.optionalUrlParam=function(c,b,a){if(typeof b!=="undefined"&&b!==""){if((typeof a!=="undefined"&&b==a)||b==""){return"";}return[c,encodeURI(b)].join("=");}return"";};publishing.util.requiredUrlParam=function(b,a){return a?[b,encodeURI(a)].join("="):"";};publishing.util.getTravellersAsUrlParameters=function(h,l,a,n,m){var b=[],e,c;for(e=1;e<=l;e++){var g=parseInt(((l==1)?$("."+h+" .room-traveller-combo #NumAdult"+e).val():$("."+h+" #hotel-rooms #NumAdult"+e).val()),10),f=parseInt(((l==1)?$("."+h+" .room-traveller-combo #NumChild"+e).val():$("."+h+" #hotel-rooms #NumChild"+e).val()),10);b.push(publishing.util.requiredUrlParam(a.replace("{{roomId}}",e),g));if(f>0){b.push(publishing.util.requiredUrlParam(n.replace("{{roomId}}",e),f));for(c=1;c<=f;c++){var d=parseInt(((l==1)?$(".hotelOnly-"+e+"-children-ages #Rm"+e+"Child"+c+"Age").val():$("#hotelOnly-"+e+"-children-ages #Rm"+e+"Child"+c+"Age").val()),10);b.push(publishing.util.requiredUrlParam(m.replace("{{roomId}}",e).replace("{{childId}}",c),d));}}}return b.join("&");};publishing.wizard.getSearchUrlHotelOnly=function(){var h=[],d=parseInt($(".hotelOnly #NumRoom").val(),10),n=$('.hotelOnly [data-canonic="destination"]').val(),m=$("#H-fromDate").val(),b=$("#H-toDate").val(),p=$("#H-hotelName").val(),k=$('.hotelOnly [name="hotelChainId"]').val(),l=$('.hotelOnly [name="LodgingType"]').val(),q=$(".hotelOnly #Class").val(),o=($('.hotelOnly input[name="rfrr"]').length>0&&$('.hotelOnly input[name="rfrr"]').val()!="")?$('.hotelOnly input[name="rfrr"]').val():"";if(publishing.wizard.BIASED_FOR_HOTELS_PER_CITY&&publishing.wizard.hotelsForCities.length>0){var a=$.grep(publishing.wizard.hotelsForCities,function(r,e){return r.cityId==n;})[0];var f=a.hotelIds.join(","),g=a.cityId;n=$('.hotelOnly [data-canonic="destination"]').find(":selected").text();}try{if(d<9){h[0]=["/go/hotel/search/Destination",publishing.util.formatDateForSearchQuery((m==""?"0000-00-00":m),"yyyy-mm-dd"),publishing.util.formatDateForSearchQuery((b==""?"0000-00-00":b),"yyyy-mm-dd")].join("/");h[1]=["SearchType=Destination",publishing.util.requiredUrlParam("CityName",n),publishing.util.requiredUrlParam("NumRoom",d),publishing.util.optionalUrlParam("ChainName",p),publishing.util.optionalUrlParam("ChainId",k),publishing.util.optionalUrlParam("Class",q),publishing.util.optionalUrlParam("Group",f),publishing.util.optionalUrlParam("RegionId",g),publishing.util.optionalUrlParam("LodgingType",l),publishing.util.getTravellersAsUrlParameters("hotelOnly",d,"NumAdult{{roomId}}","NumChild{{roomId}}","Rm{{roomId}}child{{childId}}age"),publishing.util.requiredUrlParam("rfrr",o)].filter(function(e){return e!="";}).join("&");}else{h[0]=[window.location.host.replace("www","groups"),"/GroupForm.cfm"].join("");h[1]=[publishing.util.requiredUrlParam("locale",window.locale),publishing.util.requiredUrlParam("City",n),publishing.util.requiredUrlParam("InDate",m),publishing.util.requiredUrlParam("OutDate",b),"ol=1",publishing.util.requiredUrlParam("rfrr",o)].filter(function(e){return e!="";}).join("&");}}catch(c){h[0]="/go/hotel/search/Destination/0000-00-00/0000-00-00";h[1]=o;}return h.join("?");};publishing.wizard.ON_FORM_SUBMIT=function(T,J){if($(T.target).attr("class")=="hotelOnly"){window.location.href=publishing.wizard.getSearchUrlHotelOnly();return false;}if($(T.target).attr("class")=="flightAndHotel"){if(publishing.wizard.lobforms.hotelOnly.gotoPackageInfo(T.target,J)){return false;}}if($(T.target).attr("class")=="carOnly"){var O=TA?TA.getInstance("C-destination"):null;var v=O&&O.On;var P=O&&O.selectedItem;if(v&&P){if(O.selectedItem.type=="AIRPORT"){$("#C-destination").val(O.selectedItem.tla);var Y=TA?TA.getInstance("C-dropOffLocation"):null;var V=Y&&Y.On;var a=Y&&Y.selectedItem;if($("#showHideDropOff")!=null&&$("#showHideDropOff").is(":checkbox")&&!$("#showHideDropOff").is(":checked")){$("#C-dropOffLocation").val("");}else{if(V&&a&&Y.selectedItem.type=="AIRPORT"){$("#C-dropOffLocation").val(Y.selectedItem.tla);}}}else{$("#C-SearchType").val("PLACE");}}else{$("#C-SearchType").replaceWith('<input type="hidden" name="searchType" value="DTI">');}}if(J.interstitial){publishing.wizard.setSearchButtonToInterstitial(T,J);}if($(T.target).attr("class")=="cruise"){T.preventDefault();var S=$(publishing.WIZARD_CONTAINER_ID+" form.cruise"),B=S.find("select[name=destination]").prop("value"),r=S.find("select[name=earliest-departure-date]").prop("value"),q=S.find(".section-cruise-age-group"),G=q.field("numChildren"),u=q.field("numAdults"),l=S.find("#cruiseStartDateInput"),n=S.find("#cruiseEndDateInput"),L=S.find('[name="rfrr"]');f=["/Cruise-Search"];function Q(){if(f.indexOf("?")==-1){f.push("?");}else{f.push("&");}}function ad(ag){var af=new Date(ag);var m=af.getUTCDate(),ah=af.getUTCMonth()+1,ae=af.getUTCFullYear();return ae+"-"+ah+"-"+m;}if(typeof B!="undefined"&&B!=""){Q();f.push("destination="+B);}if(typeof r!="undefined"&&r!=""){Q();f.push("earliest-departure-date="+r);}if(u&&u.length>0){Q();f.push("adultCount="+u.val());}if(G&&G.length>0){if(G.val()>0){Q();f.push("childCount="+G.val());Q();f.push("childAges=");for(var X=1;X<=parseInt(G.val());X++){var F=S.find("select[name=Age"+X+"]").filter(":visible")[0].value;f.push(F);if(X<G.val()){f.push(",");}}}}if(l.length>0&&typeof l!==undefined&&l.val()!==undefined&&l.val()!==""){Q();f.push("earliest-departure-date=",ad(l.val()));}if(n.length>0&&typeof n!==undefined&&n.val()!==undefined&&n.val()!==""){Q();f.push("latest-departure-date=",ad(n.val()));}if(typeof L!="undefined"&&L.val()!="undefined"&&L.val()!=""){Q();f.push("rfrr="+L.val());}setTimeout(function(){if($("#cruise .errors").children().length===0){window.location.href=f.join("");}},0);return false;}if(typeof publishing.wizard.lobforms.flightOnly.submitFormTarget!="undefined"&&publishing.wizard.lobforms.flightOnly.submitFormTarget!=null&&publishing.wizard.lobforms.flightOnly.submitFormTarget.id=="A-searchButtonExt1"){T.preventDefault();var N=$(publishing.WIZARD_CONTAINER_ID+" form.activities"),B=N.field("destination"),r=N.field("fromDate"),h=N.field("toDate"),L=N.find('[name="rfrr"]'),f=["/lx/redirect"];function Q(){if(f.indexOf("?")==-1){f.push("?");}else{f.push("&");}}if(typeof B.data("id")!="undefined"){Q();f.push("loid="+B.data("id"));}else{Q();f.push("locn="+B.val());}if(typeof r.val()!="undefined"&&r.val()!=""){Q();f.push("startDate="+r.val());}if(typeof h.val()!="undefined"&&h.val()!=""){Q();f.push("endDate="+h.val());}if(typeof L!="undefined"&&L.val()!="undefined"&&L.val()!=""){Q();f.push("rfrr="+L.val());}window.location.href=f.join("");return false;}if(typeof publishing.wizard.lobforms.flightOnly.submitFormTarget!="undefined"&&publishing.wizard.lobforms.flightOnly.submitFormTarget!=null&&$(publishing.wizard.lobforms.flightOnly.submitFormTarget).attr("submittype")=="flightAndHotel"){publishing.wizard.lobforms.flightOnly.submitFormTarget=null;
function R(){$(publishing.WIZARD_CONTAINER_ID+" form.flightAndHotel").find("input[type='submit']").each(function(){$(this).val($(this).val().toUpperCase());});k.clearErrors();t();}function t(){publishing.wizard.lobforms.flightOnly.searchFlightAndHotel();$form=$(publishing.WIZARD_CONTAINER_ID+" form.flightAndHotel");$form.find(".ignore-hidden-fields").removeClass("ignore-hidden-fields");$form.find("button:submit").trigger("click");}var S=$(publishing.WIZARD_CONTAINER_ID).find(".allLobForms");if(S.find("div.lobForm-flightAndHotel").length==0){var k=$('<div class="lobForm lobForm-flightAndHotel"/>').hide().appendTo(S);var s=window["g_wizDesign"]?"/"+g_wizDesign:"";k.load("/publishing/wizard-lob-form/flightAndHotel"+s,R);}else{t();}return false;}if(typeof publishing.wizard.lobforms.flightOnly.submitFormTarget!="undefined"&&publishing.wizard.lobforms.flightOnly.submitFormTarget!=null&&$(publishing.wizard.lobforms.flightOnly.submitFormTarget).attr("submittype")=="flightOnly"){var K=$(T.target).find("[name=TripType][value=Multicity]");var aa=$(T.target).find("[name=TripType][value=RoundTrip]");var p=$(T.target).find("[name=TripType][value=OneWay]");var Z=$(T.target).find(".oneWayOrReturn").find("[name=stopOverCheck]");if(Z.length>0&&Z.is(":checked")){publishing.wizard.lobforms.flightOnly.stopOverSearch(T.target);return true;}var w=$("form[name=flightSearch]");if(w!=null){var x=[{"id":"12AM","value":"T00:00"},{"id":"1AM","value":"T01:00"},{"id":"2AM","value":"T02:00"},{"id":"3AM","value":"T03:00"},{"id":"4AM","value":"T04:00"},{"id":"5AM","value":"T05:00"},{"id":"6AM","value":"T06:00"},{"id":"7AM","value":"T07:00"},{"id":"8AM","value":"T08:00"},{"id":"9AM","value":"T09:00"},{"id":"10AM","value":"T10:00"},{"id":"11AM","value":"T11:00"},{"id":"12PM","value":"T12:00"},{"id":"1PM","value":"T13:00"},{"id":"2PM","value":"T14:00"},{"id":"3PM","value":"T15:00"},{"id":"4PM","value":"T16:00"},{"id":"5PM","value":"T17:00"},{"id":"6PM","value":"T18:00"},{"id":"7PM","value":"T19:00"},{"id":"8PM","value":"T20:00"},{"id":"9PM","value":"T21:00"},{"id":"10PM","value":"T22:00"},{"id":"11PM","value":"T23:00"},{"id":"362","value":"TANYT"},{"id":"361","value":"TMORN"},{"id":"721","value":"TNOON"},{"id":"1081","value":"TEVEN"}];function U(ae){var m="TANYT";$.each(x,function(af,ag){if(ag["id"]==ae){m=ag["value"];}});return m;}function y(ae,ag,ah,m){var af="from:"+ae+",to:"+ag+",departure:"+ah+U(m);return af;}var o=$(T.target).find("input[name=FrAirport]").prop("value");var ac=$(T.target).find("input[name=ToAirport]").prop("value");if(o==undefined){o=$(T.target).find("select[name=FrAirport]").prop("value");}if(ac==undefined){ac=$(T.target).find("select[name=ToAirport]").prop("value");}var I=y(o,ac,$(T.target).find("input[name=FromDate]").prop("value"),$(T.target).find("select[name=FromTime]").prop("value"));var d=$(T.target).find("select[name=NumChild]").eq(0).prop("value");var c="children:"+d;if(parseInt(d)>0){c=c+"[";for(X=1;X<=parseInt(d);X++){if(X>1){c=c+";";}var e=$(T.target).find("select[name=Age"+X+"]").prop("value");c=c+e;}c=c+"]";}var ab="Y";var C=$(T.target).find('[name=InfantInSeat][value="1"]');if(C!=null&&C.is(":checked")){ab="N";}var g=($(T.target).find("select[name=NumSenior]").length>0)?$(T.target).find("select[name=NumSenior]").prop("value"):0;c=c+",adults:"+$(T.target).find("select[name=NumAdult]").prop("value")+",seniors:"+g+",infantinlap:"+ab;var M="economy";switch($(T.target).find("[name=Class]").prop("value")){case"1":M="first";break;case"2":M="business";break;case"5":M="premium";break;case"3":M="economy";break;default:M="economy";break;}var E="cabinclass:"+M;if($(T.target).find("input[name=Direct]").is(":checked")){E=E+",maxhops:0";}var b="N";if($(T.target).find("input[name=NoChangePen]").is(":checked")){var b="Y";}E=E+",nopenalty:"+b+",sortby:price";var A=$(T.target).find("[name=Airline]").prop("value");if(A!=""&&typeof(A)!="undefined"){E=E+",carrier:"+A;}if(aa!=null&&aa.is(":checked")){var H=y(ac,o,$(T.target).find("input[name=ToDate]").prop("value"),$(T.target).find("select[name=ToTime]").prop("value"));$("<input />").attr({"type":"hidden","name":"trip","value":"roundtrip"}).appendTo(w);$("<input />").attr({"type":"hidden","name":"leg1","value":I}).appendTo(w);$("<input />").attr({"type":"hidden","name":"leg2","value":H}).appendTo(w);}else{if(p!=null&&p.is(":checked")){$("<input />").attr({"type":"hidden","name":"trip","value":"oneway"}).appendTo(w);$("<input />").attr({"type":"hidden","name":"leg1","value":I}).appendTo(w);}else{if(K!=null&&K.is(":checked")){$("<input />").attr({"type":"hidden","name":"leg1","value":I}).appendTo(w);for(var W=2;W<=$(".additional-flight").length;W++){o=$(T.target).find("input[name=FrAirport"+W+"]").val();ac=$(T.target).find("input[name=ToAirport"+W+"]").val();if(o==undefined){o=$(T.target).find("select[name=FrAirport"+W+"]").val();}if(ac==undefined){ac=$(T.target).find("select[name=ToAirport"+W+"]").val();}var z=y(o,ac,$(T.target).find("input[name=Date"+W+"]").val(),"TANYT");if(o.length>0&&ac.length>0){$("<input />").attr({"type":"hidden","name":"leg"+W,"value":z}).appendTo(w);}}$("<input />").attr({"type":"hidden","name":"trip","value":"multi"}).appendTo(w);}}}$("<input />").attr({"type":"hidden","name":"passengers","value":c}).appendTo(w);$("<input />").attr({"type":"hidden","name":"options","value":E}).appendTo(w);$("<input />").attr({"type":"hidden","name":"mode","value":"search"}).appendTo(w);var D=$("form.flightOnly input[name=rfrr]");if(D.length>0){$("<input />").attr({"type":"hidden","name":"rfrr","value":D.val()}).appendTo(w);}w.submit();return false;}}if(publishing.wizard.lobforms.carOnly){$form=$(publishing.WIZARD_CONTAINER_ID+" form.carOnly");if($form.find("#street").css("display")=="none"){$form.find("#street").empty();$form.find("#city").empty();$form.find("#state").empty();$form.find("#zip").empty();}if($form.find("#disCorpCode").css("display")=="none"||$form.find("#disCorpCode").find("input[name=CorpDiscNum]").val()==""){$form.find("#disCorpCode").find("input[name=CorpDiscNum]").attr("disabled","disabled");}if($form.find("#disRateCode").css("display")=="none"||$form.find("#disRateCode").find("input[name=RateCode]").val()==""){$form.find("#disRateCode").find("input[name=RateCode]").attr("disabled","disabled");}if($form.find("#disCouponCode").css("display")=="none"||$form.find("#disCouponCode").find("input[name=CouponCode]").val()==""){$form.find("#disCouponCode").find("input[name=CouponCode]").attr("disabled","disabled");}if($form.find("#disOtherCode").css("display")=="none"||$form.find("#disOtherCode").find("input[name=OtherCode]").val()==""){$form.find("#disOtherCode").find("input[name=OtherCode]").attr("disabled","disabled");}}return true;};publishing.util.Date=function(b,f){var g=(1000*60*60*24);var c=new Date(b.valueOf()+(g*f));function a(){return c.getMonth()+1<10?"0"+(c.getMonth()+1):c.getMonth()+1;}function e(){return c.getDate()<10?"0"+c.getDate():c.getDate();}function d(){return c.getFullYear();}this.format=function(k){var h=k.toUpperCase().replace("MM",a());h=h.replace("DD",e());h=h.replace("YYYY",d());h=h.replace("YY",(d()%2000));return h;};};publishing.util.formattedDate=function(c,d,a){var b=new publishing.util.Date(a||new Date(),d);return b.format(c);};publishing.util.parseDate=function(d){var b={"mmddyy":{day:1,month:0,year:2},"ddmmyy":{day:0,month:1,year:2},"yymmdd":{day:2,month:1,year:0},"ddmmyyyy":{day:0,month:1,year:2}};function e(g){var h=g.split(publishing.DATE_SEPERATOR_REGEX);var k=b[publishing.NORMALIZED_DATE_FORMAT];if(k==undefined){return[];}var f={day:parseInt(h[k["day"]],10),month:parseInt(h[k["month"]],10),year:parseInt(h[k["year"]],10)};if(f.year<100){f.year=2000+f.year;}return f;}var a=e(d);var c=new Date(a.year,a.month-1,a.day);if(isNaN(c.getTime())){return null;}return c;};publishing.util.calendarDateFormat=function(c,a){var b={"mmddyy":"mm"+a+"dd"+a+"yy","ddmmyy":"dd"+a+"mm"+a+"yy","yymmdd":"yy"+a+"mm"+a+"dd","ddmmyyyy":"dd"+a+"mm"+a+"yyyy"};return b[c];};publishing.util.preserveValues=function(a,b){a.each(function(){var e=$(this);
var d=publishing.wizard.canonicName(e);var c=publishing.wizard.canonicFieldValues[d];if(c==undefined){if(d=="destination"&&(b=="hotelOnly"||b=="flightAndHotel"||b=="flightHotelAndCar"||b=="hotelAndCar"||b=="activities")){d="regionName";}if(publishing.wizard.LSDATA&&publishing.wizard.LSDATA[d]){c=publishing.wizard.LSDATA[d];}}if(c!=undefined&&c!=""){if(e.attr("type")=="radio"&&d=="infantSeatPreference"){if(c==e.val()){e[0].checked=true;}else{e[0].checked=false;}}else{if(c!=e.val()){if(d=="regionName"||d=="destination"){e.val(c);}else{if(e.is("select")){e.children().each(function(f,g){if($(g).prop("value")==c){e.val(c).change();}});}else{e.val(c).change();}if(e.is("[data-type=date]")&&e.val()!=exp.core.date.CalendarControl.config.getDateFormat()){e.blur();}}}}}if(e[0].checkState){e[0].checkState();}});};var calConfig,DPDisplay,g_calendar,g_datepicker,g_dateUpdater;publishing.wizard.calInit=function(){if(exp.core.date.DatePickerDisplay){var c=ol=0;if(window.g_wizDesign!==undefined&&g_wizDesign=="tabbed"){ol=0;c=2;}var b="/static/default/default/html/calendar/v3.0.0/calendar.html";if((typeof publishWizardCalendarUrl!=="undefined")&&publishWizardCalendarUrl.length>0){b=publishWizardCalendarUrl;}calConfig=exp.core.date.CalendarControl.config=exp.core.date.CalendarControl.Config;DPDisplay=exp.core.date.datePickerDisplay=exp.core.date.DatePickerDisplay("CalFrame",b,ol,c);exp.core.date.CalendarControl.config.setFormatConfig(publishing.NORMALIZED_DATE_FORMAT,publishing.DATE_SEPERATOR);exp.core.date.CalendarControl.config.setUnitConfig(publishing.START_DAY_OF_WEEK,publishing.MONTHS,publishing.DAYS);exp.core.date.CalendarControl.config.setTextConfig(publishing.CLOSE_LINK);g_calendar=exp.core.date.calendar=exp.core.date.Calendar(exp.core.date.CalendarControl.config);g_datepicker=exp.core.date.datePicker=exp.core.date.DatePickerControl(exp.core.date.calendar,DPDisplay,2);g_dateUpdater=exp.core.date.dateUpdater=exp.core.date.DateUpdater(exp.core.date.calendar,exp.core.date.CalendarControl.config);function a(){return g_datepicker;}}};var publishSwitchForm;publishing.wizard.init=function(){publishing.wizard.calInit();function p(t){var u=$(t.target);if($("#widgetcatalogWizard").is(".horizontal-wizard")){$(".current-lob").removeClass("current-lob");u.parent().parent().addClass("current-lob");}a.trigger("formSwitchStarted");switchForm(u.val(),true);h(u);}function k(){return $(".on.change-lob");}function d(w){var u=$(w.target);var t=k();if(u[0].nodeName!=="A"){u=u.parents(".change-lob");}var x=u.attr("data-lob");var v=t.attr("data-lob");$("#widgetcatalogWizard").removeClass("currLob-"+v).addClass("currLob-"+x);t.removeClass("on").attr("aria-selected","false");u.addClass("on").attr("aria-selected","true");a.trigger("formSwitchStarted");switchForm(x,true);}function o(){a.addClass("ajax-tab-loading loading");}function g(){var u=k().attr("data-lob");var t=l.children(".lobForm-"+u).children().length>0;if(t){a.removeClass("ajax-tab-loading loading");}}publishSwitchForm=switchForm=function(B,y){var w=l.children("div.lobForm:visible");var F=l.children("div.lobForm-"+B);var z=w.hasClass("lobForm-"+B);var D=q&&!a.hasClass("currLob-"+B);var E=publishing.wizard.AJAX_LOB_FORMS&&F.length===0;var u=F.children().length===0;g();if(z||D){return;}if(E){c(B);return;}if(u){o();return;}w.hide();F.show();var x="",v=F.find("input[name='rfrr']"),C=F.find("form."+B);if(typeof v=="object"&&v.length==0){x=w.find("input[name='rfrr']").clone();if(typeof C=="object"&&C.length>0&&typeof x=="object"&&x.length>0){x.appendTo(C);}}if(typeof uitk!=="undefined"){try{uitk.refreshPlaceholders();}catch(A){}}if(y){var t=publishing.wizard.canonicFields[F.find("form").attr("class")];if(t!==undefined){publishing.util.preserveValues(t,B);}}F.clearErrors();$("#widgetcatalogWizard").trigger("formSwitched");publishing.wizard.disableTabletKeyboard();};function h(w){var v=w.attr("data-title");var u=w.attr("wizard-title");var t=s.attr("data-template");if(t!=undefined){if(u!=""){s.html(u);}else{s.html(t.replace("{lob}",$.trim(v)));}}}if(window["uitk"]&&uitk.subscribe){uitk.subscribe("datepicker.selectDate",function(u,w){var x=w.element,t=w.date;var v=publishing.wizard.canonicName(x);publishing.wizard.canonicFieldValues[v]=x.val();setTimeout(function(){if(v=="fromDate"){publishing.wizard.canonicFieldValues["toDate"]=$("[data-canonic=toDate]:visible").val();}else{if(v=="toDate"){publishing.wizard.canonicFieldValues["fromDate"]=$("[data-canonic=fromDate]:visible").val();}}},1);});}function r(u){var t=u.find("[data-canonic]");t.change(function(){var w=$(this);var v=publishing.wizard.canonicName(w);publishing.wizard.canonicFieldValues[v]=w.val();if(this.id=="H-destination"&&$("#H-hotelId").val()!=""&&$("#H-hotelId").attr("timestamp")+1<=new Date().getTime()){$("#H-hotelId").val("");}});publishing.wizard.canonicFields[u.attr("class")]=t;}function e(){var t=$('<select name="CityId" data-canonic="destination">');$.each(publishing.wizard.hotelsForCities,function(u,v){options=$('<option value="'+v.cityId+'">'+v.cityName+"</option>");options.appendTo(t);});a.find("[data-canonic=destination]:visible").each(function(v,u){my_select=t.clone();my_select.attr("class",$(u).attr("class"));$(u).replaceWith(my_select);});}function b(){var t=a.find("input[name=lob]:checked");if(t.length>0){h(t);switchForm(t.val(),false);}}function n(){a.find(".change-lob").first().trigger("click").focus();}function f(t){l.find(".lobForm-"+t).remove();}function m(){var t=k().data("lob");if(publishing.isMobile&&t=="hotelOnly"){$("#H-fromDate").val(publishing.util.formattedDate(publishing.DATE_PATTERN,0));$("#H-toDate").val(publishing.util.formattedDate(publishing.DATE_PATTERN,1));}}function c(C){function E(G,H,F){F.done(function(){var I=true;r(B.find("form"));D();switchForm(C,I);g();m();});F.fail(function(){g();n();f(C);});}function D(){B.find("input[type='submit']").each(function(){$(this).val($(this).val().toUpperCase());});}var B=$('<div class="lobForm lobForm-'+C+'"/>').hide().appendTo(l);var u=window["g_wizDesign"]?"/"+g_wizDesign:"";var w="";var y="";if(window["g_wizDesign"]){w=C=="hotelOnly"?"/0":"/1";y=C=="hotelOnly"?"/2":"/1";}var v=$("#"+C+"-tab");if(v.length>0&&v.attr("data-dateless")){w=v.attr("data-dateless")==="true"?"/1":"/0";}var A="";if(window["g_packageTreatment"]){A="/"+g_packageTreatment;}var z="";if(window["g_isDomesticHotel"]){z="domestic";}o();var t="/publishing/wizard-lob-form/"+z+C+u+w+y+A;var x=null;B.load(t,x,E);}var a=$(publishing.WIZARD_CONTAINER_ID);var s=a.find(".title h3");var l=a.find(".allLobForms");var q=window.g_wizDesign!==undefined&&g_wizDesign=="responsive";a.find("input[name=lob]").change(p);if(q){a.find(".change-lob").click(d);}publishing.wizard.BIASED_FOR_HOTELS_PER_CITY=!$.isEmptyObject(publishing.wizard.hotelsForCities);if(publishing.wizard.BIASED_FOR_HOTELS_PER_CITY){e(a);}b();a.find("form").each(function(){r($(this));});m();};publishing.wizard.numberOfRoomsListener=function(f,g,e){var d=false;function b(h){var k=c(h);if(k.length!==0&&k.is(":hidden")){k.find(".error").removeClass("error");k.css("visibility","visible");k.show();}if(d){k.removeClass("hidden");}}function a(h){var k=c(h);k.hide();if(d){k.addClass("hidden");}}function c(h){return $(f[h]);}return function(){if(typeof $(".rooms").data("uses-hidden")!=="undefined"){d=$(".rooms").data("uses-hidden");}var u=$(this).val();var w=9;var s=f.find(".room-traveller-combo");var x=s.find(".H-NumAdult1-label");var v=s.find(".H-NumChild1-label");var o=s.find(".FH-NumAdult1-label");var r=s.find(".FH-NumChild1-label");var n=f.find(".hotelOnly-1-children-ages").first();var y=f.find(".flightAndHotel-1-children-ages").first();if(u<w){var q=$("#H-searchButton");q.text(e.normalButtonText);for(var p=1;p<=g;p++){if(p<=u&&u!=1){b(p);}else{a(p);}}if(u>1){l();}else{m();}}else{var q=$("#H-searchButton");if("small"==publishing.wizard.SIZE||"medium"==publishing.wizard.SIZE){q.text(e.normalButtonText);}else{q.text(e.ninePlusRoomsButtonText);}m();for(var p=1;p<w;p++){a(p);}}function m(){x.show();
x.find(":input").prop("disabled",false);v.show();v.find(":input").prop("disabled",false);n.removeClass("hidden");n.find(":input").prop("disabled",false);o.show();o.find(":input").prop("disabled",false);r.show();r.find(":input").prop("disabled",false);y.removeClass("hidden");y.find(":input").prop("disabled",false);}function l(){x.hide();x.find(":input").prop("disabled",true);v.hide();v.find(":input").prop("disabled",true);n.addClass("hidden");n.find(":input").prop("disabled",true);o.hide();o.find(":input").prop("disabled",true);r.hide();r.find(":input").prop("disabled",true);y.addClass("hidden");y.find(":input").prop("disabled",true);}var h=$(this.form);var t=h.find("[data-canonic=childrenAge]:visible");var k=h.find(".section-infants-pref");publishing.wizard.common.flight.accompaniedInfantListener(t,k)();};};publishing.wizard.numberOfChildrenListener=function(a,b){return function(d,g){if(g===undefined){g=false;}var h=$(this);h.parents(".section-flight-age-group").find(".section-children-ages").toggle((h.val()>0));h.parents(".section-age-group").children(".section-children-ages").toggle((h.val()>0));h.parents(".room").children(".section-children-ages").toggle((h.val()>0));for(var e=1;e<=a;e++){var c=e<=h.val();var f=$(b[e-1]);f.closest("fieldset").toggle(c);f.closest("fieldset").toggleClass("hidden",!c);if(!c&&!g){f.val(publishing.UNDEFINED_CHILD_AGE);}}};};publishing.wizard.initRoom=function(a,e,c){var k=a.field("numChildren");var d=a.field("numAdults");var b=a.find(".number-of-travellers");var g=a.field("childrenAge");var h=k.find("option:last").val();function f(l){publishing.wizard.canonicFieldValues[l.attr("name")]=l.val();}if(a.is(":visible")){if(d.val()>0&&d.is(":visible")){f(d);}if(k.val()>0&&k.is(":visible")){f(k);if(a.parents("form").hasClass("hotelOnly")){publishing.wizard.canonicFieldValues["numChild"]=k.val();}}}k.bindAndTrigger(publishing.wizard.numberOfChildrenListener(h,g));if(c.totalNumberOfTravellersPerRoom!==undefined){e.push(new publishing.validation.TotalBetween(1,-1,b,c.totalNumberOfTravellersPerRoom));}g.each(function(){e.push(new publishing.validation.ValueNot(publishing.UNDEFINED_CHILD_AGE,$(this),c.childrenAge));});};publishing.wizard.initRooms=function(c,g,h,e,a){var f=c.field("numRooms");var b=f.find("option:last").val();f.bindAndTrigger(publishing.wizard.numberOfRoomsListener(g,b,a));g.each(function(n,o){publishing.wizard.initRoom($(o),h,e);});var d=c.find(".number-of-travellers");var k=c.find("[data-canonic='numAdults']");var m=c.find("[data-canonic='numSeniors']");var l=c.find("[data-canonic='numChildren']");h.push(new publishing.validation.ChildrenMustNotBeAlone(k,m,l,e.childrenMustNotBeAlone));if(a.hideShowRooms){a.hideShowRooms();}};publishing.wizard.common.flight.accompaniedInfantListener=function(c,a){function b(d){return $(d).is(":visible")&&($(d).val()=="0"||$(d).val()=="1");}return function(){a.toggle($.grep(c,b).length>0);};};publishing.wizard.lobforms.additionalOptions=function(a){var e=a.showAdditionalOptionsField;var d=a.additionalOptionsContainer;var f=a.hideAdditionalOptionsField;var c=a.infoLinkField;var g=a.infoContainer;e.click(b);f.click(b);if(c!==undefined){c.click(function(){$(g).toggle();});}function b(){var h=$(e).attr("name");e.parent().toggle(this.name!=h);e.parent().toggleClass("hidden",this.name==h);f.parent().toggle(this.name==h);f.parent().toggleClass("hidden",this.name!=h);d.toggle(this.name==h);}};publishing.wizard.canonicName=function(a){var c=a.attr("data-canonic");var b=a[0].name;if("childrenAge"==c){b=b.replace("Rm","").replace("Child","").replace("Age","");if(b.length==1){b="1"+b;}b="ChildAge"+b;c=b;}else{if("numAdults"==c){c=b;if("NumAdult"==c){c="NumAdult1";}}else{if("numSeniors"==c){c=b;if("NumSenior"==c){c="NumSenior1";}}else{if("numChildren"==c){c=b;if("NumChild"==c){c="NumChild1";}}}}}return c;};$(publishing.wizard.init);expNamespace("publishing.validation");publishing.validation.Validator=function(a,b){this.validate=function(){b.clearAll();var c=true;$.each(a,function(){var d=this.apply();if(!d.isValid){b.render(d.error);c=false;}});return c;};};publishing.validation.Error=function(a,b){this.fields=a;this.message=b;};publishing.validation.Result=function(b,a){this.isValid=b;this.error=a;};$(document).on("click",".error-link",function(d,b){var c=location.pathname+location.search,a=setTimeout(function(){history.replaceState({},"",c);},100);});publishing.validation.ErrorRenderer=function(d,e){var b=(window.g_wizDesign!==undefined&&g_wizDesign=="responsive"),a=e.parents(".validation-alert");function c(f){return e.find(":contains("+f.message+")").length>0;}this.render=function(g){if(!c(g)){var h=g.message.indexOf("{{fieldName}}")!=-1?g.message.replace("{{fieldName}}",$(g.fields[0]).siblings("span.label").eq(0).text()):g.message;if(b){var f=$(g.fields[0]).attr("id");e.append('<li tabindex="0"><a class="error-link" href="#'+f+'">'+h+"</a></li>");}else{e.append('<li tabindex="0"><span class="icon" aria-hidden="true"/>'+h+"</li>");}}$.each(g.fields,function(){if(b){$(this).parent().addClass("invalid");$(this).attr("aria-invalid","true");d.find(".validation-msg").removeClass("hidden").addClass("error");a.removeClass("visuallyhidden").attr("aria-hidden","false");}$(this).addClass("error");});};this.clearAll=function(){e.empty();d.find(".error").removeClass("error");if(b){d.find(".invalid").removeClass("invalid");d.find(".invalid > input").attr("aria-invalid","false");d.find(".validation-msg").addClass("hidden");$(".validation-alert").addClass("visuallyhidden").attr("aria-hidden","true");}};if(b){$(document).off("click","#widgetcatalogWizard .change-lob").on("click","#widgetcatalogWizard .change-lob",this.clearAll);}};publishing.validation.Rule=function(c,a,b){if(a.jquery===undefined&&!$.isArray(a)){a=[a];}function d(){var e=false;$.each(a,function(){e=e||$(this).is(":hidden");});return e;}this.apply=function(){if(a.length==0||d()||c()){return new publishing.validation.Result(true);}else{var e=new publishing.validation.Error(a,b);return new publishing.validation.Result(false,e);}};};publishing.validation.NotEmpty=function(c,a){function b(){return !c.blank();}return new publishing.validation.Rule(b,c,a);};publishing.validation.IsEmailAddress=function(c,a){function b(){var d=new RegExp(/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/);return d.test(c.val());}return new publishing.validation.Rule(b,c,a);};publishing.validation.IsAlphabetOnly=function(c,a){function b(){var d=new RegExp(/^[A-Za-z]+$/);return d.test(c.val());}return new publishing.validation.Rule(b,c,a);};publishing.validation.NotSelect=function(c,a){function b(){return(c.val()!="Default");}return new publishing.validation.Rule(b,c,a);};publishing.validation.NotSelectCity=function(c,d,a){function b(){return !(c.val()!="Other"&&d.val()=="Default");}return new publishing.validation.Rule(b,d,a);};publishing.validation.CityBetween=function(a,d,b){function c(){if(a.blank()&&d.blank()){return true;}else{var e=a.val();var f=d.val();return e!=f;}}return new publishing.validation.Rule(c,[a,d],b);};publishing.validation.OptionalDate=function(f,c){function d(){return $.trim(f.val());}function b(){return !f.blank()&&(a!=d());}function e(){return d()==publishing.DATE_FORMAT||!b()||publishing.util.parseDate(f.val())!=null;}var a=d();return new publishing.validation.Rule(e,f,c);};publishing.validation.OptionalDateWithEmptyString=function(d,a){function b(){return $.trim(d.val());}function c(){return b()==publishing.DATE_FORMAT||b()===""||publishing.util.parseDate(d.val())!=null;}return new publishing.validation.Rule(c,d,a);};publishing.validation.MandatoryDate=function(d,b){function a(){return d.val()!=""&&d.val()!=publishing.DATE_FORMAT;}function c(){return publishing.util.parseDate(d.val())!=null;}function e(){var f=false;$.each(d,function(){f=f||$(this).is(":hidden");});return f;}this.apply=function(){if(e()){return new publishing.validation.Result(true);}else{if(!a()){return new publishing.validation.Result(false,new publishing.validation.Error(d,b.mandatory));
}else{if(!c()){return new publishing.validation.Result(false,new publishing.validation.Error(d,b.dateFormat));}else{return new publishing.validation.Result(true);}}}};return this;};publishing.validation.ConditionalDate=function(b,e,h,d){function f(){return $.trim(h.val());}function c(){return !b&&!e.is(":checked");}function a(){return !h.blank()&&f()!=publishing.DATE_FORMAT;}function g(){if(!c()){return h.blank()||f()==publishing.DATE_FORMAT||publishing.util.parseDate(f())!=null;}else{return publishing.util.parseDate(f())!=null;}}this.apply=function(){if(c()&&!a()){return new publishing.validation.Result(false,new publishing.validation.Error(h,d.mandatory));}else{if(!g()){return new publishing.validation.Result(false,new publishing.validation.Error(h,d.dateFormat));}else{return new publishing.validation.Result(true);}}};return this;};publishing.validation.DateRange=function(e,b,c,a){if(a===undefined){a=false;}function d(){var f=publishing.util.parseDate(e.val());var g=publishing.util.parseDate(b.val());return f==null||g==null||(a?(f<=g):(f<g));}return new publishing.validation.Rule(d,[e,b],c);};publishing.validation.DateBetween=function(d,a,e,b){function c(){var h=publishing.util.parseDate(a.val());var f=publishing.util.parseDate(e.val());var g=publishing.util.parseDate(d.val());return h==null||f==null||g==null||(g>=h&&g<=f);}return new publishing.validation.Rule(c,d,b);};publishing.validation.DatePastMaxPurchaseDate=function(b,a,c){function d(){var f=publishing.util.parseDate(a.val());var e=publishing.util.parseDate(b);return f==null||e==null||(e>f);}return new publishing.validation.Rule(d,[a],c);};publishing.validation.DateIsLessOrEqual=function(a,b,c){function d(){var f=publishing.util.parseDate(b.val());var e=publishing.util.parseDate(a);return f==null||e==null||(e>=f);}return new publishing.validation.Rule(d,[b],c);};publishing.validation.DatesNotToManyDaysAppart=function(a,d,e,b){function c(){if(!e||!b){return true;}var k=publishing.util.parseDate(a.val());var h=publishing.util.parseDate(d.val());var f=0;if(k&&h){var g=24*60*60*1000;var l=Math.abs(h.getTime()-k.getTime());f=Math.round(l/g);}return k==null||h==null||(f<=e);}return new publishing.validation.Rule(c,[a,d],b);};publishing.validation.DatePriorToAllowedDate=function(d,a,b){function c(){var f=publishing.util.parseDate(a);var e=publishing.util.parseDate(d.val());return e==null||e>=f;}return new publishing.validation.Rule(c,d,b);};publishing.validation.PickUpHrsBeforeDropOffHrs=function(a,f,e,c,b){function d(){if(a.val()==f.val()){return parseInt(e.val())<=parseInt(c.val())&&(parseInt(e.val())+120)<=parseInt(c.val())?true:false;}else{return true;}}return new publishing.validation.Rule(d,[e,c],b);};publishing.validation.NoResultsForSelected=function(c,a){function b(){return c.attr("state")!=="invalid";}return new publishing.validation.Rule(b,c,a);};publishing.validation.ValueNot=function(b,d,a){function c(){return d.val()!=b;}return new publishing.validation.Rule(c,d,a);};publishing.validation.TotalBetween=function(c,b,a,d){this.apply=function(){var g=0;var h=a.filter(":visible");$.each(h,function(){g+=parseInt($(this).val(),10);});var e=g>=c;if(b!=-1){e=e&&g<=b;}if(h.length==0||e){return new publishing.validation.Result(true);}else{var f=new publishing.validation.Error(h,d);return new publishing.validation.Result(false,f);}};return this;};publishing.validation.ChildrenMustNotBeAlone=function(a,d,b,c){this.apply=function(){var m=false;var l=[];var g=a.filter(":visible");var k=d.filter(":visible");var h=b.filter(":visible");if(h.length>0){for(var f=0;f<h.length;f++){if(parseInt($(h[f]).val())>0&&parseInt($(g[f]).val())==0&&parseInt($(k[f]).val())==0){m=true;l.push(g[f]);l.push(k[f]);l.push(h[f]);}}}if(l.length==0||!m){return new publishing.validation.Result(true);}else{var e=new publishing.validation.Error(l,c);return new publishing.validation.Result(false,e);}};return this;};(function(b){var a={any:function(d,c){var f=this;if(arguments.length==1){c=d;}else{f=d;}var e=false;b.each(f,function(g,h){if(!e){e=e||c(g,h);}});return e;},all:function(e,d){var f=this;if(arguments.length==1){d=e;}else{f=e;}var c=true;b.each(f,function(g,h){c=c&&d(g,h);});return c;},blank:function(d,c){var e=this;if(c===undefined){c=d;}else{e=d;}return b.all(e,function(f,g){if(g.value!==undefined){g=g.value;}return b.trim(g)=="";});}};b.extend(b,a);b.extend(b.fn,a);b.extend(b.fn,{field:function(c){return this.find("[data-canonic='"+c+"']");},toggleSection:function(c){return this.bindAndTrigger(function(){if(b(this).is(":checked")){c.show();}else{c.hide();}});},initLobForm:function(c,d,m){var g=b(this);b(document).ajaxSuccess(f);function f(){if(!publishing.wizard.TAinstance){publishing.wizard.TAinstance=b('[data-provide="typeahead"]').data("typeahead");}}var p=this;p.find("input[type=text],select").focus(function(){b(this).parent().parent().addClass("fieldFocus");});p.find("input[type=text],select").blur(function(){b(this).parent().parent().removeClass("fieldFocus");});p.find("input[data-type='date']").attachCalendar(c).each(function(){if(this.value==""){this.value=publishing.DATE_FORMAT;}var q=b(this);});var o=p.attr("class");if(publishing.wizard.checkForChrome23OrAbove()){if((o==="hotelOnly")||(o==="flightOnly")){p.find(".xp-b-submit2").mousedown(function(q){publishing.wizard.handleMouseDown(p);});}}function n(){var A={destination:"",latLong:"",regionId:"",isInitialized:false};if(b("#pageId").val()!="page.TravelGuides.Landing"){return A;}var C=l().cache;var s=false;if(C){var w=false;var v=["METROSTATION","METROSTATIONSHADOW","TRAINSTATION","TRAINSTATIONSHADOW"];var q=b("#H-destination").val();var y=[];for(cacheKey in C){y.push(cacheKey);}for(var x=y.length-1;x>=0&&!w;x--){var t=C[y[x]];if(t){s=true;for(var u=0,z=t.length;u<z&&!w;u++){if(t[u].f&&t[u].f==q){if(v.indexOf(t[u].rt)!=-1){A.destination=t[u].f;A.latLong=t[u].ll.lat+","+t[u].ll.lng;A.regionId=t[u].id;A.isInitialized=true;w=true;}}}}}}if(!s){var r=b('[name="trainOrMetroStationDestination"]').val();var B=b('[name="latLong"]').val();if(r&&B){A.destination=r;A.latLong=B;A.regionId=b('[name="regionId"]').val();A.isInitialized=true;}}A.destination=A.destination.split(",",2).join();return A;}function l(){var q=b('[data-provide="typeahead"]').last().data("typeahead");return q?q:publishing.wizard.TAinstance;}function h(){return p.hasClass("hotelOnly");}function e(q){if(q.isInitialized){k("destination",q.destination);k("latLong",q.latLong);k("regionId",q.regionId);}}function k(q,r){if(q=="destination"){b("#H-destination").val(r);}else{p.append(b("<input />",{type:"hidden",name:q,value:r}));}}this.submit(function(ah){var ab=this,ax=p.find("#H-Class");if(h()){if(ax.val()==="0"){ax.prop("disabled",true);}else{ax.prop("disabled",false);}}if(c.interstitial){publishing.wizard.turnOnInterstitial(p.find("button"),c);}publishing.wizard.addPackageLobFields(p.attr("class"),p);p.find("input[data-type='date']").each(function(){if(this.value==publishing.DATE_FORMAT){this.value="";}});p.find("input[data-default]").each(function(){if(this.value==b(this).attr("data-default")){this.value="";}});var I=d===undefined?true:d.validate();p.find("input[data-type='date']").each(function(){var az=p.find("input[data-canonic='enableDateless']");if(az.length>0&&az[0].checked){if(b(this).attr("data-canonic")=="fromDate"){b("input[name='storedCheckinField']").val(this.value);}if(b(this).attr("data-canonic")=="toDate"){b("input[name='storedCheckoutField']").val(this.value);}this.value="";}});if(I){if(m!=undefined){m();}p.find(".ignore-hidden-fields").find(":input").filter("[class!=Do-Not-Remove]").filter(":hidden").remove();}else{var aw=p.find("input[data-canonic='enableDateless']");if(aw.length>0){aw[0].checked=false;}}if(I&&publishing.wizard.travelComAUInterstitial&&publishing.wizard.travelComAUInterstitial.isHidden){publishing.wizard.travelComAUInterstitial.display.call(ab,ah);return;}if(I){var x,ay=b('[name="lob"]'),C,t=b(),K={flightOnly:"flight",flightAndHotel:"flightHotel",flightHotelAndCar:"flightHotelCar",flightAndCar:"flightCar",hotelOnly:"hotel",carOnly:"car",hotelAndCar:"hotelCar",activities:"activity",cruise:"cruise"};
if(ay.length){C=b('[name="lob"]').filter(":checked").prop("value");t=b("."+C);}else{t=b('[type="submit"]:visible').closest("form");C=t.attr("class");}C=K[C]?K[C]:C;var N=b("#trainAndHotel-tab").hasClass("on");var ar=b("#activities-tab").hasClass("on")||g.closest("form").hasClass("activities");var an=b("#cruise-tab").hasClass("on")||p.hasClass("cruise");var au=b("#carOnly-tab").hasClass("on")||p.hasClass("carOnly");var am=(au&&p.field("hasDiscode").val()!="0");var ak=b("#vacationPackage").is(":checked");var A=publishing.isMobile&&(C==="hotel");if(window["corewizard"]&&((!ar&&!N&&!ak&&!am&&(publishing.isNewValidationLogicEnabled||au))||A)){var s={},J,q={"fromDate":"startDate","toDate":"endDate","numAdults":"adults","fromAirport2":"origin","date2":"departing","toAirport2":"destination","fromAirport3":"origin","date3":"departing","toAirport3":"destination","fromAirport4":"origin","date4":"departing","toAirport4":"destination","fromAirport5":"origin","date5":"departing","toAirport5":"destination","numRooms":"rooms","numChildren":"children","numAdults":"adults","specialEquipment-S":"carSkirack","specialEquipment-I":"carInfantseat","specialEquipment-T":"carToddlerseat","specialEquipment-W":"carChains","specialEquipment-L":"carLefthand","specialEquipment-R":"carRighthand","specialEquipment-N":"carNavigation","carType":"carType","RentalCompany":"carVendor","destination":"pickup","dropOffLocation":"dropoff","hotelClass":"star","accommodationType":"lodging","fromTime":"startTime","toTime":"endTime","refundableFlightsOnly":"noPenalty","directFlightsOnly":"nonStop","airlinePreference":"carrier","partialHotelBooking":"isPartialStay","flexibleFromDate":"checkin","flexibleToDate":"checkout"},U={"flightHotelCar":"FHC","flightHotel":"FH","flightCar":"FC","hotelCar":"HC"},P={"1":"hotel","5":"bedBreakfast","16":"apartment","7":"condo","8":"allInclusive"},Z={"NoPreference":"1","Economy":"2","Compact":"5","Midsize":"3","Standard":"6","FullSize":"4","Premium":"9","Luxury":"7"},W={"AIRPORT":1,"PLACE":4,"USADDRESS":2},Y=b('[name="TripType"]'),af;function y(az,aA,aB){aB=aB?aB:":visible";az.find("[data-canonic]").filter(aB).each(function(){var aC=b(this).data("canonic");if(aC){aC=q[aC]?q[aC]:aC;if(b(this).attr("type")==="checkbox"){aA[aC]=b(this).prop("checked");}else{aA[aC]=b(this).val();}}});aA.destination=aA.destination||aA.pickup;}function ap(az,aA){var aB=[];if(b("#H-NumRoom").val()==="9"){aA.isNinePlusRoomRequest=true;}b(".rooms").find(".room").filter(":visible").each(function(){var aC={};y(b(this),aC);aC.children=av(b(this),aC);aC.childCount=aC.children.length;aB.push(aC);});if(aB.length!=1){aB.shift();}aA.rooms=aB;aA.roomCount=aB.length;}function V(az,aA){t.find('[name="InfantInSeat"]').each(function(){if(b(this).prop("checked")){var aB=(b(this).val()==="2");if(aB){aA.lapSeat="lap";aA.isChildInLap=true;}else{aA.lapSeat="seat";aA.isChildInLap=false;}}});}function av(az,aB){var aA=[];az.find('[data-canonic="childrenAge"]:visible').each(function(aC){aA.push(parseInt(b(this).val()));});return aA;}y(t,s);function ad(aB,az){var aA=aB.find(".additionalOptionsLink");y(aA,az);}function ao(aA){aA=parseInt(aA);var az=""+(aA%60);if(az.length===1){az="0"+az;}if(aA<60){if(aA===1){return"1200AM";}else{return"1230AM";}}else{if(aA===720){return"1200PM";}else{if(aA===750){return"1230PM";}else{if(aA<780){return""+Math.floor(aA/60)+az+"AM";}else{return""+(Math.floor(aA/60)-12)+az+"PM";}}}}}function R(az){var aA=n();if(aA.isInitialized){az.destination=aA.destination;az.latLong=aA.latLong;az.regionId=aA.regionId;}}switch(C){case"flight":s.originTLA=publishing.wizard.TLA&&publishing.wizard.TLA["F-origin"]?publishing.wizard.TLA["F-origin"]:null;s.destinationTLA=publishing.wizard.TLA&&publishing.wizard.TLA["F-destination"]?publishing.wizard.TLA["F-destination"]:null;Y.each(function(){if(b(this).prop("checked")){af=b(this).prop("value");}switch(af){case"RoundTrip":s.isRoundtrip=true;s.flighttype="roundtrip";break;case"Multicity":s.isMultiDest=true;s.multidest=[];s.flighttype="multi";s.origin=t.find('[data-canonic="origin"]:visible').val();b("#multiDestinationsDiv").find(".section").each(function(){var az={};y(b(this),az);if(az.origin&&az.destination&&(az.departing||az.start)){s.multidest.push(az);}});break;case"OneWay":s.flighttype="oneway";break;}V(t,s);s.ages=av(t,s);});break;case"hotel":s.isHotelOnly=true;var O=b("input[name='mctc']");if(typeof O!=="undefined"&&O.length!==0&&null!==O.val().match("\\d{1,}")){s.membersOnly=O.val();}if(publishing.wizard.BIASED_FOR_HOTELS_PER_CITY){var T=p.find("[dataField='destination']").val();var aj=b.grep(publishing.wizard.hotelsForCities,function(aA,az){return aA.cityId==T;})[0];s.group=aj.hotelIds.join(",");s.regionId=aj.cityId;s.destination=p.find("[dataField='destination']").find(":selected").text();}R(s);ap(t,s);break;case"car":s.car=s.car||{};var ag=b("input[name='age']");if(typeof ag!=="undefined"&&ag.length!==0&&null!==ag.val().match("\\d{2}")){s.driversAge=ag.val();}y(t,s.car,"*");s.car.searchType=W[s.car.searchType];s.car.carType=s.carType=Z[s.car.carType];s.startTime=ao(s.startTime);s.endTime=ao(s.endTime);var M=b("form.carOnly input[name=rfrr]"),w=b("form.carOnly input[name=Renter]");if(M.length>0){s.rfrr=M.val();}if(w.length>0){s.carVendor=w.val();}break;case"flightHotelCar":s.startTime=362;s.endTime=362;case"flightHotel":case"flightCar":s.startTime=362;s.endTime=362;case"hotelCar":s.packageType=U[C];s.isPackage=true;V(t,s);ap(t,s);break;}if(publishing.isMobile){s.isMobileDevice=true;}if(s.cabinClass){s.cabinClassLegacy=s.cabinClass;switch(s.cabinClass){case"1":s.cabinClass="first";break;case"2":s.cabinClass="business";break;case"5":s.cabinClass="premium";break;case"3":s.cabinClass="economy";break;default:s.cabinClass="economy";break;}}var ai=new b.Deferred();if(s.isMobileDevice&&C==="flight"&&s.flighttype!=="multi"){var D=new b.Deferred(),at=new b.Deferred(),E=b("#F-origin"),z=b("#F-destination");var X=publishing.wizard.TAinstance;if(!X){var aq=window.TA;X={};}else{var ae=X.callback;}if(!s.originTLA&&E.val()){X.callback=function(az){s.originTLA=(az&&az.r&&az.r[0]&&az.r[0].a)||(az&&az[0]&&az[0].a);D.resolve();};if(aq){aq.getData(E.val(),X.callback);}else{X.request(E.val());}}else{D.resolve();}if(!s.destinationTLA&&z.val()){X.callback=function(az){s.destinationTLA=(az&&az.r&&az.r[0]&&az.r[0].a)||(az&&az[0]&&az[0].a);at.resolve();};if(aq){aq.getData(z.val(),X.callback);}else{X.request(z.val());}}else{at.resolve();}b.when(at,D).then(function(){ai.resolve();if(!aq){X.callback=ae;}});}else{ai.resolve();}if(A){s.isHashlessURLneeded=true;}var Q=function(){if(C==="flightCar"){if(s.rooms.length==0){var aC={adults:s.adults||"2",children:[]};s.rooms.push(aC);}s.roomCount=1;if(s.children){s.rooms[0].children=av(b(".section-children-ages"));s.rooms[0].childCount=s.rooms[0].children.length;}}var az={"flight":"flightSearchUrl","hotel":"hotelSearchUrl","car":"carSearchUrl","cruise":"cruiseSearchUrl","activity":"activitySearchUrl","flightHotel":"eapAspSearchUrl","flightHotelCar":"eapAspSearchUrl","flightCar":"eapAspSearchUrl","hotelCar":"eapAspSearchUrl"};J=!b.isEmptyObject(s)&&corewizard&&corewizard.search&&corewizard.search.getSearchUrl&&typeof corewizard.search.getSearchUrl==="function"&&corewizard.search.getSearchUrl(s,C,az[C]);if(J){if(C==="hotel"){var aA=t.find("#hotel-member-pricing");if(aA.length>0&&aA[0].checked){J=J+"&sort=memberDeals";}}if(t.find(".additionalOptionsLink").length&&!s.isMobileDevice){if(s.lodging){J+="&lodging="+P[s.lodging];}if(s.star&&s.star!=="0"){J+="&star=50,"+s.star;}if(s.hotelName){J+="&hotelName="+s.hotelName;}}if(b('[name="hotelChainId"]').length){J+="&chain="+b('[name="hotelChainId"]').val();}var aB=C.toLowerCase();if(aB.indexOf("car")>0){J+="&FromTime="+s.startTime+"&ToTime="+s.endTime;}if(s.numSeniors){J=J.replace(/seniors:0/,"seniors:"+s.numSeniors);}if(s.latLong){J+="&latLong="+s.latLong;}b(ab).submitOmnitureTracking(ab);window.location=J;}};b.when(ai).then(Q);return false;}p.find("select[data-default]").each(function(){if(this.value==b(this).attr("data-default")){if("true"==b(this).attr("hiddenWhenDefaultValue")){b(this).attr("name","");
}}});if(h()){e(n());}if(b("input[name='CityId']").length&&(p.attr("class")=="hotelOnly")&&publishing.wizard.packageLobData.regionId&&publishing.wizard.packageLobData.regionId>-1000){p.find("input[data-canonic='destination']")[0].disabled=true;}}if(I){if(m!=undefined){m();}p.find(".ignore-hidden-fields").find(":input").filter("[class!=Do-Not-Remove]").filter(":hidden").remove();}else{var aw=p.find("input[data-canonic='enableDateless']");if(aw.length>0){aw[0].checked=false;}}if(I&&publishing.wizard.ON_FORM_SUBMIT!==undefined){I=publishing.wizard.ON_FORM_SUBMIT(ah,c);}if((publishing.wizard.TA_POPUNDER)&&(publishing.wizard.siteId)){var v=p.attr("class");var ac=(v=="flightOnly"||v=="hotelOnly");if(typeof(PopUnder)!="undefined"&&ac){PopUnder.initialize(b(ah.target).attr("class"),publishing.wizard.siteId);}}var u;if(I){var L=p.find("[name=InfantInSeat][value=2]");if(L!=null&&L.is(":checked")){L.attr("name","");L.attr("value","");}var G=p.find("input[name=SearchArea]");var al=p.find("#H-destination").val();var r=window["TA"]?TA.getInstance("H-destination"):false;if(G&&al&&r&&r.On&&!r.selectedItem){I=(p.gotData)?true:false;if(!I){TA.getData(al,function(aA){var az="CITY";if(aA&&aA.length==1){az=aA[0].t;}G.val(az);p.gotData=true;p.submit();});u=setTimeout(function(){G.val("CITY");p.gotData=true;p.submit();},3000);}}var S={"flightOnly":"Flight","hotelOnly":"Hotel","flightAndHotel":"FH","flightAndCar":"FC","hotelAndCar":"HC","flightHotelAndCar":"FHC","carOnly":"Car","activities":"Activities","cruise":"Cruise","threePP":"ThreePP","threePPTravelPackages":"ThreePPTravelPackages","trainAndHotel":"TH"};var aa=p.attr("class");if(window["TA"]&&"flightAndHotel"==aa||"flightAndCar"==aa||"flightHotelAndCar"==aa||"hotelAndCar"==aa){if(r&&r.On){var F=r.selectedItem;if(F&&F.id!=""&&F.tla!=""){var B=F.id+":"+F.tla;b("<input>").attr({type:"hidden",name:"DestID",value:B}).appendTo(p);}}typeaheadO=TA.getInstance(S[aa]+"-origin");if(typeaheadO&&typeaheadO.On){var F=typeaheadO.selectedItem;if(F&&F.id!=""&&F.tla!=""){var H=F.tla;p.find("input[name=FrAirport]").attr("name","");b("<input>").attr({type:"hidden",name:"FrAirport",value:H}).appendTo(p);}}}}if(!I&&c.interstitial){publishing.wizard.turnOffInterstitial(p.find("button"),c);}if(!I){b(this).submitOmnitureTracking(this);p.find(".errors li").first().focus();}clearTimeout(u);return I;});},submitOmnitureTracking:function(d){var k="",g=document.getElementById("pageId");if(g){k=g.value;}else{if(window["dctk"]&&dctk.logging&&dctk.logging.pageName){k=dctk.logging.pageName;}}if(k!="page.TravelGuides.Landing"){var l={"flightOnly":"FltTab.","hotelOnly":"HotTab.","package":"PckgTab.","flightAndHotel":"PckgTab."};var m="";var f="";var n=b(d);var c=l[n.attr("class")];if(window["g_packageTreatment"]){if(g_packageTreatment=="Radio"){m="2";}else{if(g_packageTreatment=="Checkbox"){m="3";if(l[b(".current-lob").attr("data-lob")]){f=l[b(".current-lob").attr("data-lob")];}}else{if(g_packageTreatment=="RadioAndCheckbox"){m="4";if(l[b(".current-lob").attr("data-lob")]){f=l[b(".current-lob").attr("data-lob")];}}}}}else{if(window["g_wizHorizontalRadio"]){m=5;}else{if(window["g_wizHorizontalTab"]){m=6;}}}try{trackClick(d,"a",k+".SrchWzd."+f+c+m);}catch(h){}}},attachCalendar:function(c){return this.each(function(l,g){var d=b(g);var h=d.closest('[data-control="datepicker"]');var m=h.attr("data-end-date");var p=h.attr("data-start-date");var k;var n;var e;if(m){k=d.parents("form").field(m);}else{if(p){n=true;k=d.parents("form").field(p);}}if(k){k=k[0];}if(d.attr("data-canonic")=="fromDate"){e=c.startDateCalCallback;}var f=f||{};if(g_datepicker){if(c.maxDepartureDate&&true!==n){g_datepicker.register(g,g,DPDisplay,c.minPurchaseDate,c.maxDepartureDate,null,k,c.maxDateRange,n,e);}else{g_datepicker.register(g,g,DPDisplay,c.minPurchaseDate,c.maxPurchaseDate,null,k,c.maxDateRange,n,e);}}var q=d.parents("#multiDestinationsDiv");var o=c.defaultDurationDays;if(q&&q.length&&!isNaN(c.multiDestinationsDurationDays)){o=c.multiDestinationsDurationDays;}if(g_dateUpdater&&m&&k){g_dateUpdater.register(g,k,o,true);}});},triggerDatePicker:function(d,c){if(typeof d!="undefined"){if(c==true||d.blank()||d.val()==publishing.DATE_FORMAT){g_datepicker.pick(d[0]);}}},bindAndTrigger:function(c){return this.change(c).trigger("change",[true]);},clearErrors:function(){var c=b(this);c.find(".errors").each(function(){b(this).html("");});c.find(".error").each(function(){b(this).removeClass("error");});if(window.g_wizDesign!==undefined&&g_wizDesign=="responsive"){c.find(".invalid").removeClass("invalid");c.find(".validation-msg").addClass("hidden");}}});})(jQuery);expNamespace("publishing.validation");expNamespace("publishing.wizard.lobforms");publishing.wizard.lobforms.activities=function(a){var g=a.errorMessages;var d=$(publishing.WIZARD_CONTAINER_ID+" form.activities");var h=a.taConfig;var b=d.field("destination");var k=d.field("fromDate");var e=d.field("toDate");var l=[new publishing.validation.NotEmpty(b,g.destination),new publishing.validation.OptionalDate(k,g.startDate),new publishing.validation.OptionalDate(e,g.endDate),new publishing.validation.DateRange(k,e,g.bookingDateRange,true),new publishing.validation.DatePriorToAllowedDate(k,a.minPurchaseDate,g.startPriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(e,a.minPurchaseDate,g.endPriorToCurrentDate)];var f=new publishing.validation.ErrorRenderer(d,d.find("ul.errors"));var c=new publishing.validation.Validator(l,f);if(h){h.itemClickedEvent=publishing.wizard.preserveTA;}function m(n){d.triggerDatePicker(k,false);}d.initLobForm(a,c);if(publishing.wizard.TYPEAHEAD_ENABLED){publishing.wizard.typeahead(b,h,m);}};publishing.wizard.lobforms.insurance=function(a){var f=a.errorMessages;var c=$(publishing.WIZARD_CONTAINER_ID+" form.insurance");var g=a.taConfig;var l=c.field("fromDate");var d=c.field("toDate");var h=a.newDesign;var n=14;if(h){l.change(function(){var o=publishing.util.parseDate(l.val());if(o){d.val(publishing.util.formattedDate(publishing.DATE_FORMAT,n,o));}});}var k=[new publishing.validation.OptionalDate(l,f.startDate),new publishing.validation.OptionalDate(d,f.endDate),new publishing.validation.DateRange(l,d,f.bookingDateRange,true),new publishing.validation.DatePriorToAllowedDate(l,a.minPurchaseDate,f.startPriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(d,a.minPurchaseDate,f.endPriorToCurrentDate)];var e=new publishing.validation.ErrorRenderer(c,c.find("ul.errors"));var b=new publishing.validation.Validator(k,e);function m(){if(l.blank()||l.val()==publishing.DATE_FORMAT){$(l).click();}}c.initLobForm(a,b);};expNamespace("publishing.wizard.lobforms");publishing.wizard.lobforms.tgInsurance=function(q){var A=B("fname").substring(0,20);var s=B("lname").substring(0,20);var k=B("mail").substring(0,64);var g=q.errorMessages;var d=$(publishing.WIZARD_CONTAINER_ID+" form.insurance");var t=d.field("departureDate");var x=d.field("returnDate");var C=t.val();var e=q.defaultDurationDays;var o=d.field("applicantFirstName");var c=d.field("applicantLastName");var b=d.field("applicantEmail");var y=d.field("insurerFirstName");var n=d.field("insurerLastName");var l=d.field("insurerGender");var r=$("#insurance-InsurerDOB");var p=$("#InsurerDOB-Year");var m=$("#InsurerDOB-Month");var z=$("#InsurerDOB-Day");if(A!==""){o.val(A);y.val(A);}if(s!==""){c.val(s);n.val(s);}if(k!==""){b.val(k);}t.attr("maxlength",8);x.attr("maxlength",8);o.attr("maxlength",20);c.attr("maxlength",20);b.attr("maxlength",64);y.attr("maxlength",20);n.attr("maxlength",20);p.bind({change:function(){w();}});m.bind({change:function(){w();}});z.bind({change:function(){w();}});var u=q.dateFormat;function w(){var D=p.val()+m.val()+z.val();r.val(D);}var a=[new publishing.validation.NotEmpty(o,g.applicantFirstNameIsBlank),new publishing.validation.IsAlphabetOnly(o,g.applicantNameIsAlphabetOnly),new publishing.validation.NotEmpty(c,g.applicantLastNameIsBlank),new publishing.validation.IsAlphabetOnly(c,g.applicantNameIsAlphabetOnly),new publishing.validation.NotEmpty(b,g.applicantEmailIsBlank),new publishing.validation.NotEmpty(y,g.insurerFirstNamesBlank),new publishing.validation.IsAlphabetOnly(y,g.insurerNameIsAlphabetOnly),new publishing.validation.NotEmpty(n,g.insurerLastNameIsBlank),new publishing.validation.IsAlphabetOnly(n,g.insurerNameIsAlphabetOnly),new publishing.validation.NotEmpty(p,g.dobIsNotCorrect),new publishing.validation.NotEmpty(m,g.dobIsNotCorrect),new publishing.validation.NotEmpty(z,g.dobIsNotCorrect),new publishing.validation.NotEmpty(l,g.genderIsNotSelected),new publishing.validation.IsEmailAddress(b,g.isNotCorrectEmailAddress),new publishing.validation.MandatoryDate(t,g.departureDate),new publishing.validation.DateRange(t,x,g.departureDateAndReturnDatesTooFarApart,true),new publishing.validation.DatePriorToAllowedDate(t,q.minPurchaseDate,g.departurePriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(x,q.minPurchaseDate,g.departurePriorToCurrentDate),new publishing.validation.DatesNotToManyDaysAppart(t,x,q.maxDateRange,g.departureDateAndReturnDatesTooFarApart)];
var v=new publishing.validation.ErrorRenderer(d,d.find("ul.errors"));var f=new publishing.validation.Validator(a,v);d.initLobForm(q,f,this.onSuccess);function h(E){var F=E.otadata;var D=F.applicant;var H=F.insurer;var G='<?xml version="1.0" encoding="utf-8" ?><otadata><p>'+F.p+"</p><homepage>"+F.homepage+"</homepage>";G+="<hoken_siki>";G+=F.departureDate;G+="</hoken_siki>";G+="<hoken_shuki>";G+=F.returnDate;G+="</hoken_shuki>";G+="<keiyaku>";G+="<sei>";G+=D.lastName;G+="</sei>";G+="<mei>";G+=D.firstName;G+="</mei>";G+="<email>";G+=D.email;G+="</email>";G+="</keiyaku>";G+="<hihoken>";G+="<sei>";G+=H.lastName;G+="</sei>";G+="<mei>";G+=H.firstName;G+="</mei>";G+="<sex>";G+=H.sex;G+="</sex>";G+="<birth>";G+=H.birth;G+="</birth>";G+="</hihoken>";G+="</otadata>";return G;}$("#tg-insurance-form").submit(function(){var D=f===undefined?true:f.validate();var E={"otadata":{"p":q.bootvalue,"homepage":q.homepage,"departureDate":t.val().replace(/\//g,""),"returnDate":x.val().replace(/\//g,""),"applicant":{"lastName":c.val(),"firstName":o.val(),"email":b.val()},"insurer":{"lastName":n.val(),"firstName":y.val(),"sex":$("input[name=InsurerGender]:radio:checked").val(),"birth":r.val()}}};var H=h(E);var G=encodeURI(H);if(D){var F=jQuery("<form>",{"action":q.actionURL,"method":"POST","target":"_blank"}).append(jQuery("<input>",{"name":"linkData","value":G,"type":"hidden"}));F.appendTo(document.body).submit();}return false;});function B(D){D=D.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var F=new RegExp("[\\?&]"+D+"=([^&#]*)"),E=F.exec(location.search);return E==null?"":decodeURIComponent(E[1].replace(/\+/g," "));}};expNamespace("publishing.wizard.lobforms");publishing.wizard.lobforms.tuneInsurance=function(k){var e=k.errorMessages;var c=$(publishing.WIZARD_CONTAINER_ID+" form.insurance");var m=c.field("departureDate");var s=m.val();var t=c.find("select[name=Destination]");var q=c.field("coverage");var r=c.field("planType");var d=k.defaultDurationDays;var l=k.annualDuration;var p=c.field("returnDate");var n=k.dateFormat;var a=[new publishing.validation.NotEmpty(t,e.destinationIsBlank),new publishing.validation.NotEmpty(q,e.coverageIsBlank),new publishing.validation.NotEmpty(r,e.typeOfPlanIsBlank),new publishing.validation.MandatoryDate(m,e.departureDate),new publishing.validation.DateRange(m,p,e.departurePriorToCurrentDate,true),new publishing.validation.DatePriorToAllowedDate(m,k.minPurchaseDate,e.departurePriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(p,k.minPurchaseDate,e.departurePriorToCurrentDate),new publishing.validation.DatesNotToManyDaysAppart(m,p,k.maxDateRange,e.checkInAndOutDatesTooFarApart)];var o=new publishing.validation.ErrorRenderer(c,c.find("ul.errors"));var f=new publishing.validation.Validator(a,o);function b(){g(t);g(q);g(r);var v=r.find(":selected");if(v[0].value=="INSB"){r.change();}}m.change(function(){h();});t.bind({click:function(){var y=t.position();var x=30;var v=y.left+t.width()+25;var w=y.top-x+"px";v+="px";u(t,w,v);return false;},change:function(){$("#PopUp").fadeOut();g(t);}});q.bind({change:function(){g(q);}});r.bind({change:function(){g(r);var v=r.find(":selected");if(v[0].value=="INSB"){h();$("#insurance-returnDate-label").parent().parent().hide();}else{h();$("#insurance-returnDate-label").parent().parent().show();}}});$("#Question").css({"cursor":"pointer"}).click(function(){var y=$("#Question").position();var x=30;var v=y.left+$("#Question img").width()+$("#Question span").width()+25;var w=y.top-x+"px";v+="px";u($("#Question"),w,v);return false;});function g(y){var v=y.find(":selected");var x=y.parent().next();var w=x.find(":first-child");w.text(y.find(":selected").text()).parent().addClass("changed");}function h(){var w=publishing.util.parseDate(m.val());if(w){var v=r.find(":selected");var x=d;if(v[0].value=="INSB"){x=l;}p.val(publishing.util.formattedDate(n,x,w));}}function u(v,w,x){jQuery(document).one("click",function(){jQuery("#PopUp").fadeOut();});$("#PopUp").css({"display":"block","top":w,"left":x}).click(function(){return false;});$(".Close").css({"cursor":"pointer"}).click(function(){$("#PopUp").fadeOut();});}b();c.initLobForm(k,f,this.onSuccess);};expNamespace("publishing.validation");expNamespace("publishing.wizard.lobforms");publishing.wizard.lobforms.cruise=function(n){var f=n.errorMessages;var c=$(publishing.WIZARD_CONTAINER_ID+" form.cruise");var b=c.find(".section-cruise-age-group");var l=b.field("childrenAge");var s=b.find(".number-of-travellers");var g=c.find("#cruiseStartDate");var k=c.find("#cruiseStartDateInput");var q=c.find("#cruiseEndDateInput");var d=g.attr("data-first-valid-date");var t=g.attr("data-last-valid-date");var m=new Date(g.attr("data-last-valid-date"));m.setDate(m.getDate()+1);var o=h(m);function h(x){var w=new Date(x);var u=w.getUTCDate(),y=w.getUTCMonth()+1,v=w.getUTCFullYear();return y+"/"+u+"/"+v;}var a=[new publishing.validation.ChildrenAgeRequired(l,f.childrenAge),new publishing.validation.TotalBetween(1,5,s,f.totalNumberOfTravellers)];if(n.errorMessages.invalidDateRange){var p=n.errorMessages.invalidDateRange;p=p.replace("$earliestFill",d);p=p.replace("$latestFill",t);n.errorMessages.invalidDateRange=p;}if(n.isDatePicker===1){a.push(new publishing.validation.OptionalDateWithEmptyString(k,f.invalidDateFormat));a.push(new publishing.validation.OptionalDateWithEmptyString(q,f.invalidDateFormat));a.push(new publishing.validation.DatePriorToAllowedDate(k,d,f.invalidDateRange));a.push(new publishing.validation.DatePastMaxPurchaseDate(o,q,f.invalidDateRange));}var r=new publishing.validation.ErrorRenderer(c,c.find("ul.errors"));var e=new publishing.validation.Validator(a,r);c.initLobForm(n,e);publishing.wizard.initRoom(b,a,n.errorMessages);};expNamespace("publishing.wizard.lobforms");publishing.wizard.lobforms.carOnly=function(v){var n=v.errorMessages;var f=$(publishing.WIZARD_CONTAINER_ID+" form.carOnly");var J=new publishing.wizard.lobforms.carOnly.AdditionalOptions(f);var u=v.taConfig;var w=v.driversAgeLimit;var o=f.field("street");var B=f.field("city");var K=f.field("state");var m=f.field("zip");var p=f.field("destination");var e=f.field("dropOffLocation");var F=f.field("fromDate");var A=f.field("toDate");var b=f.field("fromTime");var G=f.field("toTime");var d=f.find("select[name=SearchType]");var r=f.field("distance");var x=f.find("input[name=DiffDropLoc]");var C=e.attr("data-default");var q=$("#carsDropOff");var H=$("#showHideDropOff");var D=$("#carOnly-hideSpecialEquipment");var t=$("#carOnly-showSpecialEquipment");var I=$("#carOnly-specialEquipment");var k=$("#C-driversAgeCheck");var c=$("#C-driversAgeLabel");var g=$("#C-driversAge");var E=$("#C-driversAgeFields");if(window.g_wizDesign!==undefined&&g_wizDesign=="tabbed"){H.change(function(){if(H.is(":checked")){q.show();}else{q.hide();}});D.click(function(){D.hide();t.show();I.hide();});t.click(function(){D.show();t.hide();I.show();});}var a=[new publishing.validation.NotEmpty(o,n.street),new publishing.validation.NotEmpty(B,n.city),new publishing.validation.NotEmpty(K,n.state),new publishing.validation.NotEmpty(m,n.zip),new publishing.validation.NotEmpty(p,n.pickUpLocation),new publishing.validation.MandatoryDate(F,n.pickUpDate),new publishing.validation.MandatoryDate(A,n.dropOffDate),new publishing.validation.DateRange(F,A,n.bookingDateRange,true),new publishing.validation.DatePriorToAllowedDate(F,v.minPurchaseDate,n.pickUpPriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(A,v.minPurchaseDate,n.dropOffPriorToCurrentDate),new publishing.validation.PickUpHrsBeforeDropOffHrs(F,A,b,G,n.Time2HrDiffMessage)];if(v.checkForResults){a.push(new publishing.validation.NoResultsForSelected(p,n.noResultsForSelected));a.push(new publishing.validation.NoResultsForSelected(e,n.noResultsForSelected));}var z=new publishing.validation.ErrorRenderer(f,f.find("ul.errors"));var l=new publishing.validation.Validator(a,z);f.initLobForm(v,l,function(){J.populateChosenSpecialEquipment();if(C==e.val()){e.val("");}});function h(){var N=$(this).val();
var L=N=="AIRPORT";var O=N=="PLACE";var M=N=="USADDRESS";o.parents("fieldset").toggle(M);B.parents("fieldset").toggle(M);K.parents("fieldset").toggle(M);m.parents("fieldset").toggle(M);p.parents("fieldset").toggle(!M);r.parents("fieldset").toggle(O);if(!v.taConfigD.enableCarOffairportOnewaySearch){e.parents("fieldset").toggle(L);}x.val(L?"1":"0");}function s(L){if(v.taConfigD.enableCarOffairportOnewaySearch){return;}$("#C-SearchType").val("PLACE");if(L.type==null||L.type!="AIRPORT"){if($("#C-dropOffLocation")!=null){$("#C-dropOffLocation").val(v.sameAsPickup);}if($("#C-dropOffLocation-label")!=null){$("#C-dropOffLocation-label").hide();}if($("#showHideDropOff")!=null){$("#showHideDropOff").hide();}if($(".showHideDropOffText")!=null){$(".showHideDropOffText").hide();}}else{$("#C-SearchType").val("AIRPORT");if($("#C-dropOffLocation-label")!=null){$("#C-dropOffLocation-label").show();}if($("#showHideDropOff")!=null){$("#showHideDropOff").show();}if($(".showHideDropOffText")!=null){$(".showHideDropOffText").show();}}}function y(){var O=document.getElementById("C-SearchType");var N=document.getElementById("C-SearchType-label");var L=document.getElementById("C-Distance");var M=document.getElementById("C-Distance-label");if(O!=null){O.style.display="none";}if(N!=null){N.style.display="none";}if(L!=null){L.style.display="none";}if(M!=null){M.style.display="none";}$("#C-destination").val("");$("#C-dropOffLocation").val(v.sameAsPickup);}if(u){u.itemClickedEvent=publishing.wizard.preserveTA;}d.bindAndTrigger(h);if(publishing.wizard.TYPEAHEAD_ENABLED&&v.taConfigO!=undefined&&v.taConfigD!=undefined){publishing.wizard.typeahead(f.field("destination"),v.taConfigO,s);publishing.wizard.typeahead(f.field("dropOffLocation"),v.taConfigD);y();}if(E.length>0){k.on("click",function(){c.toggleClass("hidden");});g.on("keypress",function(M){var L=typeof g.val()=="string"?g.val():"25";return M.keyCode==8||M.charCode>=48&&M.charCode<=57&&L.length<2;});a.push(new publishing.validation.IncorrectDriversAge(g,w,n));}};publishing.validation.IncorrectDriversAge=function(b,a,c){this.apply=function(){var e=b.val()!=""?parseInt(b.val()):"",f=$("#C-driversAgeCheck");if(!f.is(":checked")){if(e==""){var d=new publishing.validation.Error(b,c.emptyDriversAge);return new publishing.validation.Result(false,d);}else{if(e<a){var d=new publishing.validation.Error(b,c.incorrectDriversAge);return new publishing.validation.Result(false,d);}else{return new publishing.validation.Result(true);}}}else{return new publishing.validation.Result(true);}};return this;};publishing.wizard.lobforms.carOnly.AdditionalOptions=function(f){var b=f.find("#carOnly-additionalOptions");var a=f.find("a[name=carOnly-showAdditionalOptions]");var e=f.find("a[name=carOnly-hideAdditionalOptions]");var c=f.find("input[name=Equipment]");var d=f.find(".availabilityAndCostInfoLink");var g=f.find(".availabilityAndCostInfoContent");this.populateChosenSpecialEquipment=function(){var h=b.find("input[type=checkbox]").filter(":checked");var k=$.map(h,function(m,l){return m.value;});c.val(k.join(""));};publishing.wizard.lobforms.additionalOptions({showAdditionalOptionsField:a,additionalOptionsContainer:b,hideAdditionalOptionsField:e,infoLinkField:d,infoContainer:g});};expNamespace("publishing.wizard.lobforms");publishing.wizard.lobforms.flightAndCar=function(p){var d=$(publishing.WIZARD_CONTAINER_ID+" form.flightAndCar");var h=p.errorMessages;var l=d.field("origin");var b=d.field("destination");var k=d.field("fromDate");var s=d.field("toDate");var e=d.field("numChildren");var r=d.find(".section-flight-age-group");var m=r.field("childrenAge");var u=r.find(".number-of-travellers");var n=d.find(".section-infants-pref");var x=d.find("[data-canonic='numAdults']");var v=d.find("[data-canonic='numSeniors']");var q=d.find("[data-canonic='numChildren']");var o=p.taConfig;var g=d.find("input[name=addFlightPackage]");var w=d.find("input[name=addHotelPackage]");var c=d.find("input[name=addCarPackage]");publishing.wizard.setUpPackageCheckboxes(g,w,c);var a=[new publishing.validation.NotEmpty(l,h.departureCity),new publishing.validation.NotEmpty(b,h.destinationCity),new publishing.validation.CityBetween(l,b,h.sameCity),new publishing.validation.MandatoryDate(k,h.departureDate),new publishing.validation.MandatoryDate(s,h.returnDate),new publishing.validation.DateRange(k,s,h.bookingDateRange,true),new publishing.validation.DatePriorToAllowedDate(k,p.minPurchaseDate,h.departurePriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(s,p.minPurchaseDate,h.returnPriorToCurrentDate),new publishing.validation.ChildrenMustNotBeAlone(x,v,q,h.childrenMustNotBeAlone),new publishing.validation.TotalBetween(1,6,u,h.totalNumberOfTravellers),new publishing.validation.DatesNotToManyDaysAppart(k,s,p.maxDateRange,h.checkInAndOutDatesTooFarApart)];var t=new publishing.validation.ErrorRenderer(d,d.find("ul.errors"));var f=new publishing.validation.Validator(a,t);d.initLobForm(p,f);publishing.wizard.initRoom(d,a,p.errorMessages);m.add(e).bindAndTrigger(publishing.wizard.common.flight.accompaniedInfantListener(m,n));if(o){o.itemClickedEvent=function(z){if(z&&z.On){var y=z.selectedItem;if(y&&y.data&&y.id=="FC-destination"){publishing.wizard.packageLobData.TLA=y.data.a;publishing.wizard.packageLobData.MultiCity=y.data.amc;}}publishing.wizard.preserveTA(z);};}publishing.wizard.setupPackageRadioButtons(d);};expNamespace("publishing.wizard.lobforms");expNamespace("publishing.wizard.lobforms.common");publishing.wizard.lobforms.flightHotelAndCar=function(b){var a=$(publishing.WIZARD_CONTAINER_ID+" form.flightHotelAndCar");publishing.wizard.lobforms.common.flightHotelAndCar(a,b);};publishing.wizard.lobforms.flightAndHotel=function(b){var a=$(publishing.WIZARD_CONTAINER_ID+" form.flightAndHotel");publishing.wizard.lobforms.common.flightHotelAndCar(a,b);};publishing.wizard.lobforms.trainAndHotel=function(b){var a=$(publishing.WIZARD_CONTAINER_ID+" form.trainAndHotel");publishing.wizard.lobforms.common.flightHotelAndCar(a,b);};publishing.wizard.lobforms.common.flightHotelAndCar=function(g,x){var H=g.find("#flightAndHotel-additionalOptions");var a=g.find("a[name=flightAndHotel-showAdditionalOptions]");var p=g.find("a[name=flightAndHotel-hideAdditionalOptions]");var o=x.errorMessages;var B=x.diableCkiPopout||false;var b=x.taConfigO;var s=x.taConfigD;var t=g.field("origin");var e=g.field("destination");var c=g.field("dest-region");var y=g.field("dest-city");var q=g.field("fromDate");var A=g.field("toDate");var r=g.field("partialHotelBooking");var E=g.field("flexibleFromDate");var u=g.field("flexibleToDate");var G=g.find(".rooms .room");var l=g.field("numRooms");var D=G.find(".number-of-travellers");var h=G.field("numChildren");var v=g.find(".section-children-ages select");var w=g.find(".section-infants-pref");var z=g.find(".section-partial-hotel-booking-date");var n=g.find("input[name=addFlightPackage]");var F=g.find("input[name=addHotelPackage]");var f=g.find("input[name=addCarPackage]");publishing.wizard.lobforms.additionalOptions({showAdditionalOptionsField:a,additionalOptionsContainer:H,hideAdditionalOptionsField:p});publishing.wizard.setUpPackageCheckboxes(n,F,f);publishing.wizard.lobforms.common.flightHotelAndCar_ValidationRules=[new publishing.validation.NotEmpty(t,o.departureCity),new publishing.validation.NotEmpty(e,o.destinationCity),new publishing.validation.CityBetween(t,e,o.sameCity),new publishing.validation.NotSelect(c,o.destinationCity),new publishing.validation.NotSelectCity(c,y,o.destinationCity),new publishing.validation.OptionalDate(q,o.departureDate),new publishing.validation.OptionalDate(A,o.returnDate),new publishing.validation.MandatoryDate(E,o.flexibleFromDate),new publishing.validation.MandatoryDate(u,o.flexibleToDate),new publishing.validation.DateRange(q,A,o.bookingDateRange),new publishing.validation.DateRange(E,u,o.bookingDateRange),new publishing.validation.DatePriorToAllowedDate(q,x.minPurchaseDate,o.departurePriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(A,x.minPurchaseDate,o.returnPriorToCurrentDate),new publishing.validation.DateBetween(E,q,A,o.partialBookingDateSequenceMessage),new publishing.validation.DateBetween(u,q,A,o.partialBookingDateSequenceMessage),new publishing.validation.TotalBetween(1,6,D,o.totalNumberOfTravellers),new publishing.validation.DatesNotToManyDaysAppart(q,A,x.maxDateRange,o.checkInAndOutDatesTooFarApart),new publishing.validation.DatePastMaxPurchaseDate(x.maxPurchaseDate,q,o.datePastMaxDate),new publishing.validation.DatePastMaxPurchaseDate(x.maxPurchaseDate,A,o.datePastMaxDate)];
publishing.wizard.setupPackageRadioButtons(g);publishing.wizard.setUpAddRoomLinks(g);function d(){if(!publishing.wizard.BIASED_FOR_HOTELS_PER_CITY){return;}var J=g.field("destination").val();var I=$.grep(publishing.wizard.hotelsForCities,function(L,K){return L.cityId==J;})[0];g.append($('<input type="hidden" name="HotelIDs" value="'+I.hotelIds.join()+'" />'));}var C=new publishing.validation.ErrorRenderer(g,g.find("ul.errors"));var m=new publishing.validation.Validator(publishing.wizard.lobforms.common.flightHotelAndCar_ValidationRules,C);publishing.wizard.lobforms.flightHotel_DatesChanged=function(){g.triggerDatePicker(A,true);};g.initLobForm(x,m,d);publishing.wizard.initRooms(g,G,publishing.wizard.lobforms.common.flightHotelAndCar_ValidationRules,o,x);v.add(h).bindAndTrigger(publishing.wizard.common.flight.accompaniedInfantListener(v,w));r.toggleSection(z);if(b){b.itemClickedEvent=publishing.wizard.preserveTA;}if(s){s.itemClickedEvent=publishing.wizard.preserveTA;}function k(I){if(B==false){g.triggerDatePicker(q,false);}}if(publishing.wizard.TYPEAHEAD_ENABLED){if(publishing.wizard.FLIGHT_AND_HOTEL_DESTINATION_IS_VISIBLE){publishing.wizard.typeahead(g.field("origin"),b);publishing.wizard.typeahead(g.field("destination"),s,k);}else{publishing.wizard.typeahead(g.field("origin"),b,k);publishing.wizard.typeahead(g.field("destination"),s);}}publishing.wizard.fillCheckInDateAuto(r,x);};expNamespace("publishing.wizard.lobforms");expNamespace("publishing.wizard.lobforms.flightOnly");expNamespace("publishing.wizard.lobforms.flightOnly.jp");publishing.wizard.lobforms.flightOnly.jp.validationRules=function(k,l){var g=l.errorMessages;var u=k.find(".multipleDestinations").find("[dataField='origin']");var m=k.find(".multipleDestinations").find("[dataField='destination']");var a=k.find(".multipleDestinations").field("fromDate");if(a.length==0){a=k.find(".multipleDestinations").field("date1");}var B=k.find(".oneWayOrReturn").find("[dataField='origin']");var h=k.find(".oneWayOrReturn").find("[dataField='destination']");var y=k.find(".oneWayOrReturn").field("fromDate");var s=k.field("toDate");var r=k.find(".section-flight-age-group");var w=r.find(".number-of-travellers");var A=r.find("[data-canonic='numAdults']");var x=r.find("[data-canonic='numSeniors']");var p=r.find("[data-canonic='numChildren']");var n=k.find(".oneWayOrReturn").find("[dataField='deptRegion']");var b=k.find(".oneWayOrReturn").find("[dataField='destRegion']");var d=k.find(".oneWayOrReturn").find("[dataField='stopOverRegion']");var e=k.find(".oneWayOrReturn").find("[dataField='deptDestination']");var f=k.find(".oneWayOrReturn").find("[dataField='destDestination']");var c=k.find(".oneWayOrReturn").find("[dataField='stopOverDestination']");var t=k.find(".multipleDestinations").find("select[dataField='region']");var z=k.find(".multipleDestinations").find("select[dataField='destination']");var o=k.find(".stopOverField").find("[dataField='stopOverSearchField']");var q=k.find(".stopOverField").field("stopOverFromDate");var v=k.find(".stopOverField").field("stopOverToDate");return[new publishing.validation.NotSelect(n,g.selectError),new publishing.validation.NotSelect(b,g.selectError),new publishing.validation.NotSelect(d,g.selectError),new publishing.validation.NotSelectCity(n,e,g.selectError),new publishing.validation.NotSelectCity(b,f,g.selectError),new publishing.validation.NotSelectCity(d,c,g.selectError),new publishing.validation.NotEmpty(o,g.keyWordError),new publishing.validation.MandatoryDate(v,g.returnDate),new publishing.validation.DateRange(s,v,g.bookingDateRange,true),new publishing.validation.DatePriorToAllowedDate(v,l.minPurchaseDate,g.returnPriorToCurrentDate),new publishing.validation.DatePastMaxPurchaseDate(l.maxPurchaseDate,v,g.datePastMaxDate),new publishing.validation.MandatoryDate(q,g.departureDate),new publishing.validation.DateRange(q,s,g.bookingDateRange,true),new publishing.validation.DatePriorToAllowedDate(q,l.minPurchaseDate,g.departurePriorToCurrentDate),new publishing.validation.DatePastMaxPurchaseDate(l.maxPurchaseDate,q,g.datePastMaxDate),new publishing.validation.DateRange(y,q,g.priorToDeptDate),new publishing.validation.NotSelect(t,g.selectError),new publishing.validation.NotSelect(z,g.selectError),new publishing.validation.NotEmpty(u,g.departureCity),new publishing.validation.NotEmpty(m,g.destinationCity),new publishing.validation.CityBetween(u,m,g.sameCity),new publishing.validation.MandatoryDate(a,g.departureDate),new publishing.validation.DatePriorToAllowedDate(a,l.minPurchaseDate,g.departurePriorToCurrentDate),new publishing.validation.NotEmpty(B,g.departureCity),new publishing.validation.NotEmpty(h,g.destinationCity),new publishing.validation.CityBetween(B,h,g.sameCity),new publishing.validation.MandatoryDate(y,g.departureDate),new publishing.validation.MandatoryDate(s,g.returnDate),new publishing.validation.DateRange(y,s,g.bookingDateRange,true),new publishing.validation.DatePriorToAllowedDate(y,l.minPurchaseDate,g.departurePriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(s,l.minPurchaseDate,g.returnPriorToCurrentDate),new publishing.validation.TotalBetween(1,l.maximumNumberOfTravellersAllowed,w,g.totalNumberOfTravellers),new publishing.validation.DatePastMaxPurchaseDate(l.maxPurchaseDate,y,g.datePastMaxDate),new publishing.validation.DatePastMaxPurchaseDate(l.maxPurchaseDate,s,g.datePastMaxDate),new publishing.validation.ChildrenMustNotBeAlone(A,x,p,g.childrenMustNotBeAlone)];};publishing.validation.MultiDestLegNotEmpty=function(b,f,e,a){function c(){return !b.blank();}function d(){var g=false;$.each(b,function(){g=g||$(this).is(":hidden");});return g;}this.apply=function(){var g=((f.length==0||f.val()=="City or airport"||f.val()==""||f.val()==undefined)&&(e.length==0||e.val()=="City or airport"||e.val()==""||e.val()==undefined));if(g){return new publishing.validation.Result(true);}if(d()||c()){return new publishing.validation.Result(true);}else{var h=new publishing.validation.Error(b,a);return new publishing.validation.Result(false,h);}};return this;};publishing.validation.MultiDestLegMandatoryDate=function(d,b,g,f){function a(){return d.val()!=""&&d.val()!=publishing.DATE_FORMAT;}function c(){return publishing.util.parseDate(d.val())!=null;}function e(){var h=false;$.each(d,function(){h=h||$(this).is(":hidden");});return h;}this.apply=function(){var h=((g.val()=="City or airport"||g.val()==""||g.val()==undefined)&&(f.val()=="City or airport"||f.val()==""||f.val()==undefined));if(h){return new publishing.validation.Result(true);}if(e()){return new publishing.validation.Result(true);}else{if(!a()){return new publishing.validation.Result(false,new publishing.validation.Error(d,b.mandatory));}else{if(!c()){return new publishing.validation.Result(false,new publishing.validation.Error(d,b.dateFormat));}else{return new publishing.validation.Result(true);}}}};return this;};publishing.wizard.lobforms.flightOnly.validationRules=function(f,g){var d=g.errorMessages;var p=f.find(".multipleDestinations").field("origin");var k=f.find(".multipleDestinations").field("destination");var b=f.find(".multipleDestinations").field("fromDate");if(b.length==0){b=f.find(".multipleDestinations").field("date1");}var w=f.find(".oneWayOrReturn").field("origin");var e=f.find(".oneWayOrReturn").field("destination");var u=f.find(".oneWayOrReturn").field("fromDate");var n=f.field("toDate");var m=f.find(".section-flight-age-group");var q=m.find(".number-of-travellers");var v=m.find("[data-canonic='numAdults']");var s=m.find("[data-canonic='numSeniors']");var l=m.find("[data-canonic='numChildren']");var a=[new publishing.validation.NotEmpty(p,d.departureCity),new publishing.validation.NotEmpty(k,d.destinationCity),new publishing.validation.CityBetween(p,k,d.sameCity),new publishing.validation.MandatoryDate(b,d.departureDate),new publishing.validation.DatePriorToAllowedDate(b,g.minPurchaseDate,d.departurePriorToCurrentDate),new publishing.validation.NotEmpty(w,d.departureCity),new publishing.validation.NotEmpty(e,d.destinationCity),new publishing.validation.CityBetween(w,e,d.sameCity),new publishing.validation.MandatoryDate(u,d.departureDate),new publishing.validation.MandatoryDate(n,d.returnDate),new publishing.validation.DateRange(u,n,d.bookingDateRange,true),new publishing.validation.DatePriorToAllowedDate(u,g.minPurchaseDate,d.departurePriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(n,g.minPurchaseDate,d.returnPriorToCurrentDate),new publishing.validation.TotalBetween(1,g.maximumNumberOfTravellersAllowed,q,d.totalNumberOfTravellers),new publishing.validation.DatePastMaxPurchaseDate(g.maxPurchaseDate,u,d.datePastMaxDate),new publishing.validation.DatePastMaxPurchaseDate(g.maxPurchaseDate,n,d.datePastMaxDate),new publishing.validation.ChildrenMustNotBeAlone(v,s,l,d.childrenMustNotBeAlone)];
var r=2;while(r<=$(".multipleDestinations .section").length){var h=f.find(".multipleDestinations .section:nth-child("+r+")");var o=h.field("fromAirport"+r);var c=h.field("toAirport"+r);var t=h.field("date"+r);a.push(new publishing.validation.MultiDestLegNotEmpty(o,o,c,d.departureCity),new publishing.validation.MultiDestLegNotEmpty(c,o,c,d.destinationCity),new publishing.validation.CityBetween(o,c,d.sameCity),new publishing.validation.MultiDestLegMandatoryDate(t,d.departureDate,o,c),new publishing.validation.DatePriorToAllowedDate(t,g.minPurchaseDate,d.departurePriorToCurrentDate));r++;}return a;};publishing.wizard.lobforms.flightOnly.addChangeListener=function(c){var b="F-fromAirport"+c+"-"+c,a="hidden-tla-F-fromAirport"+c+"-"+c,d="F-toAirport"+c+"-"+c,e="hidden-tla-F-toAirport"+c+"-"+c;jQuery("#"+a).attr("value",urlHandler.parseAirportCode(jQuery("#"+b).prop("value"),true));jQuery("#"+b).bind("change",function(){jQuery("#"+a).attr("value","");});jQuery("#"+e).attr("value",urlHandler.parseAirportCode(jQuery("#"+d).prop("value"),true));jQuery("#"+d).bind("change",function(){jQuery("#"+e).attr("value","");});};function publishingWizardPackageTypeAheadOriginCallback(a){publishingWizardCommonTypeAheadCallback(a,"FH-origin");}function publishingWizardPackageTypeAheadDestinationCallback(a){publishingWizardCommonTypeAheadCallback(a,"FH-destination");}function publishingWizardFlightOnlyTypeAheadOriginCallback(a){publishingWizardCommonTypeAheadCallback(a,"F-origin");}function publishingWizardFlightOnlyTypeAheadDestinationCallback(a){var b=a.attr("data-data")?JSON.parse(a.attr("data-data")):null;if(b){publishing.wizard.packageLobData.TLA=b.a;publishing.wizard.packageLobData.MultiCity=b.amc;}publishingWizardCommonTypeAheadCallback(a,"F-destination");}function publishingWizardHotelOnlyTypeAheadDestinationCallback(a){publishingWizardCommonTypeAheadCallback(a,"H-destination");}function publishingWizardActivityOnlyTypeAheadDestinationCallback(a){publishingWizardCommonTypeAheadCallback(a,"A-destination");}function publishingWizardCommonTypeAheadCallback(a,b){publishing.wizard.TLA=publishing.wizard.TLA||{};publishing.wizard.TLA[b]=a.data("data")?a.data("data").a:a.data("value");a.inputId=b;publishing.wizard.preserveTA(a);}publishing.wizard.lobforms.flightOnly.init=function(k,w,b,y){var J=k.find("#flightOnly-additionalOptions");var a=k.find("a[name=flightOnly-showAdditionalOptions]");var o=k.find("a[name=flightOnly-hideAdditionalOptions]");var p=k.find(".moreInfoLink");var d=k.find(".moreInfoContent");var v=w.taConfig;var z=w.diableCkiPopout||false;var e=k.find("input[name=TripType]");var A=k.find("#flightPassengers");var H=k.find("#multiFlightPassengers");var c=k.find("[name=TripType][value=RoundTrip]");var h=k.find("[name=TripType][value=Multicity]");var n=k.find(".section-returning-time-details");var E=k.find(".section-going-details");var D=k.find(".oneWayOrReturn");var r=k.find(".multipleDestinations");var u=k.find(".section-infants-pref");var l=k.field("numChildren");var g=k.find(".LOBCheckBoxes");var G=k.find(".multipleDestinations .datetime");var x=k.find(".section-flight-age-group");var t=x.field("childrenAge");var B=new publishing.validation.ErrorRenderer(k,k.find("ul.errors"));var m=new publishing.validation.Validator(b,B);var I=k.find("input[name=addHotelPackage]");var f=k.find("input[name=addCarPackage]");if(I&&f){I.click(function(){publishing.wizard.addPackageToFlight(f,I,this);});f.click(function(){publishing.wizard.addPackageToFlight(f,I,this);});}if(v){v.itemClickedEvent=function(L){if(L&&L.On){var K=L.selectedItem;if(K&&K.data&&L.inputId=="F-destination"){publishing.wizard.packageLobData.TLA=K.data.a;publishing.wizard.packageLobData.MultiCity=K.data.amc;}}publishing.wizard.preserveTA(L);tlaSelector.selectedTypeAhead(L.inputId,"hidden-tla-"+L.inputId,L);};}function s(L){if(h.is(":checked")){var K=k.find("div.internationalFlightFieldsContainer").find(".multipleDestinations").field("fromDate");if(z==false){k.triggerDatePicker(K,false);}}else{var M=k.find("div.internationalFlightFieldsContainer").find(".oneWayOrReturn").field("fromDate");if(z==false){k.triggerDatePicker(M,false);}}}publishing.wizard.lobforms.flightOnly_DatesChanged=function(){if(c.is(":checked")){var K=k.find("div.internationalFlightFieldsContainer").find(".oneWayOrReturn").field("toDate");k.triggerDatePicker(K,true);}};k.initLobForm(w,m,y);publishing.wizard.initRoom(x,b,w.errorMessages);publishing.wizard.lobforms.additionalOptions({showAdditionalOptionsField:a,additionalOptionsContainer:J,hideAdditionalOptionsField:o,infoLinkField:p,infoContainer:d});function q(){var K=null;var M=function(){var N=h.is(":checked");r.toggle(N);D.toggle(!N);n.toggle(c.is(":checked"));if(N){A.addClass("hidden");H.removeClass("hidden");D.before(r);publishing.util.preserveValues(r.find("[data-canonic]"));}else{if(K!=null&&K.value=="Multicity"){r.before(D);publishing.util.preserveValues(D.find("[data-canonic]"));}}if(!N){A.removeClass("hidden");H.addClass("hidden");}B.clearAll();K=e.filter(":checked")[0];};var L=function(){var N=h.is(":checked");r.toggle(N);D.toggle(!N);if(c.is(":checked")){E.removeClass("variable-width");E.addClass("largehalfWidth");$("#flightAndHotelSearch").show();}else{E.removeClass("largehalfWidth");E.addClass("variable-width");$("#flightAndHotelSearch").hide();}n.toggle(c.is(":checked"));g.toggle(c.is(":checked"));if(N){A.addClass("hidden");H.removeClass("hidden");D.before(r);publishing.util.preserveValues(r.find("[data-canonic]"));}else{if(K!=null&&K.value=="Multicity"){r.before(D);publishing.util.preserveValues(D.find("[data-canonic]"));}}if(!N){A.removeClass("hidden");H.addClass("hidden");}B.clearAll();K=e.filter(":checked")[0];};e.bindAndTrigger(L);}q();t.add(l).bindAndTrigger(publishing.wizard.common.flight.accompaniedInfantListener(t,u));if(publishing.wizard.TYPEAHEAD_ENABLED){publishing.wizard.typeahead(k.field("origin"),v,s);publishing.wizard.typeahead(k.field("destination"),v);jQuery("#hidden-tla-F-origin").attr("value",urlHandler.parseAirportCode(jQuery("#F-origin").prop("value"),true));jQuery("#F-origin").bind("change",function(){jQuery("#hidden-tla-F-origin").attr("value","");});jQuery("#hidden-tla-F-destination").attr("value",urlHandler.parseAirportCode(jQuery("#F-destination").prop("value"),true));jQuery("#F-destination").bind("change",function(){jQuery("#hidden-tla-F-destination").attr("value","");});jQuery("#hidden-tla-F-origin-1").attr("value",urlHandler.parseAirportCode(jQuery("#F-origin-1").prop("value"),true));jQuery("#F-origin-1").bind("change",function(){jQuery("#hidden-tla-F-origin-1").attr("value","");});jQuery("#hidden-tla-F-destination-1").attr("value",urlHandler.parseAirportCode(jQuery("#F-destination-1").prop("value"),true));jQuery("#F-destination-1").bind("change",function(){jQuery("#hidden-tla-F-destination-1").attr("value","");});var F=jQuery("#F-origin-1, input[id^=F-fromAirport]").length;for(var C=2;C<=F;C++){publishing.wizard.typeahead(k.field("fromAirport"+C),v);publishing.wizard.typeahead(k.field("toAirport"+C),v);publishing.wizard.lobforms.flightOnly.addChangeListener(C);}}};publishing.wizard.lobforms.flightOnly.stopOverSearch=function(l){var e=$(l).find("[name=TripType][value=RoundTrip]");var p=$(l).find("[name=TripType][value=OneWay]");var m=$(l).find(".stopOverField").field("stopOverFlightType");var a=$(l).find(".stopOverField").find("[name=stopOverDestination]");var c=$(l).find(".oneWayOrReturn").find("[name=FrAirport]");var o=$(l).find(".oneWayOrReturn").find("[name=ToAirport]");var s=$(l).find("input[name=FromDate]");var r=$(l).find("select[name=FromTime]");if(e!=null&&e.is(":checked")){var f=$(l).find("input[name=TripType]");f.val("Multicity");var k=$(l).find("input[name=ToDate]");var h=$(l).find("select[name=ToTime]");if("Outbound"==m.val()){var g=$(l).find(".stopOverField").field("stopOverFromDate");var n=$(l).find(".stopOverField").field("stopOverFromTime");$("<input>").attr({type:"hidden",name:"frAirport2",value:a.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"toAirport2",value:o.val()}).appendTo(l);
$("<input>").attr({type:"hidden",name:"frAirport3",value:o.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"toAirport3",value:c.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"Date2",value:g.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"Time2",value:n.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"Date3",value:k.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"Time3",value:h.val()}).appendTo(l);d(o,"");d(a,"ToAirport");d(k,"");d(h,"");}else{var q=$(l).find(".stopOverField").field("stopOverToDate");var b=$(l).find(".stopOverField").field("stopOverToTime");$("<input>").attr({type:"hidden",name:"frAirport2",value:o.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"toAirport2",value:a.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"Date2",value:k.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"Time2",value:h.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"frAirport3",value:a.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"toAirport3",value:c.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"Date3",value:q.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"Time3",value:b.val()}).appendTo(l);d(k,"");d(h,"");}}else{if(p!=null&&p.is(":checked")){var f=$(l).find("input[name=TripType]");f.val("Multicity");var g=$(l).find(".stopOverField").field("stopOverFromDate");var n=$(l).find(".stopOverField").field("stopOverFromTime");$("<input>").attr({type:"hidden",name:"frAirport2",value:a.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"toAirport2",value:o.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"Date2",value:g.val()}).appendTo(l);$("<input>").attr({type:"hidden",name:"Time2",value:n.val()}).appendTo(l);d(o,"");d(a,"ToAirport");}}function d(u,t){u.attr("name",t);}};publishing.wizard.lobforms.flightOnly.jp.allFlights=function(e){var d=$(publishing.WIZARD_CONTAINER_ID+" form.flightOnly");var g=d.find("div.internationalFlightFieldsContainer").find(".multipleDestinations").field("origin");var a=d.find("div.internationalFlightFieldsContainer").find(".multipleDestinations").field("destination");var c=d.find("div.internationalFlightFieldsContainer").find(".oneWayOrReturn").field("origin");var f=d.find("div.internationalFlightFieldsContainer").find(".oneWayOrReturn").field("destination");var b=publishing.wizard.lobforms.flightOnly.jp.validationRules(d.find("div.internationalFlightFieldsContainer"),e);publishing.wizard.lobforms.flightOnly.init(d,e,b);};publishing.wizard.lobforms.flightOnly.allFlights=function(e){var d=$(publishing.WIZARD_CONTAINER_ID+" form.flightOnly");var g=d.find("div.internationalFlightFieldsContainer").find(".multipleDestinations").field("origin");var a=d.find("div.internationalFlightFieldsContainer").find(".multipleDestinations").field("destination");var c=d.find("div.internationalFlightFieldsContainer").find(".oneWayOrReturn").field("origin");var f=d.find("div.internationalFlightFieldsContainer").find(".oneWayOrReturn").field("destination");var b=publishing.wizard.lobforms.flightOnly.validationRules(d.find("div.internationalFlightFieldsContainer"),e);publishing.wizard.lobforms.flightOnly.init(d,e,b);};expNamespace("publishing.wizard.lobforms");publishing.wizard.lobforms.hotelAndCar=function(a){var c=$(publishing.WIZARD_CONTAINER_ID+" form.hotelAndCar");var e=a.errorMessages;var g=a.taConfig;var o=c.field("destination");var n=c.field("fromDate");var f=c.field("toDate");var h=c.find(".rooms .room");var l=h.find(".number-of-travellers");var q=c.find("input[name=addFlightPackage]");var m=c.find("input[name=addHotelPackage]");var p=c.find("input[name=addCarPackage]");publishing.wizard.setUpPackageCheckboxes(q,m,p);if(g){g.itemClickedEvent=function(s){if(s&&s.On){var r=s.selectedItem;if(r&&r.data&&s.inputId=="HC-destination"){publishing.wizard.packageLobData.TLA=r.data.a;publishing.wizard.packageLobData.MultiCity=r.data.amc;}}publishing.wizard.preserveTA(s);};}var k=[new publishing.validation.NotEmpty(o,e.departureCity),new publishing.validation.OptionalDate(n,e.departureDate),new publishing.validation.OptionalDate(f,e.returnDate),new publishing.validation.DateRange(n,f,e.bookingDateRange),new publishing.validation.DatePriorToAllowedDate(n,a.minPurchaseDate,e.departurePriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(f,a.minPurchaseDate,e.returnPriorToCurrentDate),new publishing.validation.TotalBetween(1,6,l,e.totalNumberOfTravellers),new publishing.validation.DatesNotToManyDaysAppart(n,f,a.maxDateRange,e.checkInAndOutDatesTooFarApart)];var d=new publishing.validation.ErrorRenderer(c,c.find("ul.errors"));var b=new publishing.validation.Validator(k,d);c.initLobForm(a,b);publishing.wizard.initRooms(c,h,k,e,a);publishing.wizard.setupPackageRadioButtons(c);publishing.wizard.setUpAddRoomLinks(c);};expNamespace("publishing.wizard.lobforms");publishing.wizard.lobforms.hotelOnly=function(A){var p=A.errorMessages;var f=$(publishing.WIZARD_CONTAINER_ID+" form.hotelOnly");var I=f.find("#hotelOnly-additionalOptions");var z=A.taConfig;var H=f.find(".rooms .room");var G=f.field("destination");var b=f.field("dest-region");var B=f.field("dest-city");var x=f.field("fromDate");var v=f.field("toDate");var a=f.find("a[name=hotelOnly-showAdditionalOptions]");var r=f.find("a[name=hotelOnly-hideAdditionalOptions]");var e=f.find("input[name='SearchType']");var C=f.find("input[name='SearchArea']");var l=f.find("input[name='storedCheckinField']");var t=f.find("input[name='storedCheckoutField']");var h=$('<input type="hidden" name="CityId"/>');var w=(typeof A.datelessSearch=="undefined")?true:false;var u=A.ninePlusRoomsURL;var m=f.field("numRooms");var k;if(!w){k=f.field("enableDateless");}var o=f.find("input[name=addFlightPackage]");var d=f.find("input[name=addCarPackage]");publishing.wizard.setUpPackageCheckboxes(o,null,d);publishing.wizard.lobforms.hotelOnly_ValidationRules=[new publishing.validation.NotEmpty(G,p.city),new publishing.validation.NotSelect(b,p.city),new publishing.validation.NotSelectCity(b,B,p.city),new publishing.validation.ConditionalDate(w,k,x,p.checkinDate),new publishing.validation.ConditionalDate(w,k,v,p.checkoutDate),new publishing.validation.DatePriorToAllowedDate(x,A.minPurchaseDate,p.checkinPriorToCurrentDate),new publishing.validation.DatePriorToAllowedDate(v,A.minPurchaseDate,p.checkoutPriorToCurrentDate),new publishing.validation.DateRange(x,v,p.bookingDateRange),new publishing.validation.DatesNotToManyDaysAppart(x,v,A.maxDateRange,p.checkInAndOutDatesTooFarApart),new publishing.validation.DatePastMaxPurchaseDate(A.maxPurchaseDate,x,p.datePastMaxDate),new publishing.validation.DatePastMaxPurchaseDate(A.maxPurchaseDate,v,p.datePastMaxDate)];publishing.wizard.setUpAddRoomLinks(f);$("#handle9RoomsLink").click(q);function q(){var J=A.ninePlusRoomsURL;var K=$("#H-destination");if(K.val()!=K.attr("data-default")){J=J+"&City="+encodeURIComponent(K.val());}J=J+"&InDate="+encodeURIComponent(publishing.wizard.formatDateForGroupForm9PlusRoomsService($("#H-fromDate").val()))+"&OutDate="+encodeURIComponent(publishing.wizard.formatDateForGroupForm9PlusRoomsService($("#H-toDate").val()));window.location=J;return true;}if(z){z.itemClickedEvent=function(){var K=TA.getInstance("H-destination");if(K&&K.On){var J=K.selectedItem;if(J&&J.data&&K.inputId=="H-destination"){if(J.data.t=="HOTEL"){publishing.wizard.packageLobData.HotelId=J.data.id;}publishing.wizard.packageLobData.regionId=J.data.id;publishing.wizard.packageLobData.TLA=J.data.a;publishing.wizard.packageLobData.MultiCity=J.data.amc;}}publishing.wizard.preserveTA(K);};}function y(J){if(J!=undefined){C.val(J.type);if(J.hotelId!=null){$("#H-hotelId").val(J.hotelId);$("#H-hotelId").attr("timestamp",new Date().getTime());}}f.triggerDatePicker(x,false);}function c(){if(!publishing.wizard.BIASED_FOR_HOTELS_PER_CITY){return;}f.find("input[name='GOTO']").val("HOTGROUP");C.remove();var K=f.find("[data-canonic='destination']").val();var J=$.grep(publishing.wizard.hotelsForCities,function(N,M){return N.cityId==K;
})[0];var L=[];$.each(J.hotelIds,function(N,M){L.push($('<input type="hidden" name="HotelID'+N+'" value="'+M+'" />'));});L.push($('<input type="hidden" name="GroupName" value="'+J.cityName+'" />'));$.each(L,function(M,N){f.append(N);});}var D={CITY:"CITY",ADDRESS:"ADDRESS"};function s(){var J=$(this).val();switch(J){case (D.CITY):$("#hotelSearchSectionAddress").toggle(false);$("#hotelSearchSectionCity").toggle(true);break;case (D.ADDRESS):$("#hotelSearchSectionCity").toggle(false);$("#hotelSearchSectionAddress").toggle(true);break;}}function F(){if((x.blank()||x.val()==publishing.DATE_FORMAT)&&publishing.util.parseDate(l.val())!=null){x.val(l.val());}if((v.blank()||v.val()==publishing.DATE_FORMAT)&&publishing.util.parseDate(t.val())!=null){v.val(t.val());}}publishing.wizard.lobforms.hotelOnly_DatesChanged=function(){var J=f.find("input[data-canonic='enableDateless']");if(J.length>0){J[0].checked=false;}f.triggerDatePicker(v,true);};A.startDateCalCallback=publishing.wizard.lobforms.hotelOnly_DatesChanged;var E=new publishing.validation.ErrorRenderer(f,f.find("ul.errors"));var n=new publishing.validation.Validator(publishing.wizard.lobforms.hotelOnly_ValidationRules,E);f.initLobForm(A,n,c);if(publishing.wizard.TYPEAHEAD_ENABLED&&!publishing.wizard.BIASED_FOR_HOTELS_PER_CITY){publishing.wizard.typeahead(G,z,y);}publishing.wizard.initRooms(f,H,publishing.wizard.lobforms.hotelOnly_ValidationRules,p,A);publishing.wizard.lobforms.additionalOptions({showAdditionalOptionsField:a,additionalOptionsContainer:I,hideAdditionalOptionsField:r});e.bindAndTrigger(s);F();function g(O){for(var J=publishing.wizard.hotelsForCities.length-1;J>=0;J--){if((publishing.wizard.hotelsForCities[J].hasOwnProperty("cityId")&&publishing.wizard.hotelsForCities[J].cityId==O)||(publishing.wizard.hotelsForCities[J].hasOwnProperty("cityName")&&publishing.wizard.hotelsForCities[J].cityName==O)){var N=f.find('[name="group"]'),L=f.find('[name="hotelChainId"]'),K=($("#hasHotelChainIdEntered").length>0),M=$("#hasHotelChainIdEntered").data("value");if(publishing.wizard.hotelsForCities[J].hasOwnProperty("hotelIds")&&publishing.wizard.hotelsForCities[J].hotelIds.length>0&&publishing.wizard.hotelsForCities[J].hotelIds[0]!=""){if(N.length>0){N.val(publishing.wizard.hotelsForCities[J].hotelIds.join(","));}else{$("<input>").attr({type:"hidden",name:"group",value:publishing.wizard.hotelsForCities[J].hotelIds.join(",")}).appendTo(f);}L.remove();}else{if(N.length>0){N.remove();if(K){$("<input>").attr({type:"hidden",name:"hotelChainId",value:M}).appendTo(f);}}}}}}if(typeof publishing.wizard.hotelsForCities=="object"&&publishing.wizard.hotelsForCities.length>0){g(G.val());G.on("change",function(){g(G.val());});}};publishing.wizard.lobforms.constructRoomPackageInfoUrl=function(){var g="";var f=parseInt($("#FH-NumRoom").val());g+="&numberOfRooms="+f;for(var e=1;e<=f;e++){var d=parseInt($("#FH-NumAdult"+e).val());g+="&adultsPerRoom["+e+"]="+d;var b=parseInt($("#FH-NumChild"+e).val());g+="&childrenPerRoom["+e+"]="+b;for(var c=1;c<=b;c++){var a=parseInt($("#FH-Rm"+e+"Child"+c+"Age").val());g+="&childAges["+e+"]["+c+"]="+a;}g+="&";}return g;};publishing.wizard.lobforms.constructHotelInfoUrl=function(k){var d="chkin="+escape(k["InDate"].value)+"&chkout="+escape(k["OutDate"].value)+"&";var h=parseInt($("#H-NumRoom").val());for(var g=1;g<=h;g++){d+="rm"+g+"=";var e=parseInt($("#H-NumAdult"+g).val());d+="a"+e;var b=parseInt($("#H-NumChild"+g).val());for(var c=1;c<=b;c++){var a=parseInt($("#H-Rm"+g+"Child"+c+"Age").val());d+=":c"+a;}d+="&";}return d;};publishing.wizard.lobforms.hotelOnly.constructHotelInfoUrl=function(b){var a="chkin="+escape(b["InDate"].value)+"&chkout="+escape(b["OutDate"].value)+"&";a+=publishing.wizard.lobforms.constructHotelInfoUrl(b);return a;};publishing.wizard.lobforms.hotelOnly.constructFlightAndHotelInfoUrl=function(b){var a="packageType=2&origin="+escape(b["FrAirport"].value)+"&ttla="+publishing.wizard.packageLobData.TLA+"&fromDate="+escape(b["FromDate"].value)+"&toDate="+escape(b["ToDate"].value)+"&";a+=publishing.wizard.lobforms.constructRoomPackageInfoUrl();return a;};publishing.wizard.lobforms.hotelOnly.gotoHotelInfo=function(d,c){if($("#H-hotelId").val()!=""&&$("#H-NumRoom").val()!=9){var a=["/h",$("#H-hotelId").val(),".Hotel-Information?",publishing.wizard.lobforms.hotelOnly.constructHotelInfoUrl(d)];var b=a.join("");window.location=b;return true;}return false;};publishing.wizard.lobforms.hotelOnly.gotoPackageInfo=function(d,c){if(publishing.wizard.packageLobData.HotelId){var a=["/h",$("#H-hotelId").val(),".Hotel-Information?",publishing.wizard.lobforms.hotelOnly.constructFlightAndHotelInfoUrl(d)];var b=a.join("");window.location=b;return true;}return false;};publishing.wizard.lobforms.hotelOnly.handleNinePlusRooms=function(g,e){if($("#H-NumRoom").val()==9){var a=e.ninePlusRoomsURL;var c=[["City","PlaceName"],["InDate","InDate"],["OutDate","OutDate"]];for(var b=0;b<c.length;b++){var d=c[b];if(d[0]=="InDate"||d[0]=="OutDate"){a=a+"&"+d[0]+"="+encodeURIComponent(publishing.wizard.formatDateForGroupForm9PlusRoomsService(g[d[1]].value));}else{a=a+"&"+d[0]+"="+encodeURIComponent(g[d[1]].value);}}window.location=a;return true;}return false;};expNamespace("publishing.wizard.lobforms");expNamespace("publishing.wizard.lobforms.flightOnly");publishing.wizard.lobforms.flightOnly.InternationalFlightForm=function(){this.container=function(){return $(publishing.WIZARD_CONTAINER_ID+" form.flightOnly");};this.defaultFlightType=function(){return"International";};this.flightFieldsContainer=function(){return this.container().find("div.internationalFlightFieldsContainer");};};publishing.wizard.lobforms.flightOnly.DomesticFlightForm=function(){this.container=function(){return $(publishing.WIZARD_CONTAINER_ID+" form.domesticFlightOnly");};this.defaultFlightType=function(){return"Domestic";};this.flightFieldsContainer=function(){return this.container().find("div.domesticFlightFieldsContainer");};};publishing.wizard.lobforms.flightOnly.internationalFlights=function(a){publishing.wizard.lobforms.flightOnly.initializeForIndiaSite(new publishing.wizard.lobforms.flightOnly.InternationalFlightForm(),new publishing.wizard.lobforms.flightOnly.DomesticFlightForm(),a);};publishing.wizard.lobforms.flightOnly.submitFormTarget=null;publishing.wizard.lobforms.flightOnly.setSubmitFormTarget=function(a){publishing.wizard.lobforms.flightOnly.submitFormTarget=a;};publishing.wizard.lobforms.flightOnly.searchFlightAndHotel=function(){var d=$(publishing.WIZARD_CONTAINER_ID+" form.flightOnly");var c=$(publishing.WIZARD_CONTAINER_ID+" form.flightAndHotel");d.find(":input").filter(":visible").each(function(){var e=$(this).attr("data-canonic");if(e&&e!="childrenAge"&&c.field(e)){c.field(e).val($(this).val());if($(this).is("select")&&"FrAirport"==$(this).attr("name")){c.field(e).trigger("change");}}});if($("#jpFLPFltPkgSearchFlag").length>0){if(c.find("select[name=FrAirport]").length>0){c.find("select[name=FrAirport]").attr("name","");}if(c.find("select[name=DestName]").length>0){c.find("select[name=DestName]").attr("name","");}}if(d.field("numChildren").val()>0){for(i=1;i<=d.field("numChildren").val();i++){c.find("select[name=Rm1Child"+i+"Age]").val(d.find("select[name=Age"+i+"]").val());}}if(c.find("[data-canonic=fromDate]").val()==c.find("[data-canonic=toDate]").val()){var a=c.find("[data-canonic=toDate]");var b=a.datepicker("getDate","+1d");b.setDate(b.getDate()+1);a.datepicker("setDate",b);}c.find("[data-canonic=flexibleFromDate]").remove();c.find("[data-canonic=flexibleToDate]").remove();};publishing.wizard.lobforms.flightOnly.domesticFlightsOnly=function(a){var m=new publishing.wizard.lobforms.flightOnly.DomesticFlightForm();var l=m.container();function b(q,p){return"&"+q+"="+p;}function d(p){var q=l.field(p).filter(":visible");if(q.length==0){return"";}return q[0].value;}function g(q,p){return b(q,d(p));}function k(q){var p=parseInt(q);if(p==362){return"0";}else{if(p<241){return"1";}else{if(p<481){return"2";}else{if(p<721){return"3";
}else{if(p<961){return"4";}else{if(p<1201){return"5";}else{return 6;}}}}}}}function o(q,p){return b(q,k(d(p)));}function h(){var s=0;var t=0;var r=l.field("numChildren").val();for(var q=1;q<=parseInt(r);q++){var p=l.find("select[name=Age"+q+"]").filter(":visible")[0].value;if(parseInt(p)<2){s++;}else{t++;}}return b("childs",t)+b("infants",s);}function f(){var p="";switch(n()){case"Multicity":p=b("multicity","true");break;case"OneWay":p=b("rnd_one","O");break;case"RoundTrip":p=b("rnd_one","R");break;}return p;}function n(){return l.find("input[name=TripType]").filter(":checked")[0].value;}function c(){var q=n();if(q=="Multicity"){var p=g("from1","origin")+g("depart_date_1","date1")+o("dpt_time_1","fromTime")+g("to1","destination");var u=g("from2","fromAirport2")+g("depart_date_2","date2")+o("dpt_time_2","time2")+g("to2","toAirport2");var t=g("from3","fromAirport3")+g("depart_date_3","date3")+o("dpt_time_3","time3")+g("to3","toAirport3");var s=g("from4","fromAirport4")+g("depart_date_4","date4")+o("dpt_time_4","time4")+g("to4","toAirport4");var r=g("from5","fromAirport5")+g("depart_date_5","date5")+o("dpt_time_5","time5")+g("to5","toAirport5");return p+u+t+s+r;}else{return g("from","origin")+g("depart_date","fromDate")+o("dep_time","fromTime")+g("to","destination")+g("return_date","toDate")+o("ret_time","toTime");}}this.onSuccessHandler=function(){var q=g("adults","numAdults");var p=g("class","cabinClass");var r=g("carrier","airlinePreference");var s=a.domesticFlightFormUrl+f()+c()+q+h()+p+r;l.attr("action",s);};this.onSuccessHandlerForIndiaSite=function(){var s=parseInt(d("numAdults"))+parseInt(d("numSeniors"));var q=b("adults",s);var p=g("class","cabinClass");var r=g("carrier","airlinePreference");var t=a.domesticFlightFormUrl+f()+c()+q+h()+p+r;l.attr("action",t);};function e(){l.find(".section-infants-pref").html("");}publishing.wizard.lobforms.flightOnly.initializeForIndiaSite(m,new publishing.wizard.lobforms.flightOnly.InternationalFlightForm(),a,this.onSuccessHandlerForIndiaSite);e();};publishing.wizard.lobforms.flightOnly.initializeForIndiaSite=function(n,e,b,f){var l=n.container();var a=e.container();var h=l.find("select[name=flightType]");var k=a.find("select[name=flightType]");var c=new publishing.validation.ErrorRenderer(l,l.find("ul.errors"));var g=publishing.wizard.lobforms.flightOnly.validationRules(n.flightFieldsContainer(),b);publishing.wizard.lobforms.flightOnly.init(l,b,g,f);function d(){l.toggle(h.val()==n.defaultFlightType());a.toggle(h.val()==e.defaultFlightType());k.val(e.defaultFlightType());c.clearAll();m(l,a);}function m(p,o){if(p.is(":visible")){o.before(p);}if(o.is(":visible")){p.before(o);}}h.bindAndTrigger(d);};expNamespace("publishing.wizard.lobforms");publishing.wizard.lobforms.ukThreePP=function(f){var g=f.errorMessages;var e=$(publishing.WIZARD_CONTAINER_ID+" form.threePP");var d=e.find("input[name=FromDate]");var a=d.val();var b=[new publishing.validation.OptionalDate(d,g.departureDate),new publishing.validation.DatePriorToAllowedDate(d,f.minPurchaseDate,g.departurePriorToCurrentDate),new publishing.validation.DateIsLessOrEqual(f.maxPurchaseDate,d,g.datePastMaxDate)];var h=new publishing.validation.ErrorRenderer(e,e.find("ul.errors"));var c=new publishing.validation.Validator(b,h);this.onSuccess=function(){if(a==d.val()){d.val("");}};e.initLobForm(f,c,this.onSuccess);};publishing.wizard.lobforms.deThreePP=function(c){var b=$(publishing.WIZARD_CONTAINER_ID+" form."+c.form);var a=b.find("input[name=termin]");var d=b.find("input[name=ruecktermin]");b.initLobForm(c,undefined);};publishing.wizard.lobforms.atThreePP=function(c){var b=$(publishing.WIZARD_CONTAINER_ID+" form."+c.form);var a=b.find("input[name=termin]");var d=b.find("input[name=ruecktermin]");b.initLobForm(c,undefined);};publishing.wizard.lobforms.frThreePP=function(a){var b=$(publishing.WIZARD_CONTAINER_ID+" form.threePP");var e=b.find("input[name=termin]");var d=b.find("input[name=personen]");var k=b.find("select[id=threePP-Adults]");var c=b.find("select[id=threePP-ChildAge1]");var g=b.find("select[id=threePP-ChildAge2]");var l=b.find("select[id=threePP-ChildAge3]");var m=c.val();var h=e.val();function f(n){var o=n.val();return o==m?"":";"+o;}this.onSuccess=function(){var n=h==e.val()?publishing.util.formattedDate("dd.mm.yyyy",0,new Date()):e.val().replace(/\//g,".");e.val(n);d.val(k.val()+f(c)+f(g)+f(l));};b.initLobForm(a,undefined,this.onSuccess);};publishing.wizard.lobforms.itThreePP=function(a){var l=a.errorMessages;var d=$(publishing.WIZARD_CONTAINER_ID+" form.threePP");var f=d.find("input[name=depDateFrom]");var k=d.find("input[name=depDateTo]");var m=d.find("select[name=depFrom]");var n=m.val();var h=[new publishing.validation.OptionalDate(f,l.fromDate),new publishing.validation.DatePriorToAllowedDate(f,a.minPurchaseDate,l.fromPriorToCurrentDate),new publishing.validation.OptionalDate(k,l.toDate),new publishing.validation.DatePriorToAllowedDate(k,a.minPurchaseDate,l.toPriorToCurrentDate)];var g=new publishing.validation.ErrorRenderer(d,d.find("ul.errors"));var b=new publishing.validation.Validator(h,g);function c(o){return o.val()!=n;}function e(p,q){var o=c(p)?p.val():publishing.util.formattedDate("dd/mm/yyyy",q,new Date());return p.attr("name")+"="+o+"&";}this.onSuccess=function(){var r=e(f,0);var p=e(k,60);var q="";if(m.blank()){q=a.formActionWithNoDepartFrom.replace("formParameters",r+p);}else{var o="depFrom="+m.val()+"&";q=a.formActionWithDepartFrom.replace("formParameters",o+r+p);}d.attr("action",q);};d.initLobForm(a,b,this.onSuccess);};publishing.wizard.lobforms.caThreePP=function(a){var f=a.errorMessages;var d=$(publishing.WIZARD_CONTAINER_ID+" form.threePP");var b=d.find("select[name=fcy]"),h=d.find("input[name=fdt]"),l=d.find(".traveller-details"),k=d.find("select[data-canonic=childrenAge]");var g=[new publishing.validation.NotEmpty(b,f.mandatory),new publishing.validation.MandatoryDate(h,f.departureDate),new publishing.validation.DatePriorToAllowedDate(h,a.minPurchaseDate,f.departureDatePriorToCurrentDate),new publishing.validation.ChildrenAgeRequired(k,f.childrenAge)];var e=new publishing.validation.ErrorRenderer(d,d.find("ul.errors"));var c=new publishing.validation.Validator(g,e);d.initLobForm(a,c);publishing.wizard.initRoom(l,g,a.errorMessages);};publishing.validation.ChildrenAgeRequired=function(a,b){this.apply=function(){var f=[];var e=a.filter(":visible");if(e.length>0){for(var d=0;d<e.length;d++){if(parseInt(e[d].value)<0||parseInt(e[d].value)>17){f.push(e[d]);}}}if(f.length==0){return new publishing.validation.Result(true);}else{var c=new publishing.validation.Error(f,b);return new publishing.validation.Result(false,c);}};return this;};publishing.wizard.typeahead=function(e,c,b){function a(h,f){var g={};g.serviceRequestMask=f.serviceRequestMask;g.id=h;g.On=f.On;g.MinChar=f.MinChar;g.MaxItems=f.MaxItems;g.Path=f.Path;g.lob=f.lob;g.Locale=f.Locale;g.abTest=f.abTest;g.version=f.version;g.closeText=f.closeText;g.contiueText=f.contiueText;g.itemClickedEvent=f.itemClickedEvent;g.trigger=b;g.category=f.category;g.dest=f.dest;TA.setup(g);TA.init(h);}if(window["TA"]){if(e.length>0&&c!=undefined){for(var d=0;d<e.length;d++){if(e[d].nodeName.toUpperCase()=="INPUT"&&e[d].getAttribute("type")=="text"){a(e[d].id,c);}}}}};publishing.wizard.lobforms.vacationPackage=function(){var b=$(publishing.WIZARD_CONTAINER_ID+" div.lobForm-vacationPackage");var d=$(publishing.WIZARD_CONTAINER_ID+" form.vacationPackage");var a=d.find("select[name=PackageType]");function c(){var e=a.val();var g=b.find("div.packageType:visible");if(g.hasClass("packageType-"+e)){return;}var f=b.find("div.packageType-"+e);g.hide();f.show();}a.bindAndTrigger(c);};publishing.wizard.preserveTA=function(b){var c=$("#"+b.inputId);var a=publishing.wizard.canonicName(c);publishing.wizard.canonicFieldValues[a]=c.val();};publishing.wizard.recentlyViewedHotels=function(f){var a=$(publishing.WIZARD_CONTAINER_ID+" form.hotelOnly");var m=a.find("#rvFieldset");var n=a.find("#rvSelect");var g=$("input[data-canonic='destination']");
var e=$("input[data-canonic='fromDate']");var o=$("input[data-canonic='toDate']");var d=a.find(".rooms .room");var c=a.field("numRooms");var p=function(q){return function(){var r=$(this).val();g.val(q[r].city);g.change();e.val(q[r].checkInDate);e.change();o.val(q[r].checkOutDate);o.change();c.val(q[r].travelerUnits.length);c.change();for(i in q[r].travelerUnits){var v=$(d[i]).field("numAdults");var t=$(d[i]).field("numChildren");var u=$(d[i]).field("childrenAge");v.val(q[r].travelerUnits[i].numberOfAdults);t.val(q[r].travelerUnits[i].childAges.length);t.change();for(num in q[r].travelerUnits[i].childAges){var s=$(u[num]);s.val(q[r].travelerUnits[i].childAges[num]);}}$("#mcicid").val("Hotel.LP.RVSelect");};};function b(q,r){if(q==null||r==null){return false;}else{if(q.city.indexOf(r.city)==-1){return false;}else{if(q.checkInDate.indexOf(r.checkInDate)==-1){return false;}else{if(q.checkOutDate.indexOf(r.checkOutDate)==-1){return false;}}}}return true;}function h(s){var q=false;if(s.length>1){for(i in s){for(var r=parseInt(i)+1;r<s.length;r++){if(b(s[i],s[r])){s[r]=null;q=true;}}}}if(q){var t=new Array();var r=0;for(i in s){if(s[i]!=null){t[r]=s[i];r++;}}return t;}return s;}function k(r){var q="";for(i in r){q+='<option value="'+i+'">'+r[i].city+" "+r[i].checkInDateView+r[i].checkOutDateView+"</option>";}n.append(q);}function l(q){var r=h(q);if(r!=null&&r.length>1){k(r);m.show();n.change(p(r));}}l(f);};publishing.wizard.recentlySearchedPackages=function(b){var a=$(publishing.WIZARD_CONTAINER_ID+" form.flightAndHotel");var f=a.find("#rspField");var g=a.find("#rspSelect");var s=a.field("origin");var u=a.field("destination");var d=a.field("fromDate");var n=a.field("toDate");var e=a.field("partialHotelBooking");var o=a.field("flexibleFromDate");var h=a.field("flexibleToDate");var t=a.find(".rooms .room");var c=a.field("numRooms");var m=a.find(".section-partial-hotel-booking-date");var k=a.find(".section-infants-pref");var p=a.field("infantSeatPreference");var q=function(v){return function(){var x=$(this).val();s.val(v[x].originCity);s.change();u.val(v[x].destinationCity);u.change();d.val(v[x].departureDate);d.change();n.val(v[x].returnDate);n.change();if(v[x].checkInDate!=""&&v[x].checkOutDate!=""){e.is(":checked");m.show();o.val(v[x].checkInDate);h.val(v[x].checkOutDate);}else{e.is(":checked");m.hide();o.val("mm/dd/yy");h.val("mm/dd/yy");}e.off("click");e.on("click",function(){if(this.checked==true){m.show();}else{m.hide();}});c.val(v[x].travelerUnits.length);c.change();var w=false;var B=false;for(i in v[x].travelerUnits){var D=$(t[i]).field("numAdults");var z=$(t[i]).field("numSeniors");var A=$(t[i]).field("numChildren");var C=$(t[i]).field("childrenAge");if(v[x].travelerUnits[i].infantsInSeats){w=true;}D.val(v[x].travelerUnits[i].numberOfAdults);z.val(v[x].travelerUnits[i].numberOfSeniors);A.val(v[x].travelerUnits[i].childAges.length);A.change();for(num in v[x].travelerUnits[i].childAges){var y=$(C[num]);y.val(v[x].travelerUnits[i].childAges[num]);y.change();if(v[x].travelerUnits[i].childAges[num]==0){B=true;}}}if(B){k.show();if(p&&p.length>1){if(w){p[1].checked=true;}else{p[0].checked=true;}}}else{k.hide();}$("#mcicid").val("PKG.LP.RVSelect");};};function l(v){rsOptions="";for(i in v){rsOptions+='<option value="'+i+'">'+v[i].originCityView+"-"+v[i].destinationCityView+" "+v[i].departureDateView+v[i].returnDateView+"</option>";}g.append(rsOptions);}function r(v){if(v!=null&&v.length>0){l(v);f.show();g.change(q(v));}}r(b);};var s_prop34="";publishing.wizard.setABValue=function(c,a){var b=c+"_"+a;if(s_prop34==""){s_prop34=b;}else{if(s_prop34.indexOf(b)==(-1)){s_prop34=s_prop34+"|"+b;}}};publishing.wizard.fillCheckInDateAuto=function(b,a){b.click(function(){if(a.fillCheckInDateAutoFieldPrefix!=null&&a.fillCheckInDateAutoFieldPrefix!="undefined"){if($(this).is(":checked")){$("#"+a.fillCheckInDateAutoFieldPrefix+"-flexibleFromDate").val($("#"+a.fillCheckInDateAutoFieldPrefix+"-fromDate").val());}}});};}var corewizard=corewizard||{};corewizard.masterconfig=corewizard.masterconfig||{};corewizard.masterconfig.abacus=corewizard.masterconfig.abacus||{};corewizard.masterconfig.abacus["7225"]="1";corewizard.masterconfig.abacus["7805"]="0";var carTrawlerEnabled=corewizard.masterconfig.abacus["7225"]==="1";var hertzEnabled=corewizard.masterconfig.abacus["7805"]==="1";function typeaheadApacCarPickUpCallback(b){corewizard.core=corewizard.core||{};corewizard.core.state=corewizard.core.state||{};corewizard.core.state.set=corewizard.core.state.set||function(e,f){this[e]=f;};var a=corewizard.core.state;var c=JSON.parse(b.attr("data-data"));a.set("pickUpLocationId",c.id);a.set("pickUpLocation",c.l);if(hertzEnabled){if(c.hierarchyInfo&&c.hierarchyInfo.airport){c.a=c.a||c.hierarchyInfo.airport.metrocode||c.hierarchyInfo.airport.airportCode||undefined;c.id=c.id||c.hierarchyInfo.airport.multicity||undefined;}var d="invalid";if(hertzDropDownJSON&&hertzDropDownJSON[c.a]){if(hertzDropDownJSON[c.a][c.id]){d=hertzDropDownJSON[c.a][c.id].code;}else{d=hertzDropDownJSON[c.a]["default"].code;}}if($("#C-destination")){$("#C-destination").attr("state",d);}a.set("pickupTla",d);}else{if(carTrawlerEnabled){a.set("pickupTla",c.a);a.set("carSearchType",1);}else{a.set("tla",c.a);a.set("carSearchType",2);}}}function typeaheadApacCarDropOffCallback(b){corewizard.core=corewizard.core||{};corewizard.core.state=corewizard.core.state||{};corewizard.core.state.set=corewizard.core.state.set||function(e,f){this[e]=f;};var a=corewizard.core.state;var c=JSON.parse(b.attr("data-data"));if(hertzEnabled){var d="invalid";if(c.hierarchyInfo&&c.hierarchyInfo.airport){c.a=c.a||c.hierarchyInfo.airport.metrocode||c.hierarchyInfo.airport.airportCode||undefined;c.id=c.id||c.hierarchyInfo.airport.multicity||undefined;}if(hertzDropDownJSON&&hertzDropDownJSON[c.a]){if(hertzDropDownJSON[c.a][c.id]){d=hertzDropDownJSON[c.a][c.id].code;}else{d=hertzDropDownJSON[c.a]["default"].code;}}if($("#C-dropOffLocation")){$("#C-dropOffLocation").attr("state",d);}a.set("returnTla","invalid");}else{if(carTrawlerEnabled){a.set("returnTla",c.a);}else{a.set("tla",c.a);}}a.set("returnLocation",c.l);a.set("returnLocationId",c.id);}function resetCarFields(){var a=corewizard&&corewizard.core&&corewizard.core.state?corewizard.core.state:null;if(a){if(!a.get("pickupTla")){$("#C-destination").val("");}if(!a.get("returnTla")){$("#C-dropOffLocation").val("");}}else{$("#C-destination").val("");$("#C-dropOffLocation").val("");}}resetCarFields();$("#widgetcatalogWizard").bind("formSwitched",function(){if($(".on.change-lob").attr("data-lob")==="carOnly"){resetCarFields();}});var corewizard=corewizard||{};corewizard.conf=corewizard.conf||{};corewizard.masterconfig=corewizard.masterconfig||{};corewizard.masterconfig.abacus=corewizard.masterconfig.abacus||{};var carTrawlerEnabled=corewizard.masterconfig.abacus["7225"]==="1";var carTrawlerAAGEnabled=corewizard.masterconfig.abacus["14693"]==="1";if(carTrawlerEnabled||carTrawlerAAGEnabled){corewizard.conf.apac={carTrawlerUrl:"https://cars.cartrawler.com/expedia/ZH-HK/book?",residencyID:"HK",languageCode:"ZH",currencyID:"HKD",clientID:"312207",TPID:"18",EAPID:"0",GUID:"25449cb5-ef22-4dc2-97c3-b02140ef7052",affcid:"v.1,0|||||||||||||"};if(carTrawlerAAGEnabled){corewizard.conf.apac.carTrawlerUrl="https://cars.cartrawler.com/expedia";}var typeaheadConfig=typeaheadConfig||{};typeaheadConfig.typeahead=typeaheadConfig.typeahead||{};typeaheadConfig.typeahead.car_origin=typeaheadConfig.typeahead.car_origin||{};typeaheadConfig.typeahead.car_dest=typeaheadConfig.typeahead.car_dest||{};typeaheadConfig.typeahead.car_origin.mask=1;typeaheadConfig.typeahead.car_origin.version="v3";typeaheadConfig.typeahead.car_dest.mask=1;typeaheadConfig.typeahead.car_dest.version="v3";function convertStrToInt(b,c){try{return parseInt(b);}catch(a){return c;}}function setTimeToDate(c,a){if(a!==null&&a.length>=2){var d=a.substring(a.length-2)==="AM",e=0,b=0;if(a.length>=4){e=convertStrToInt(a.substring(a.length-4,a.length-2),0);b=convertStrToInt(a.substring(0,a.length-4),0);
}c.setHours(d?b:b===12?b:b+12);c.setMinutes(e);}return c;}function isValidDropOffAndPickupDatetime(a,h,g,c,f){a=new XDate(a);g=new XDate(g);if(a.valid()&&g.valid()){var e=setTimeToDate(a,h),b=setTimeToDate(g,c);var d=e.diffMinutes(b);return d>=f*60;}return false;}function isValidPickupTime(a,f,e){a=new XDate(a);if(a.valid()){var d=setTimeToDate(a,f);var b=new XDate();var c=b.diffMinutes(d);return c>=e*60;}return false;}corewizard.predicates=corewizard.predicates||{};corewizard.predicates.isValidDropOffAndPickupDatetime=isValidDropOffAndPickupDatetime;corewizard.predicates.isValidPickupTime=isValidPickupTime;corewizard.conf=corewizard.conf||{};corewizard.conf.car=corewizard.conf.car||{};corewizard.conf.car.validation=corewizard.conf.car.validation||{};corewizard.conf.car.model=corewizard.conf.car.model||{};corewizard.conf.car.validation.carTrawler=[true,[["isValidPickupTime",["startDate","startTime","config.calendar.minTripTime"],"pickup-time-too-soon"],["isValidDropOffAndPickupDatetime",["startDate","startTime","endDate","endTime","config.calendar.minTripTime"],"time-too-short"]]];if(carTrawlerEnabled||carTrawlerAAGEnabled){corewizard.conf.car.model.ageOfDriver="30";}}else{corewizard.conf.apac={carTrawlerUrl:"https://car-rental.expedia.com.hk/?",carTrawlerTypeAheadUrl:"http://production.search.aae.sg"+"/location/sg",residencyID:"HK",languageCode:"zh-TW",currencyID:"HKD",clientID:"312207",TPID:"18",EAPID:"0",GUID:"25449cb5-ef22-4dc2-97c3-b02140ef7052",affcid:"v.1,0|||||||||||||"};}var corewizard=window["corewizard"]||{};corewizard.search=corewizard.search||{};corewizard.masterconfig=corewizard.masterconfig||{};corewizard.masterconfig.abacus=corewizard.masterconfig.abacus||{};var carTrawlerEnabled=corewizard.masterconfig.abacus["7225"]==="1";var carTrawlerAAGEnabled=corewizard.masterconfig.abacus["14693"]==="1";var tpid=$("body").data("tpid");corewizard.search.carSearchUrl=getCarTrawlerSearchUrl;function getCarTrawlerAAGSearchUrl(l){var a=new corewizard.search.SearchUrl(corewizard.conf.apac.aag.carTrawlerUrl);a.beginQuery();a.addParameter("clientId",corewizard.conf.apac.aag.clientID,true);a.addParameter("CT","MP",true);l.pickUpID=l.pickUpLocationId||corewizard.core.state.pickUpLocationId;l.pickupName=l.pickUpLocation||corewizard.core.state.pickUpLocation;l.dropOffId=l.returnLocationId||corewizard.core.state.returnLocationId;l.dropOff=l.returnLocation||corewizard.core.state.returnLocation;l.returnTla=l.returnTla||corewizard.core.state.returnTla;if(l.pickupName){a.addParameter("pickupName",l.pickupName,true);}else{if(l.hotelId){a.addParameter("pickupName",l.city,true);}else{a.addParameter("pickupName",l.destination,true);}}if(!(l.dropOff)=="undefined"){a.addParameter("returnName",l.returnLocation,true);}else{a.addParameter("returnName",l.pickupName,true);}var d,o,m,c,p,b,q,n;var k=new exp.core.date.Calendar(exp.core.date.CalendarControl.Config);d=new XDate(k.getDateFromString(l.startDate));o=new XDate(k.getDateFromString(l.endDate));p=("0"+d.getDate()).slice(-2);b=("0"+o.getDate()).slice(-2);q=("0"+(d.getMonth()+1)).slice(-2);n=("0"+(o.getMonth()+1)).slice(-2);d=d.getFullYear()+"-"+q+"-"+p;o=o.getFullYear()+"-"+n+"-"+b;var r=l.startTime.indexOf("M")>-1;if(r){var e=l.startTime;var f=e.indexOf("PM")>-1;var h=parseInt(e.slice(-4,-2));var g=parseInt(e.slice(0,-4));g=(f&&g!=12)?g+12:g;if(!f&&g==12){g=0;}if(h==0){h=h+"0";}m="T"+g+"%3A"+h+"%3A00";a.addParameter("pickupDateTime",d+m,true);e=l.endTime;f=e.indexOf("PM")>-1;h=parseInt(e.slice(-4,-2));g=parseInt(e.slice(0,-4));g=(f&&g!=12)?g+12:g;if(!f&&g==12){g=0;}c="T"+g+"%3A"+h+"%3A00";a.addParameter("returnDateTime",o+c,true);}else{g=parseInt(l.startTime.split(":")[0]);h=parseInt(l.startTime.split(":")[2]);m="T"+g+"%3A"+h+"%3A00";a.addParameter("pickupDateTime",d+m,true);g=parseInt(l.endTime.split(":")[0]);h=parseInt(l.endTime.split(":")[1]);c="T"+g+"%3A"+h+"%3A00";a.addParameter("returnDateTime",o+c,true);}a.addParameter("age",l.ageOfDriver,true,30);a.addParameter("passNum","0");a.addParameter("curr",corewizard.conf.apac.aag.currencyID,true);a.addParameter("carGroupID","0",true);a.addParameter("residenceID",corewizard.conf.apac.aag.residencyID,true);a.addParameter("countryID",corewizard.conf.apac.aag.countryID,true);a.addParameter("ln",corewizard.conf.apac.aag.languageCode,true);a.addParameter("elID","531496830974152",true);a.addParameter("c","gb",true);return a.toString()+"#/vehicles";}function getCarTrawlerSearchUrl(h){var a=new corewizard.search.SearchUrl(corewizard.conf.apac.carTrawlerUrl.replace("?",""));a.beginQuery();a.addParameter("clientId",corewizard.conf.apac.clientID,true);if(carTrawlerAAGEnabled&&!(tpid=="28")){a.addParameter("ln",corewizard.conf.apac.languageCode,true);}h.pickupTla=h.pickupTla||corewizard.core.state.pickupTla;h.returnTla=h.returnTla||corewizard.core.state.returnTla;if(h.pickupTla){a.addParameter("pickupIATACode",h.pickupTla,true);if(h.returnTla){a.addParameter("returnIATACode",h.returnTla,true);}else{a.addParameter("returnIATACode",h.pickupTla,true);}}else{if(h.hotelId){a.addParameter("locationName",h.city,true);}else{a.addParameter("locationName",h.destination,true);}}a.addParameter("residencyId",corewizard.conf.apac.residencyID);a.addParameter("age",h.ageOfDriver,true,25);if(corewizard.conf.apac.affcid){var l=corewizard.conf.apac.affcid.split("|");if(l.length>1){a.addParameter("AFFCID",l[1]);}}var b,k;var g=new exp.core.date.Calendar(exp.core.date.CalendarControl.Config);b=new XDate(g.getDateFromString(h.startDate));k=new XDate(g.getDateFromString(h.endDate));a.addParameter("pickupDate",b.getDate()+"");a.addParameter("pickupMonth",b.getMonth()+"");a.addParameter("pickupYear",b.getFullYear());a.addParameter("returnDate",k.getDate()+"");a.addParameter("returnMonth",k.getMonth()+"");a.addParameter("returnYear",k.getFullYear());var m=h.startTime.indexOf("M")>-1;if(m){var c=h.startTime;var d=c.indexOf("PM")>-1;var f=parseInt(c.slice(-4,-2));var e=parseInt(c.slice(0,-4));e=(d&&e!=12)?e+12:e;if(!d&&e==12){e=0;}a.addParameter("pickupHour",e);a.addParameter("pickupMinute",f,true,0);c=h.endTime;d=c.indexOf("PM")>-1;f=parseInt(c.slice(-4,-2));e=parseInt(c.slice(0,-4));e=(d&&e!=12)?e+12:e;if(!d&&e==12){e=0;}a.addParameter("returnHour",e);a.addParameter("returnMinute",f,true,0);}else{a.addParameter("pickupHour",parseInt(h.startTime.split(":")[0]));a.addParameter("pickupMinute",parseInt(h.startTime.split(":")[1]),true,0);a.addParameter("returnHour",parseInt(h.endTime.split(":")[0]));a.addParameter("returnMinute",parseInt(h.endTime.split(":")[1]),true,0);}a.addParameter("tpid",corewizard.conf.apac.TPID);a.addParameter("EAPID",corewizard.conf.apac.EAPID);if("undefined"!=typeof(s_exp)&&"undefined"!=typeof(s_exp.prop11)){a.addParameter("TUID",s_exp.prop11);}else{a.addParameter("TUID","-1");}a.addParameter("GUID",corewizard.conf.apac.GUID);a.addParameter("currencyID",corewizard.conf.apac.currencyID);return a.toString();}var XDate=function(ap,aj,ag,ah){function aq(){var k=this instanceof aq?this:new aq,o=arguments,f=o.length,n;typeof o[f-1]=="boolean"&&(n=o[--f],o=ae(o,0,f));if(f){if(f==1){if(f=o[0],f instanceof ap||typeof f=="number"){k[0]=new ap(+f);}else{if(f instanceof aq){var o=k,l=new ap(+f[0]);if(al(f)){l.toString=U;}o[0]=l;}else{if(typeof f=="string"){k[0]=new ap(0);k:{for(var o=f,f=n||!1,l=aq.parsers,g=0,m;g<l.length;g++){if(m=l[g](o,f,k)){k=m;break k;}}k[0]=new ap(o);}}}}}else{k[0]=new ap(ak.apply(ap,o)),n||(k[0]=ac(k[0]));}}else{k[0]=new ap;}typeof n=="boolean"&&af(k,n);return k;}function al(e){return e[0].toString===U;}function af(f,g,e){if(g){if(!al(f)){e&&(f[0]=new ap(ak(f[0].getFullYear(),f[0].getMonth(),f[0].getDate(),f[0].getHours(),f[0].getMinutes(),f[0].getSeconds(),f[0].getMilliseconds()))),f[0].toString=U;}}else{al(f)&&(f[0]=e?ac(f[0]):new ap(+f[0]));}return f;}function ad(g,n,f,m,k){var l=am(an,g[0],k),g=am(aa,g[0],k),k=!1;m.length==2&&typeof m[1]=="boolean"&&(k=m[1],m=[f]);f=n==1?(f%12+12)%12:l(1);g(n,m);k&&l(1)!=f&&(g(1,[l(1)-1]),g(2,[Y(l(0),l(1))]));}function X(f,l,e,k){var e=Number(e),g=aj.floor(e);
f["set"+ai[l]](f["get"+ai[l]]()+g,k||!1);g!=e&&l<6&&X(f,l+1,(e-g)*V[l],k);}function T(f,l,e){var f=f.clone().setUTCMode(!0,!0),l=aq(l).setUTCMode(!0,!0),k=0;if(e==0||e==1){for(var g=6;g>=e;g--){k/=V[g],k+=an(l,!1,g)-an(f,!1,g);}e==1&&(k+=(l.getFullYear()-f.getFullYear())*12);}else{e==2?(e=f.toDate().setUTCHours(0,0,0,0),k=l.toDate().setUTCHours(0,0,0,0),k=aj.round((k-e)/86400000)+(l-k-(f-e))/86400000):k=(l-f)/[3600000,60000,1000,1][e-3];}return k;}function ab(f){var k=f(0),e=f(1),g=f(2),f=new ap(ak(k,e,g)),k=Z(R(k,e,g));return aj.floor(aj.round((f-k)/86400000)/7)+1;}function R(f,g,e){g=new ap(ak(f,g,e));if(g<Z(f)){return f-1;}else{if(g>=Z(f+1)){return f+1;}}return f;}function Z(e){e=new ap(ak(e,0,4));e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+6)%7);return e;}function Q(g,n,f,m){var k=am(an,g,m),l=am(aa,g,m);f===ah&&(f=R(k(0),k(1),k(2)));f=Z(f);m||(f=ac(f));g.setTime(+f);l(2,[k(2)+(n-1)*7]);}function w(k,q,f,p,m){var o=aq.locales,n=o[aq.defaultLocale]||{},l=am(an,k,m),f=(typeof f=="string"?o[f]:f)||{};return S(k,q,function(g){if(p){for(var e=(g==7?2:g)-1;e>=0;e--){p.push(l(e));}}return l(g);},function(e){return f[e]||n[e];},m);}function S(F,D,E,C,B){for(var A,z,y="";A=D.match(b);){y+=D.substr(0,A.index);if(A[1]){z=y;for(var y=F,x=A[1],u=E,t=C,s=B,v=x.length,r=void 0,p="";v>0;){r=a(y,x.substr(0,v),u,t,s),r!==ah?(p+=r,x=x.substr(v),v=x.length):v--;}y=z+(p+x);}else{A[3]?(z=S(F,A[4],E,C,B),parseInt(z.replace(/\D/g,""),10)&&(y+=z)):y+=A[7]||"'";}D=D.substr(A.index+A[0].length);}return y+D;}function a(k,o,f,n,m){var l=aq.formatters[o];if(typeof l=="string"){return S(k,l,f,n,m);}else{if(typeof l=="function"){return l(k,m||!1,n);}}switch(o){case"fff":return ao(f(6),3);case"s":return f(5);case"ss":return ao(f(5));case"m":return f(4);case"mm":return ao(f(4));case"h":return f(3)%12||12;case"hh":return ao(f(3)%12||12);case"H":return f(3);case"HH":return ao(f(3));case"d":return f(2);case"dd":return ao(f(2));case"ddd":return n("dayNamesShort")[f(7)]||"";case"dddd":return n("dayNames")[f(7)]||"";case"M":return f(1)+1;case"MM":return ao(f(1)+1);case"MMM":return n("monthNamesShort")[f(1)]||"";case"MMMM":return n("monthNames")[f(1)]||"";case"yy":return(f(0)+"").substring(2);case"yyyy":return f(0);case"t":return W(f,n).substr(0,1).toLowerCase();case"tt":return W(f,n).toLowerCase();case"T":return W(f,n).substr(0,1);case"TT":return W(f,n);case"z":case"zz":case"zzz":return m?o="Z":(n=k.getTimezoneOffset(),k=n<0?"+":"-",f=aj.floor(aj.abs(n)/60),n=aj.abs(n)%60,m=f,o=="zz"?m=ao(f):o=="zzz"&&(m=ao(f)+":"+ao(n)),o=k+m),o;case"w":return ab(f);case"ww":return ao(ab(f));case"S":return o=f(2),o>10&&o<20?"th":["st","nd","rd"][o%10-1]||"th";}}function W(e,f){return e(3)<12?f("amDesignator"):f("pmDesignator");}function P(e){return !isNaN(+e[0]);}function an(f,g,e){return f["get"+(g?"UTC":"")+ai[e]]();}function aa(f,k,e,g){f["set"+(k?"UTC":"")+ai[e]].apply(f,g);}function ac(e){return new ap(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds());}function Y(e,f){return 32-(new ap(ak(e,f,32))).getUTCDate();}function h(e){return function(){return e.apply(ah,[this].concat(ae(arguments)));};}function am(e){var f=ae(arguments,1);return function(){return e.apply(ah,f.concat(ae(arguments)));};}function ae(f,g,e){return ag.prototype.slice.call(f,g||0,e===ah?f.length:e);}function d(f,g){for(var e=0;e<f.length;e++){g(f[e],e);}}function ao(e,f){f=f||2;for(e+="";e.length<f;){e="0"+e;}return e;}var ai="FullYear,Month,Date,Hours,Minutes,Seconds,Milliseconds,Day,Year".split(","),c=["Years","Months","Days"],V=[12,31,24,60,60,1000,1],b=/(([a-zA-Z])\2*)|(\((('.*?'|\(.*?\)|.)*?)\))|('(.*?)')/,ak=ap.UTC,U=ap.prototype.toUTCString,ar=aq.prototype;ar.length=1;ar.splice=ag.prototype.splice;ar.getUTCMode=h(al);ar.setUTCMode=h(af);ar.getTimezoneOffset=function(){return al(this)?0:this[0].getTimezoneOffset();};d(ai,function(e,f){ar["get"+e]=function(){return an(this[0],al(this),f);};f!=8&&(ar["getUTC"+e]=function(){return an(this[0],!0,f);});f!=7&&(ar["set"+e]=function(g){ad(this,f,g,arguments,al(this));return this;},f!=8&&(ar["setUTC"+e]=function(g){ad(this,f,g,arguments,!0);return this;},ar["add"+(c[f]||e)]=function(g,k){X(this,f,g,k);return this;},ar["diff"+(c[f]||e)]=function(g){return T(this,g,f);}));});ar.getWeek=function(){return ab(am(an,this,!1));};ar.getUTCWeek=function(){return ab(am(an,this,!0));};ar.setWeek=function(e,f){Q(this,e,f,!1);return this;};ar.setUTCWeek=function(e,f){Q(this,e,f,!0);return this;};ar.addWeeks=function(e){return this.addDays(Number(e)*7);};ar.diffWeeks=function(e){return T(this,e,2)/7;};aq.parsers=[function(f,k,e){if(f=f.match(/^(\d{4})(-(\d{2})(-(\d{2})([T ](\d{2}):(\d{2})(:(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/)){var g=new ap(ak(f[1],f[3]?f[3]-1:0,f[5]||1,f[7]||0,f[8]||0,f[10]||0,f[12]?Number("0."+f[12])*1000:0));f[13]?f[14]&&g.setUTCMinutes(g.getUTCMinutes()+(f[15]=="-"?1:-1)*(Number(f[16])*60+(f[18]?Number(f[18]):0))):k||(g=ac(g));return e.setTime(+g);}}];aq.parse=function(e){return +aq(""+e);};ar.toString=function(f,g,e){return f===ah||!P(this)?this[0].toString():w(this,f,g,e,al(this));};ar.toUTCString=ar.toGMTString=function(f,g,e){return f===ah||!P(this)?this[0].toUTCString():w(this,f,g,e,!0);};ar.toISOString=function(){return this.toUTCString("yyyy-MM-dd'T'HH:mm:ss(.fff)zzz");};aq.defaultLocale="";aq.locales={"":{monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),amDesignator:"AM",pmDesignator:"PM"}};aq.formatters={i:"yyyy-MM-dd'T'HH:mm:ss(.fff)",u:"yyyy-MM-dd'T'HH:mm:ss(.fff)zzz"};d("getTime,valueOf,toDateString,toTimeString,toLocaleString,toLocaleDateString,toLocaleTimeString,toJSON".split(","),function(e){ar[e]=function(){return this[0][e]();};});ar.setTime=function(e){this[0].setTime(e);return this;};ar.valid=h(P);ar.clone=function(){return new aq(this);};ar.clearTime=function(){return this.setHours(0,0,0,0);};ar.toDate=function(){return new ap(+this[0]);};aq.now=function(){return +new ap;};aq.today=function(){return(new aq).clearTime();};aq.UTC=ak;aq.getDaysInMonth=Y;if(typeof module!=="undefined"&&module.exports){module.exports=aq;}typeof define==="function"&&define.amd&&define([],function(){return aq;});return aq;}(Date,Math,Array);
/*!  generated on 2018-05-17 21:19:12.932 PDT(-0700) in 108 ms  */

/*!  served in 23 ms  */
